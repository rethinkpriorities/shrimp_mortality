<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Methods for Pre-slaughter mortality of farmed shrimp - 1&nbsp; Survival curves model</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/lit_review.html" rel="next">
<link href="../index.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/survival_curves.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Survival curves model</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Methods for Pre-slaughter mortality of farmed shrimp</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/Hannah-McKay/shrimp-test" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/survival_curves.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Survival curves model</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/lit_review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Quantitative literature analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/cross-species_mortality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Cross-species comparison</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preparing-data" id="toc-preparing-data" class="nav-link active" data-scroll-target="#preparing-data"><span class="header-section-number">1.1</span> Preparing data</a>
  <ul class="collapse">
  <li><a href="#sec-shrimpnumbers" id="toc-sec-shrimpnumbers" class="nav-link" data-scroll-target="#sec-shrimpnumbers"><span class="header-section-number">1.1.1</span> Number of shrimp that die on farms annually</a></li>
  <li><a href="#days-lived-by-life-stage" id="toc-days-lived-by-life-stage" class="nav-link" data-scroll-target="#days-lived-by-life-stage"><span class="header-section-number">1.1.2</span> Days lived by life stage</a></li>
  <li><a href="#mortality-rates-by-life-stage" id="toc-mortality-rates-by-life-stage" class="nav-link" data-scroll-target="#mortality-rates-by-life-stage"><span class="header-section-number">1.1.3</span> Mortality rates by life stage</a></li>
  </ul></li>
  <li><a href="#calculating-pre-slaughter-mortality-rates" id="toc-calculating-pre-slaughter-mortality-rates" class="nav-link" data-scroll-target="#calculating-pre-slaughter-mortality-rates"><span class="header-section-number">1.2</span> Calculating pre-slaughter mortality rates</a></li>
  <li><a href="#fitting-and-plotting-survival-curves" id="toc-fitting-and-plotting-survival-curves" class="nav-link" data-scroll-target="#fitting-and-plotting-survival-curves"><span class="header-section-number">1.3</span> Fitting and plotting survival curves</a></li>
  <li><a href="#comparing-to-slaughter-statistics" id="toc-comparing-to-slaughter-statistics" class="nav-link" data-scroll-target="#comparing-to-slaughter-statistics"><span class="header-section-number">1.4</span> Comparing to slaughter statistics</a></li>
  <li><a href="#stage-specific-rates-and-numbers-of-individuals" id="toc-stage-specific-rates-and-numbers-of-individuals" class="nav-link" data-scroll-target="#stage-specific-rates-and-numbers-of-individuals"><span class="header-section-number">1.5</span> Stage specific rates and numbers of individuals</a></li>
  <li><a href="#data-and-method-limitations" id="toc-data-and-method-limitations" class="nav-link" data-scroll-target="#data-and-method-limitations"><span class="header-section-number">1.6</span> Data and method limitations</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/Hannah-McKay/shrimp-test/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Survival curves model</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The aim of this chapter is to model the pre-slaughter mortality rates of farmed shrimp across the production cycle. We use the <a href="https://www.getguesstimate.com/models/21679">Guesstimate model</a> by <a href="https://doi.org/10.31219/osf.io/b8n3t">Waldhorn and Autric (2023)</a>, in which they estimated the number of shrimp farmed annually and alive at any time, to form the basis of our model.</p>
<p>We focus on three taxa: <em>P. vannamei</em>, <em>P. monodon</em>, and <em>Macrobrachium</em>—the latter covers <em>M. rosenbergii</em> and <em>M. nipponese</em>.</p>
<p>First, load the required packages and set the seed so that our data is reproducible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kde1d)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsurvfit)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># at time of publication we need the ggplot v3.4.4 because the most recent version (3.5.0) does not work with the patchwork package</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>old.version <span class="ot">&lt;-</span> <span class="st">"http://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.4.4.tar.gz"</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(old.version, <span class="at">repos=</span><span class="cn">NULL</span>, <span class="at">type=</span><span class="st">"source"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, create functions to compare the summary statistics of two data frames.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>give.summary<span class="ot">=</span><span class="cf">function</span>(x,y){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">data.frame</span>(<span class="st">"original"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(x, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(x), <span class="at">sd=</span><span class="fu">sd</span>(x), <span class="at">min=</span><span class="fu">min</span>(x), <span class="at">max=</span><span class="fu">max</span>(x)),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"new"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(y, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(y), <span class="at">sd=</span><span class="fu">sd</span>(y), <span class="at">min=</span><span class="fu">min</span>(y), <span class="at">max=</span><span class="fu">max</span>(y))), <span class="at">table.attr =</span> <span class="st">'data-quarto-disable-processing="true"'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">full_width=</span><span class="cn">FALSE</span>, <span class="at">font_size=</span><span class="dv">9</span>) </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>give.full.summary<span class="ot">=</span><span class="cf">function</span>(a1, b1, c1, a2, b2, c2){</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">data.frame</span>(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"original"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(a1, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(a1), <span class="at">sd=</span><span class="fu">sd</span>(a1), <span class="at">min=</span><span class="fu">min</span>(a1), <span class="at">max=</span><span class="fu">max</span>(a1)),</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"new"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(a2, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(a2), <span class="at">sd=</span><span class="fu">sd</span>(a2), <span class="at">min=</span><span class="fu">min</span>(a2), <span class="at">max=</span><span class="fu">max</span>(a2)),</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"original"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(b1, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(b1), <span class="at">sd=</span><span class="fu">sd</span>(b1), <span class="at">min=</span><span class="fu">min</span>(b1), <span class="at">max=</span><span class="fu">max</span>(b1)),</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"new"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(b2, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(b2), <span class="at">sd=</span><span class="fu">sd</span>(b2), <span class="at">min=</span><span class="fu">min</span>(b2), <span class="at">max=</span><span class="fu">max</span>(b2)),</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"original"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(c1, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(c1), <span class="at">sd=</span><span class="fu">sd</span>(c1), <span class="at">min=</span><span class="fu">min</span>(c1), <span class="at">max=</span><span class="fu">max</span>(c1)),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"new"</span><span class="ot">=</span><span class="fu">c</span>(<span class="fu">quantile</span>(c2, <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.5</span>,<span class="fl">0.95</span>)),</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean=</span><span class="fu">mean</span>(c2), <span class="at">sd=</span><span class="fu">sd</span>(c2), <span class="at">min=</span><span class="fu">min</span>(c2), <span class="at">max=</span><span class="fu">max</span>(c2))),</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.attr =</span> <span class="st">'data-quarto-disable-processing="true"'</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"original"</span>, <span class="st">"new"</span>), <span class="dv">3</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">full_width=</span><span class="cn">FALSE</span>, <span class="at">font_size=</span><span class="dv">9</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="preparing-data" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="preparing-data"><span class="header-section-number">1.1</span> Preparing data</h2>
<p>For all the .csv files used in this chapter, see the <a href="https://github.com/rethinkpriorities/shrimp_mortality">GitHub repository</a>.</p>
<p>We downloaded the 5000 samples created by the <a href="https://www.getguesstimate.com/models/21679">Guesstimate model</a> for the three taxa for each of:</p>
<ol type="1">
<li>The number of individuals that die on farms annually</li>
<li>Days lived by life stage, given the shrimp dies in the life stage (e.g., a shrimp that dies in the larval stage lives for an average of two days)</li>
<li>Mortality rates within each life stage, conditional upon having lived to that life stage</li>
</ol>
<p><strong>Note:</strong> the guesstimate model re-samples each time it is opened so the figures you see may differ slightly from those used here.</p>
<p>To best sample from the Guesstimate data (especially the tails of the distributions) and to remove errors created by Guesstimate (e.g., negative values), we generated 100,000 synthetic samples for each of these, based off the original 5000 guesstimate samples. To do this, we use the <code>kde1d</code> function, which estimates a kernel density function from the 5000 samples, and the <code>rkde1d</code> function, which generates n (in our case 100,000) samples from the estimated kernel density.</p>
<section id="sec-shrimpnumbers" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="sec-shrimpnumbers"><span class="header-section-number">1.1.1</span> Number of shrimp that die on farms annually</h3>
<p>Starting with the number of individuals that die on farms annually, we first load the samples from Guesstimate, then make the 100,000 samples.</p>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loading die on farms samples, taken from Guesstimate model</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>allspecies_dof_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/die_on_farm_samples.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>vannamei_dof<span class="ot">&lt;-</span>allspecies_dof_samp<span class="sc">$</span>vannamei[allspecies_dof_samp<span class="sc">$</span>vannamei<span class="sc">&gt;</span><span class="dv">0</span>] <span class="sc">%&gt;%</span> <span class="co"># Cell GZ in the Guesstimate model</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># removing negative values created by Guesstimate</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># running kde1d function and ensuring no values below 0 are created</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.) <span class="co"># creating 100,000 samples from the data</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># now we can compare the summary statistics of the old and new data</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(allspecies_dof_samp<span class="sc">$</span>vannamei, vannamei_dof)<span class="sc">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. vannamei"</span><span class="ot">=</span><span class="dv">3</span>)) <span class="co"># creating a header that spans the full 3 columns of the table</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># repeat this for other taxa</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>monodon_dof<span class="ot">&lt;-</span>allspecies_dof_samp<span class="sc">$</span>monodon[allspecies_dof_samp<span class="sc">$</span>monodon<span class="sc">&gt;</span><span class="dv">0</span>] <span class="sc">%&gt;%</span> <span class="co"># Cell ES in the Guesstimate model</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(allspecies_dof_samp<span class="sc">$</span>monodon, monodon_dof)<span class="sc">%&gt;%</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. monodon"</span><span class="ot">=</span><span class="dv">3</span>))</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>macro_dof<span class="ot">&lt;-</span>allspecies_dof_samp<span class="sc">$</span>macrobrachium[allspecies_dof_samp<span class="sc">$</span>macrobrachium<span class="sc">&gt;</span><span class="dv">0</span>] <span class="sc">%&gt;%</span> <span class="co"># Cell BZ in the Guesstimate model</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(allspecies_dof_samp<span class="sc">$</span>macrobrachium, macro_dof) <span class="sc">%&gt;%</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"Macrobrachium"</span><span class="ot">=</span><span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. vannamei</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 3.539500e+11 </td>
   <td style="text-align:right;"> 3.517307e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 5.810000e+11 </td>
   <td style="text-align:right;"> 5.791339e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 9.980500e+11 </td>
   <td style="text-align:right;"> 1.003184e+12 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 6.192688e+11 </td>
   <td style="text-align:right;"> 6.234259e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 4.229737e+11 </td>
   <td style="text-align:right;"> 2.956778e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> -1.490000e+13 </td>
   <td style="text-align:right;"> 5.696191e+08 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 8.250000e+12 </td>
   <td style="text-align:right;"> 8.060032e+12 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. monodon</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 29395000000 </td>
   <td style="text-align:right;"> 29124727717 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 52900000000 </td>
   <td style="text-align:right;"> 52723011534 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 93605000000 </td>
   <td style="text-align:right;"> 93893586229 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 56130860000 </td>
   <td style="text-align:right;"> 56014290871 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 20685345595 </td>
   <td style="text-align:right;"> 20640193828 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 16000000000 </td>
   <td style="text-align:right;"> 21079491 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 216000000000 </td>
   <td style="text-align:right;"> 215982898786 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Macrobrachium</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 9.400000e+10 </td>
   <td style="text-align:right;"> 9.381296e+10 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 1.650000e+11 </td>
   <td style="text-align:right;"> 1.646129e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 3.180000e+11 </td>
   <td style="text-align:right;"> 3.190560e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 1.802238e+11 </td>
   <td style="text-align:right;"> 1.804668e+11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 8.362092e+10 </td>
   <td style="text-align:right;"> 8.210190e+10 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 4.660000e+10 </td>
   <td style="text-align:right;"> 3.012260e+08 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 1.620000e+12 </td>
   <td style="text-align:right;"> 1.604432e+12 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now we can calculate the proportion of farmed shrimp accounted for by each species for each of our 100,000 samples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>allspecies_dof<span class="ot">&lt;-</span><span class="fu">cbind</span>(vannamei_dof, monodon_dof, macro_dof) <span class="co"># combining the 100,000 samples for each species into a data frame</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>prop_allspecies<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(allspecies_dof) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">van_prop=</span>vannamei_dof<span class="sc">/</span><span class="fu">sum</span>(vannamei_dof, monodon_dof, macro_dof), <span class="co"># calculating each sample as a proportion of the total shrimp, row-wise</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">mon_prop=</span>monodon_dof<span class="sc">/</span><span class="fu">sum</span>(vannamei_dof, monodon_dof, macro_dof),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">macro_prop=</span>macro_dof<span class="sc">/</span><span class="fu">sum</span>(vannamei_dof, monodon_dof, macro_dof))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>prop_allspecies_dof<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(prop_allspecies[,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>]) <span class="co"># keeping only the proportions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="days-lived-by-life-stage" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="days-lived-by-life-stage"><span class="header-section-number">1.1.2</span> Days lived by life stage</h3>
<p>Next we load the data for the number of days lived by a shrimp, given that it dies within a certain life stage. The four life stages are larval, postlarval, juvenile-adult, and (if a shrimp survives all three) the days lived before slaughter, which we call the total farmed days.</p>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First load the data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>vannamei_days_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/vannamei_days_lived.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">","</span>) <span class="co"># Cells TE, VO, XM, and QV in the Guesstimate model</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>monodon_days_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/monodon_days_lived.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>) <span class="co"># Cells MF, HI, OZ, and LW in the Guesstimate model</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>macrobrachium_days_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/macrobrachium_days_lived.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>) <span class="co"># Cells AS, BJ, EY, and XT in the Guesstimate model</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Next make the 100,000 samples</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>vannamei_days_lived<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">larval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>), <span class="co"># create empty data frame</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">postlarval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">juvenile.adult=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                                <span class="at">total.farmed=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># fill empty data frame with data simulated from Guesstimate data using kde1d function</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>vannamei_days_lived<span class="sc">$</span>larval<span class="ot">&lt;-</span>vannamei_days_samp<span class="sc">$</span>larval <span class="sc">%&gt;%</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># shrimp can't live for fewer than 0 days so we limit the distribution</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>vannamei_days_lived<span class="sc">$</span>postlarval<span class="ot">&lt;-</span>vannamei_days_samp<span class="sc">$</span>postlarval <span class="sc">%&gt;%</span> </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>vannamei_days_lived<span class="sc">$</span>juvenile.adult<span class="ot">&lt;-</span>vannamei_days_samp<span class="sc">$</span>juvenile.adult <span class="sc">%&gt;%</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="fu">give.full.summary</span>(vannamei_days_samp<span class="sc">$</span>larval,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>                  vannamei_days_samp<span class="sc">$</span>postlarval,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>                  vannamei_days_samp<span class="sc">$</span>juvenile.adult,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                  vannamei_days_lived<span class="sc">$</span>larval,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>                  vannamei_days_lived<span class="sc">$</span>postlarval,</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                  vannamei_days_lived<span class="sc">$</span>juvenile.adult) <span class="sc">%&gt;%</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">"larval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"postlarval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"juvenile-subadult"</span> <span class="ot">=</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. vannamei"</span><span class="ot">=</span><span class="dv">7</span>))</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co"># repeat for other species</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>monodon_days_lived<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">larval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>                               <span class="at">postlarval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>                               <span class="at">juvenile.adult=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>                               <span class="at">total.farmed=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>))</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>monodon_days_lived<span class="sc">$</span>larval<span class="ot">&lt;-</span>monodon_days_samp<span class="sc">$</span>larval <span class="sc">%&gt;%</span> </span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># shrimp can't live for fewer than 0 days so we limit the distribution</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>monodon_days_lived<span class="sc">$</span>postlarval<span class="ot">&lt;-</span>monodon_days_samp<span class="sc">$</span>postlarval <span class="sc">%&gt;%</span> </span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>monodon_days_lived<span class="sc">$</span>juvenile.adult<span class="ot">&lt;-</span>monodon_days_samp<span class="sc">$</span>juvenile.adult <span class="sc">%&gt;%</span> </span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="fu">give.full.summary</span>(monodon_days_samp<span class="sc">$</span>larval,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>                  monodon_days_samp<span class="sc">$</span>postlarval,</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>                  monodon_days_samp<span class="sc">$</span>juvenile.adult,</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>                  monodon_days_lived<span class="sc">$</span>larval,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>                  monodon_days_lived<span class="sc">$</span>postlarval,</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>                  monodon_days_lived<span class="sc">$</span>juvenile.adult) <span class="sc">%&gt;%</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">"larval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"postlarval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"juvenile-subadult"</span> <span class="ot">=</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. monodon"</span><span class="ot">=</span><span class="dv">7</span>))</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>macro_days_lived<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">larval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>), </span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>                             <span class="at">postlarval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>                             <span class="at">juvenile.adult=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>                             <span class="at">total.farmed=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>))</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>macro_days_lived<span class="sc">$</span>larval<span class="ot">&lt;-</span>macrobrachium_days_samp<span class="sc">$</span>larval <span class="sc">%&gt;%</span> </span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># shrimp can't live for fewer than 0 days so we limit the distribution </span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>macro_days_lived<span class="sc">$</span>postlarval<span class="ot">&lt;-</span>macrobrachium_days_samp<span class="sc">$</span>postlarval <span class="sc">%&gt;%</span> </span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>macro_days_lived<span class="sc">$</span>juvenile.adult<span class="ot">&lt;-</span>macrobrachium_days_samp<span class="sc">$</span>juvenile.adult <span class="sc">%&gt;%</span> </span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a><span class="fu">give.full.summary</span>(macrobrachium_days_samp<span class="sc">$</span>larval,</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>                  macrobrachium_days_samp<span class="sc">$</span>postlarval,</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>                  macrobrachium_days_samp<span class="sc">$</span>juvenile.adult,</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>                  macro_days_lived<span class="sc">$</span>larval,</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>                  macro_days_lived<span class="sc">$</span>postlarval,</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>                  macro_days_lived<span class="sc">$</span>juvenile.adult) <span class="sc">%&gt;%</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">"larval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"postlarval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"juvenile-subadult"</span> <span class="ot">=</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"Macrobrachium"</span><span class="ot">=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. vannamei</div></th></tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">larval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">postlarval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">juvenile-subadult</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 0.5023743 </td>
   <td style="text-align:right;"> 0.4902677 </td>
   <td style="text-align:right;"> 11.154996 </td>
   <td style="text-align:right;"> 11.154865 </td>
   <td style="text-align:right;"> 53.13992 </td>
   <td style="text-align:right;"> 54.03571 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 2.1023025 </td>
   <td style="text-align:right;"> 2.1120241 </td>
   <td style="text-align:right;"> 14.918215 </td>
   <td style="text-align:right;"> 14.957922 </td>
   <td style="text-align:right;"> 80.29052 </td>
   <td style="text-align:right;"> 80.32173 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 8.5356682 </td>
   <td style="text-align:right;"> 8.9065270 </td>
   <td style="text-align:right;"> 20.017363 </td>
   <td style="text-align:right;"> 20.061194 </td>
   <td style="text-align:right;"> 106.91953 </td>
   <td style="text-align:right;"> 106.09696 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 3.1018999 </td>
   <td style="text-align:right;"> 3.0744436 </td>
   <td style="text-align:right;"> 15.171321 </td>
   <td style="text-align:right;"> 15.198329 </td>
   <td style="text-align:right;"> 80.38564 </td>
   <td style="text-align:right;"> 80.26579 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 3.2349854 </td>
   <td style="text-align:right;"> 3.1241976 </td>
   <td style="text-align:right;"> 2.734755 </td>
   <td style="text-align:right;"> 2.732966 </td>
   <td style="text-align:right;"> 17.21552 </td>
   <td style="text-align:right;"> 16.85421 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 0.1249571 </td>
   <td style="text-align:right;"> 0.0002519 </td>
   <td style="text-align:right;"> 7.741822 </td>
   <td style="text-align:right;"> 7.395876 </td>
   <td style="text-align:right;"> 50.03272 </td>
   <td style="text-align:right;"> 44.74333 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 33.8854679 </td>
   <td style="text-align:right;"> 33.7981077 </td>
   <td style="text-align:right;"> 30.754078 </td>
   <td style="text-align:right;"> 31.837442 </td>
   <td style="text-align:right;"> 109.99987 </td>
   <td style="text-align:right;"> 115.53883 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. monodon</div></th></tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">larval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">postlarval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">juvenile-subadult</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 0.4963115 </td>
   <td style="text-align:right;"> 0.4996946 </td>
   <td style="text-align:right;"> 11.001184 </td>
   <td style="text-align:right;"> 11.068435 </td>
   <td style="text-align:right;"> 34.93126 </td>
   <td style="text-align:right;"> 35.489895 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 2.2152736 </td>
   <td style="text-align:right;"> 2.1858878 </td>
   <td style="text-align:right;"> 16.571929 </td>
   <td style="text-align:right;"> 16.617385 </td>
   <td style="text-align:right;"> 70.11952 </td>
   <td style="text-align:right;"> 70.076832 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 9.6407133 </td>
   <td style="text-align:right;"> 9.5278613 </td>
   <td style="text-align:right;"> 25.015574 </td>
   <td style="text-align:right;"> 24.962607 </td>
   <td style="text-align:right;"> 136.61865 </td>
   <td style="text-align:right;"> 136.631247 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 3.2634577 </td>
   <td style="text-align:right;"> 3.2441306 </td>
   <td style="text-align:right;"> 17.106562 </td>
   <td style="text-align:right;"> 17.157913 </td>
   <td style="text-align:right;"> 76.12007 </td>
   <td style="text-align:right;"> 76.350636 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 3.6398201 </td>
   <td style="text-align:right;"> 3.4359323 </td>
   <td style="text-align:right;"> 4.356787 </td>
   <td style="text-align:right;"> 4.337294 </td>
   <td style="text-align:right;"> 33.43386 </td>
   <td style="text-align:right;"> 33.148128 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 0.0212167 </td>
   <td style="text-align:right;"> 0.0009423 </td>
   <td style="text-align:right;"> 6.723713 </td>
   <td style="text-align:right;"> 5.253515 </td>
   <td style="text-align:right;"> 13.39687 </td>
   <td style="text-align:right;"> 2.849361 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 96.7623124 </td>
   <td style="text-align:right;"> 68.5132450 </td>
   <td style="text-align:right;"> 44.915889 </td>
   <td style="text-align:right;"> 46.008715 </td>
   <td style="text-align:right;"> 337.47740 </td>
   <td style="text-align:right;"> 338.425447 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Macrobrachium</div></th></tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">larval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">postlarval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">juvenile-subadult</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 1.9786751 </td>
   <td style="text-align:right;"> 1.9602180 </td>
   <td style="text-align:right;"> 29.987507 </td>
   <td style="text-align:right;"> 30.20970 </td>
   <td style="text-align:right;"> 60.63581 </td>
   <td style="text-align:right;"> 61.08796 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 7.6767357 </td>
   <td style="text-align:right;"> 7.6056272 </td>
   <td style="text-align:right;"> 42.342525 </td>
   <td style="text-align:right;"> 42.52669 </td>
   <td style="text-align:right;"> 95.11617 </td>
   <td style="text-align:right;"> 95.69554 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 29.9404670 </td>
   <td style="text-align:right;"> 29.3428149 </td>
   <td style="text-align:right;"> 59.741628 </td>
   <td style="text-align:right;"> 59.89201 </td>
   <td style="text-align:right;"> 149.64495 </td>
   <td style="text-align:right;"> 150.46335 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 10.6956641 </td>
   <td style="text-align:right;"> 10.6289836 </td>
   <td style="text-align:right;"> 43.351758 </td>
   <td style="text-align:right;"> 43.47981 </td>
   <td style="text-align:right;"> 98.96567 </td>
   <td style="text-align:right;"> 99.29394 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 10.5057846 </td>
   <td style="text-align:right;"> 10.1343738 </td>
   <td style="text-align:right;"> 9.262974 </td>
   <td style="text-align:right;"> 9.20008 </td>
   <td style="text-align:right;"> 27.81269 </td>
   <td style="text-align:right;"> 27.65936 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 0.4628982 </td>
   <td style="text-align:right;"> 0.0007937 </td>
   <td style="text-align:right;"> 20.471376 </td>
   <td style="text-align:right;"> 17.33767 </td>
   <td style="text-align:right;"> 31.35562 </td>
   <td style="text-align:right;"> 23.32129 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 159.2862181 </td>
   <td style="text-align:right;"> 155.5098833 </td>
   <td style="text-align:right;"> 82.711654 </td>
   <td style="text-align:right;"> 85.97558 </td>
   <td style="text-align:right;"> 300.38509 </td>
   <td style="text-align:right;"> 301.48431 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Guesstimate produced a few large numbers of over one year for the total days farmed, which seems incorrect, so we remove these and restrict to:</p>
<ul>
<li>215 days for <em>P. vannamei</em> (<a href="https://perma.cc/DT32-95S6">FAO (2009a)</a> suggests the maximum cycle is 6 months in ongrowing with around a month of development prior to that, 7 months = ~214 days)</li>
<li>245 days for <em>P. monodon</em> (<a href="https://perma.cc/72G5-H63W">FAO (2009b)</a> suggests the maximum cycle is &gt;6 months in ongrowing, so we assume ~7 months, with around a month of development prior to that, 8 months = ~244 days)</li>
<li>335 day for <em>Macrobrachium</em> (<a href="https://perma.cc/8KSC-SHWG">New (2010, p.22; p.129)</a> suggests that 11 months is the typical maximum length of a production cycle, 11 months= ~335.5 days)</li>
</ul>
<p>The <code>kde1d</code> function will still produce a few samples just above this estimation.</p>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>vannamei_days_lived_total<span class="ot">&lt;-</span>vannamei_days_samp<span class="sc">$</span>total_farmed_d[vannamei_days_samp<span class="sc">$</span>total_farmed_d<span class="sc">&lt;</span><span class="dv">215</span>]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>vannamei_days_lived<span class="sc">$</span>total.farmed<span class="ot">&lt;-</span>vannamei_days_lived_total <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(vannamei_days_lived_total, vannamei_days_lived<span class="sc">$</span>total.farmed) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. vannamei"</span> <span class="ot">=</span> <span class="dv">3</span>))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>monodon_days_lived_total<span class="ot">&lt;-</span>monodon_days_samp<span class="sc">$</span>total_farmed_d[monodon_days_samp<span class="sc">$</span>total_farmed_d<span class="sc">&lt;</span><span class="dv">245</span>]</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>monodon_days_lived<span class="sc">$</span>total.farmed<span class="ot">&lt;-</span>monodon_days_lived_total <span class="sc">%&gt;%</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(monodon_days_lived_total, monodon_days_lived<span class="sc">$</span>total.farmed) <span class="sc">%&gt;%</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. monodon"</span> <span class="ot">=</span> <span class="dv">3</span>))</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>macro_days_lived_total<span class="ot">&lt;-</span>macrobrachium_days_samp<span class="sc">$</span>total_farmed_d[macrobrachium_days_samp<span class="sc">$</span>total_farmed_d<span class="sc">&lt;</span><span class="dv">335</span>]</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>macro_days_lived<span class="sc">$</span>total.farmed<span class="ot">&lt;-</span>macro_days_lived_total <span class="sc">%&gt;%</span> </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(macro_days_lived_total, macro_days_lived<span class="sc">$</span>total.farmed) <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"Macrobrachium"</span> <span class="ot">=</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. vannamei</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 112.62194 </td>
   <td style="text-align:right;"> 112.85176 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 150.30559 </td>
   <td style="text-align:right;"> 150.24385 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 197.10220 </td>
   <td style="text-align:right;"> 195.97661 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 151.83696 </td>
   <td style="text-align:right;"> 151.71481 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 25.42041 </td>
   <td style="text-align:right;"> 25.13249 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 82.55418 </td>
   <td style="text-align:right;"> 70.23521 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 214.96775 </td>
   <td style="text-align:right;"> 225.03162 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. monodon</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 143.34503 </td>
   <td style="text-align:right;"> 143.12522 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 172.88283 </td>
   <td style="text-align:right;"> 173.10137 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 211.21792 </td>
   <td style="text-align:right;"> 210.46603 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 174.34588 </td>
   <td style="text-align:right;"> 174.47863 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 20.53002 </td>
   <td style="text-align:right;"> 20.37596 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 112.22230 </td>
   <td style="text-align:right;"> 107.01303 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 244.54303 </td>
   <td style="text-align:right;"> 257.60783 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Macrobrachium</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 136.15204 </td>
   <td style="text-align:right;"> 136.34583 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 175.76759 </td>
   <td style="text-align:right;"> 176.33558 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 243.83641 </td>
   <td style="text-align:right;"> 242.91388 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 180.73839 </td>
   <td style="text-align:right;"> 180.95648 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 33.15951 </td>
   <td style="text-align:right;"> 32.80125 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 100.31524 </td>
   <td style="text-align:right;"> 94.01438 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 334.92005 </td>
   <td style="text-align:right;"> 348.78935 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We will need the total farmed days in future chapters so we save them as csv files.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">data.frame</span>(<span class="at">total.farmed=</span>vannamei_days_lived<span class="sc">$</span>total.farmed), </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">file=</span><span class="st">"../data/survival_curves/vannamei_totalfarmed_days.csv"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">data.frame</span>(<span class="at">total.farmed=</span>monodon_days_lived<span class="sc">$</span>total.farmed), </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">file=</span><span class="st">"../data/survival_curves/monodon_totalfarmed_days.csv"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">data.frame</span>(<span class="at">total.farmed=</span>macro_days_lived<span class="sc">$</span>total.farmed), </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">file=</span><span class="st">"../data/survival_curves/macro_totalfarmed_days.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mortality-rates-by-life-stage" class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="mortality-rates-by-life-stage"><span class="header-section-number">1.1.3</span> Mortality rates by life stage</h3>
<p>Now we load the data for the mortality rates samples, then make the 100,000 samples.</p>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>vannamei_mort_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/vannamei_mortality_rates.csv"</span>,<span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>) <span class="co"># Cells UY, UJ, and TF in the Guesstimate model</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>monodon_mort_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/monodon_mortality_rates.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>) <span class="co"># Cells ZA, XZ, and YR in the Guesstimate model</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>macrobrachium_mort_samp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/macrobrachium_mortality_rates.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>) <span class="co"># Cells VG, OX, and QS in the Guesstimate model</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>vannamei_stage_prob<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">larval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>), <span class="co"># create empty data frame</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">postlarval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">juvenile.adult=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># fill empty data frame with data simulated from Guesstimate data using kde1d function</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>vannamei_stage_prob<span class="sc">$</span>larval<span class="ot">&lt;-</span>vannamei_mort_samp<span class="sc">$</span>larval <span class="sc">%&gt;%</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co"># Probabilities cannot be less than 0 or more than 1 so we add these as xmin and xmax</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>vannamei_stage_prob<span class="sc">$</span>postlarval<span class="ot">&lt;-</span>vannamei_mort_samp<span class="sc">$</span>postlarval <span class="sc">%&gt;%</span> </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>vannamei_stage_prob<span class="sc">$</span>juvenile.adult<span class="ot">&lt;-</span>vannamei_mort_samp<span class="sc">$</span>juvenile.adult[vannamei_mort_samp<span class="sc">$</span>juvenile.adult<span class="sc">&lt;</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>, <span class="co"># The juvenile-adult samples from Guesstimate sampled some instances over 1 so we get rid of these first, or else the xmin and xmax functions won't work</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="fu">give.full.summary</span>(vannamei_mort_samp<span class="sc">$</span>larval,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>                  vannamei_mort_samp<span class="sc">$</span>postlarval,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                  vannamei_mort_samp<span class="sc">$</span>juvenile.adult[vannamei_mort_samp<span class="sc">$</span>juvenile.adult<span class="sc">&lt;</span><span class="dv">1</span>],</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                  vannamei_stage_prob<span class="sc">$</span>larval,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                  vannamei_stage_prob<span class="sc">$</span>postlarval,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                  vannamei_stage_prob<span class="sc">$</span>juvenile.adult) <span class="sc">%&gt;%</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">"larval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"postlarval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"juvenile-subadult"</span> <span class="ot">=</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. vannamei"</span><span class="ot">=</span><span class="dv">7</span>))</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="co"># repeat for other taxa</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>monodon_stage_prob<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">larval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>                               <span class="at">postlarval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>                               <span class="at">juvenile.adult=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>))</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>monodon_stage_prob<span class="sc">$</span>larval<span class="ot">&lt;-</span>monodon_mort_samp<span class="sc">$</span>larval <span class="sc">%&gt;%</span> </span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>, </span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>monodon_stage_prob<span class="sc">$</span>postlarval<span class="ot">&lt;-</span>monodon_mort_samp<span class="sc">$</span>postlarval <span class="sc">%&gt;%</span> </span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>monodon_stage_prob<span class="sc">$</span>juvenile.adult<span class="ot">&lt;-</span>monodon_mort_samp<span class="sc">$</span>juvenile.adult <span class="sc">%&gt;%</span> </span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="fu">give.full.summary</span>(monodon_mort_samp<span class="sc">$</span>larval,</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>                  monodon_mort_samp<span class="sc">$</span>postlarval,</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>                  monodon_mort_samp<span class="sc">$</span>juvenile.adult,</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>                  monodon_stage_prob<span class="sc">$</span>larval,</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>                  monodon_stage_prob<span class="sc">$</span>postlarval,</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>                  monodon_stage_prob<span class="sc">$</span>juvenile.adult) <span class="sc">%&gt;%</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">"larval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"postlarval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"juvenile-subadult"</span> <span class="ot">=</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. monodon"</span><span class="ot">=</span><span class="dv">7</span>))</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>macro_stage_prob<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">larval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>                             <span class="at">postlarval=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>),</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>                             <span class="at">juvenile.adult=</span><span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>))</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>macro_stage_prob<span class="sc">$</span>larval<span class="ot">&lt;-</span>macrobrachium_mort_samp<span class="sc">$</span>larval <span class="sc">%&gt;%</span> </span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>( <span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>         <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>macro_stage_prob<span class="sc">$</span>postlarval<span class="ot">&lt;-</span>macrobrachium_mort_samp<span class="sc">$</span>postlarval <span class="sc">%&gt;%</span> </span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>macro_stage_prob<span class="sc">$</span>juvenile.adult<span class="ot">&lt;-</span>macrobrachium_mort_samp<span class="sc">$</span>juvenile.adult <span class="sc">%&gt;%</span> </span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>(<span class="at">xmin =</span> <span class="dv">0</span>,</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a><span class="fu">give.full.summary</span>(macrobrachium_mort_samp<span class="sc">$</span>larval,</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>                  macrobrachium_mort_samp<span class="sc">$</span>postlarval,</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>                  macrobrachium_mort_samp<span class="sc">$</span>juvenile.adult,</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>                  macro_stage_prob<span class="sc">$</span>larval,</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>                  macro_stage_prob<span class="sc">$</span>postlarval,</span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>                  macro_stage_prob<span class="sc">$</span>juvenile.adult) <span class="sc">%&gt;%</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">" "</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">"larval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"postlarval"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"juvenile-subadult"</span> <span class="ot">=</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"Macrobrachium"</span><span class="ot">=</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. vannamei</div></th></tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">larval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">postlarval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">juvenile-subadult</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 0.0996531 </td>
   <td style="text-align:right;"> 0.0972387 </td>
   <td style="text-align:right;"> 0.1001447 </td>
   <td style="text-align:right;"> 0.0999791 </td>
   <td style="text-align:right;"> 0.0508207 </td>
   <td style="text-align:right;"> 0.0506593 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 0.1500220 </td>
   <td style="text-align:right;"> 0.1496121 </td>
   <td style="text-align:right;"> 0.1504374 </td>
   <td style="text-align:right;"> 0.1507727 </td>
   <td style="text-align:right;"> 0.1420997 </td>
   <td style="text-align:right;"> 0.1439536 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 0.2266631 </td>
   <td style="text-align:right;"> 0.2282536 </td>
   <td style="text-align:right;"> 0.2224142 </td>
   <td style="text-align:right;"> 0.2237825 </td>
   <td style="text-align:right;"> 0.3944276 </td>
   <td style="text-align:right;"> 0.3936253 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 0.1547854 </td>
   <td style="text-align:right;"> 0.1556152 </td>
   <td style="text-align:right;"> 0.1545581 </td>
   <td style="text-align:right;"> 0.1551854 </td>
   <td style="text-align:right;"> 0.1719317 </td>
   <td style="text-align:right;"> 0.1725749 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 0.0392371 </td>
   <td style="text-align:right;"> 0.0526141 </td>
   <td style="text-align:right;"> 0.0383756 </td>
   <td style="text-align:right;"> 0.0416042 </td>
   <td style="text-align:right;"> 0.1161365 </td>
   <td style="text-align:right;"> 0.1155133 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 0.0696998 </td>
   <td style="text-align:right;"> 0.0000104 </td>
   <td style="text-align:right;"> 0.0578250 </td>
   <td style="text-align:right;"> 0.0012256 </td>
   <td style="text-align:right;"> 0.0179568 </td>
   <td style="text-align:right;"> 0.0000372 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 0.3435277 </td>
   <td style="text-align:right;"> 0.9980489 </td>
   <td style="text-align:right;"> 0.3702702 </td>
   <td style="text-align:right;"> 0.9978175 </td>
   <td style="text-align:right;"> 0.9591167 </td>
   <td style="text-align:right;"> 0.9985386 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. monodon</div></th></tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">larval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">postlarval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">juvenile-subadult</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 0.2001242 </td>
   <td style="text-align:right;"> 0.1997098 </td>
   <td style="text-align:right;"> 0.1995617 </td>
   <td style="text-align:right;"> 0.1989895 </td>
   <td style="text-align:right;"> 0.2104763 </td>
   <td style="text-align:right;"> 0.0639917 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 0.2449577 </td>
   <td style="text-align:right;"> 0.2449867 </td>
   <td style="text-align:right;"> 0.2447093 </td>
   <td style="text-align:right;"> 0.2453887 </td>
   <td style="text-align:right;"> 0.2991240 </td>
   <td style="text-align:right;"> 0.3483152 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 0.2997172 </td>
   <td style="text-align:right;"> 0.2995932 </td>
   <td style="text-align:right;"> 0.2994525 </td>
   <td style="text-align:right;"> 0.3017630 </td>
   <td style="text-align:right;"> 0.3896331 </td>
   <td style="text-align:right;"> 0.9384648 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 0.2466252 </td>
   <td style="text-align:right;"> 0.2466316 </td>
   <td style="text-align:right;"> 0.2467749 </td>
   <td style="text-align:right;"> 0.2485648 </td>
   <td style="text-align:right;"> 0.2998994 </td>
   <td style="text-align:right;"> 0.4302422 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 0.0301440 </td>
   <td style="text-align:right;"> 0.0351535 </td>
   <td style="text-align:right;"> 0.0306094 </td>
   <td style="text-align:right;"> 0.0465916 </td>
   <td style="text-align:right;"> 0.0573127 </td>
   <td style="text-align:right;"> 0.2615026 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 0.1525521 </td>
   <td style="text-align:right;"> 0.0000248 </td>
   <td style="text-align:right;"> 0.1552940 </td>
   <td style="text-align:right;"> 0.0002576 </td>
   <td style="text-align:right;"> 0.2000194 </td>
   <td style="text-align:right;"> 0.0000026 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 0.3766730 </td>
   <td style="text-align:right;"> 0.9934958 </td>
   <td style="text-align:right;"> 0.3703696 </td>
   <td style="text-align:right;"> 0.9999699 </td>
   <td style="text-align:right;"> 0.3999908 </td>
   <td style="text-align:right;"> 0.9999854 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="7"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Macrobrachium</div></th></tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">larval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">postlarval</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">juvenile-subadult</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 0.4006129 </td>
   <td style="text-align:right;"> 0.3996983 </td>
   <td style="text-align:right;"> 0.1008623 </td>
   <td style="text-align:right;"> 0.1006506 </td>
   <td style="text-align:right;"> 0.3992222 </td>
   <td style="text-align:right;"> 0.3987035 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 0.5273712 </td>
   <td style="text-align:right;"> 0.5285526 </td>
   <td style="text-align:right;"> 0.1724686 </td>
   <td style="text-align:right;"> 0.1729053 </td>
   <td style="text-align:right;"> 0.4911646 </td>
   <td style="text-align:right;"> 0.4906385 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 0.6972928 </td>
   <td style="text-align:right;"> 0.7002748 </td>
   <td style="text-align:right;"> 0.3006805 </td>
   <td style="text-align:right;"> 0.3030567 </td>
   <td style="text-align:right;"> 0.5980952 </td>
   <td style="text-align:right;"> 0.5996646 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 0.5365256 </td>
   <td style="text-align:right;"> 0.5366353 </td>
   <td style="text-align:right;"> 0.1832576 </td>
   <td style="text-align:right;"> 0.1840283 </td>
   <td style="text-align:right;"> 0.4936169 </td>
   <td style="text-align:right;"> 0.4935724 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 0.0919400 </td>
   <td style="text-align:right;"> 0.0932098 </td>
   <td style="text-align:right;"> 0.0629856 </td>
   <td style="text-align:right;"> 0.0668443 </td>
   <td style="text-align:right;"> 0.0604250 </td>
   <td style="text-align:right;"> 0.0653766 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 0.2764604 </td>
   <td style="text-align:right;"> 0.0028506 </td>
   <td style="text-align:right;"> 0.0508418 </td>
   <td style="text-align:right;"> 0.0001643 </td>
   <td style="text-align:right;"> 0.3071373 </td>
   <td style="text-align:right;"> 0.0001255 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 0.9617491 </td>
   <td style="text-align:right;"> 0.9555300 </td>
   <td style="text-align:right;"> 0.5317322 </td>
   <td style="text-align:right;"> 0.9961765 </td>
   <td style="text-align:right;"> 0.7339364 </td>
   <td style="text-align:right;"> 0.9953234 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We will need these stage probabilities in future chapters, so we save them as .csv files.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>van.stages<span class="ot">&lt;-</span>vannamei_stage_prob</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>mon.stages<span class="ot">&lt;-</span>monodon_stage_prob</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>macro.stages<span class="ot">&lt;-</span>macro_stage_prob</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>van.stages<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"vannamei"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>mon.stages<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"monodon"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>macro.stages<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"macrobrachium"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>shrimp_prob.stages<span class="ot">&lt;-</span><span class="fu">rbind</span>(van.stages, mon.stages, macro.stages)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(shrimp_prob.stages, <span class="at">file=</span><span class="st">"../data/survival_curves/bystage_farmed_shrimp_model_probs.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Right now we have the probability that a shrimp dies in each stage, conditional on the shrimp having survived previous stages. However, we want the cumulative probability of a shrimp dying at each life stage—for example, the probability of dying in the postlarval stage is <span class="math inline">\(1-p(dying\ in\ larval\ stage)*p(dying\ in\ postlarval\ stage)\)</span>.</p>
<p>We also calculate the probability of a shrimp surviving to slaughter age, which means it has survived all of the larval, postlarval, and juvenile-adult stages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create four new columns with the total probability they make it to each stage </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>vannamei_stage_prob_total<span class="ot">&lt;-</span>vannamei_stage_prob <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">larval.total=</span>larval, <span class="at">postlarval.total=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>postlarval,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">juvenile.adult.total=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>postlarval)<span class="sc">*</span>juvenile.adult,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">slaughter.age=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>postlarval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>juvenile.adult))</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>vannamei_stage_prob_total<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(vannamei_stage_prob_total[,<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]) <span class="co"># keep only the totals</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># repeat for other species</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>monodon_stage_prob_total<span class="ot">&lt;-</span>monodon_stage_prob <span class="sc">%&gt;%</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">larval.total=</span>larval, <span class="at">postlarval.total=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>postlarval,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">juvenile.adult.total=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>postlarval)<span class="sc">*</span>juvenile.adult,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">slaughter.age=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>postlarval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>juvenile.adult))</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>monodon_stage_prob_total<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(monodon_stage_prob_total[,<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]) </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>macro_stage_prob_total<span class="ot">&lt;-</span>macro_stage_prob <span class="sc">%&gt;%</span> </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">larval.total=</span>larval, <span class="at">postlarval.total=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>postlarval,</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">juvenile.adult.total=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>postlarval)<span class="sc">*</span>juvenile.adult,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">slaughter.age=</span>(<span class="dv">1</span><span class="sc">-</span>larval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>postlarval)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>juvenile.adult))</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>macro_stage_prob_total<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(macro_stage_prob_total[,<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will need the probability that a shrimp makes it to slaughter age in future chapters, so we save .csv files of that data here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>van.slaught<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">slaughter.age=</span>vannamei_stage_prob_total<span class="sc">$</span>slaughter.age,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">species=</span><span class="fu">rep</span>(<span class="st">"vannamei"</span>))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>mon.slaught<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">slaughter.age=</span>monodon_stage_prob_total<span class="sc">$</span>slaughter.age,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">species=</span><span class="fu">rep</span>(<span class="st">"monodon"</span>))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>macro.slaught<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">slaughter.age=</span>macro_stage_prob_total<span class="sc">$</span>slaughter.age,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">species=</span><span class="fu">rep</span>(<span class="st">"macrobrachium"</span>))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(van.slaught, <span class="at">file=</span><span class="st">"../data/survival_curves/vannamei_model_slaughter_probs.csv"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mon.slaught, <span class="at">file=</span><span class="st">"../data/survival_curves/monodon_model_slaughter_probs.csv"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(macro.slaught, <span class="at">file=</span><span class="st">"../data/survival_curves/macro_model_slaughter_probs.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="calculating-pre-slaughter-mortality-rates" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="calculating-pre-slaughter-mortality-rates"><span class="header-section-number">1.2</span> Calculating pre-slaughter mortality rates</h2>
<p>Now we can calculate the pre-slaughter mortality rate across the production cycle. This will form the survival curves model.</p>
<p>To get a weighted average mortality rate we need to weight the life stage rates by the probability a shrimp is from a given species. We start by creating vector of species chosen according to probabilities from proportions calculated above (see <a href="#sec-shrimpnumbers" class="quarto-xref"><span>Section 1.1.1</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>psm_species_chosen <span class="ot">=</span> <span class="fu">vapply</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">:</span><span class="dv">100000</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(i) {<span class="fu">sample.int</span>(<span class="dv">3</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">prob=</span>prop_allspecies_dof[i, ])},</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">integer</span>(<span class="dv">1</span>))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that the proportions look correct</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">data.frame</span>(<span class="at">vannamei.prop=</span><span class="fu">length</span>(psm_species_chosen[psm_species_chosen<span class="sc">==</span><span class="dv">1</span>])<span class="sc">/</span><span class="fu">length</span>(psm_species_chosen),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">monodon.prop=</span><span class="fu">length</span>(psm_species_chosen[psm_species_chosen<span class="sc">==</span><span class="dv">2</span>])<span class="sc">/</span><span class="fu">length</span>(psm_species_chosen),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">macro.prop=</span><span class="fu">length</span>(psm_species_chosen[psm_species_chosen<span class="sc">==</span><span class="dv">3</span>])<span class="sc">/</span><span class="fu">length</span>(psm_species_chosen)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vannamei.prop monodon.prop macro.prop
1       0.71295      0.07009    0.21696</code></pre>
</div>
</div>
<p>Now, we make a data frame of 100,000 stage probabilities, weighted by the proportion of farmed shrimp that comes from each species.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>psm_stage_probabilities <span class="ot">=</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">nrow=</span><span class="dv">100000</span>, <span class="at">ncol=</span><span class="dv">4</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100000</span>){</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (psm_species_chosen[i] <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    psm_stage_probabilities[i, ] <span class="ot">=</span> <span class="fu">as.matrix</span>(vannamei_stage_prob_total[i,])</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (psm_species_chosen[i] <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    psm_stage_probabilities[i, ] <span class="ot">=</span> <span class="fu">as.matrix</span>(monodon_stage_prob_total[i,])</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (psm_species_chosen[i] <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    psm_stage_probabilities[i, ] <span class="ot">=</span> <span class="fu">as.matrix</span>(macro_stage_prob_total[i,])</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(psm_stage_probabilities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]       [,2]       [,3]      [,4]
[1,] 0.2397400 0.18531724 0.12371699 0.4512258
[2,] 0.1203589 0.10773300 0.08474946 0.6871587
[3,] 0.1533023 0.16083359 0.12652428 0.5593398
[4,] 0.1441758 0.10392355 0.07251141 0.6793893
[5,] 0.2165459 0.08968865 0.43641968 0.2573458
[6,] 0.6248090 0.03477258 0.16410685 0.1763116</code></pre>
</div>
</div>
<p>Now we can calculate the weighted days lived for each life stage of each species.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>psm_overall_proportion_days_lived <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100000</span>){</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  psm_stage_chosen <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="dv">4</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">prob=</span>psm_stage_probabilities[i, ])</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># P. vannamei</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (psm_species_chosen[i] <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>larval[i] </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>postlarval[i] </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>juvenile.adult[i] </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">4</span>){</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>total.farmed[i] </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># P. monodon</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (psm_species_chosen[i] <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>larval[i]</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>postlarval[i]</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>juvenile.adult[i]</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">4</span>){</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>total.farmed[i]</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Macrobrachium</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(psm_species_chosen[i]<span class="sc">==</span><span class="dv">3</span>){</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>larval[i]</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>postlarval[i]</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>juvenile.adult[i]</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (psm_stage_chosen <span class="sc">==</span> <span class="dv">4</span>){</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>      psm_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>total.farmed[i]</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the output by making it a data frame and labeling variables</span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>df_all<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(psm_overall_proportion_days_lived)</span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>df_all<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"all"</span>, <span class="dv">100000</span>)</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_all)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"value"</span>, <span class="st">"species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above gives us a vector of 100,000 samples which equate to the days lived by the weighted average farmed shrimp.</p>
<p>We now need to repeat the method, without weighting, for each species so that we can compare mortality across species.</p>
<div class="cell">
<details class="code-fold">
<summary>P. vannamei</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>vannamei_stage_probabilities<span class="ot">&lt;-</span><span class="fu">as.matrix</span>(vannamei_stage_prob_total)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>vannamei_overall_proportion_days_lived <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100000</span>){</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  vannamei_stage_chosen <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="dv">4</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">prob=</span>vannamei_stage_probabilities[i, ])</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (vannamei_stage_chosen <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>      vannamei_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>larval[i]</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (vannamei_stage_chosen <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>      vannamei_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>postlarval[i]</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (vannamei_stage_chosen <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>      vannamei_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>juvenile.adult[i]</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (vannamei_stage_chosen <span class="sc">==</span> <span class="dv">4</span>){</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>      vannamei_overall_proportion_days_lived[i] <span class="ot">=</span> vannamei_days_lived<span class="sc">$</span>total.farmed[i] </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Cleaning the output</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>df_vannamei<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(vannamei_overall_proportion_days_lived)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>df_vannamei<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"vannamei"</span>, <span class="dv">100000</span>)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_vannamei)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"value"</span>, <span class="st">"species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>P. monodon</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>monodon_stage_probabilities<span class="ot">&lt;-</span><span class="fu">as.matrix</span>(monodon_stage_prob_total)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>monodon_overall_proportion_days_lived <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100000</span>){</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  monodon_stage_chosen <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="dv">4</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">prob=</span>monodon_stage_probabilities[i, ])</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (monodon_stage_chosen <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    monodon_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>larval[i]</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (monodon_stage_chosen <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    monodon_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>postlarval[i]</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (monodon_stage_chosen <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    monodon_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>juvenile.adult[i]</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (monodon_stage_chosen <span class="sc">==</span> <span class="dv">4</span>){</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    monodon_overall_proportion_days_lived[i] <span class="ot">=</span> monodon_days_lived<span class="sc">$</span>total.farmed[i]</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>df_monodon<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(monodon_overall_proportion_days_lived)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>df_monodon<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"monodon"</span>, <span class="dv">100000</span>)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_monodon)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"value"</span>, <span class="st">"species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Macrobrachium</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>macro_stage_probabilities<span class="ot">&lt;-</span>macro_stage_prob_total</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>macro_overall_proportion_days_lived <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">100000</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100000</span>){</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  macro_stage_chosen <span class="ot">&lt;-</span> <span class="fu">sample.int</span>(<span class="dv">4</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">prob=</span>macro_stage_probabilities[i, ])</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (macro_stage_chosen <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    macro_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>larval[i]</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (macro_stage_chosen <span class="sc">==</span> <span class="dv">2</span>){</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    macro_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>postlarval[i]</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (macro_stage_chosen <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    macro_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>juvenile.adult[i]</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (macro_stage_chosen <span class="sc">==</span> <span class="dv">4</span>){</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    macro_overall_proportion_days_lived[i] <span class="ot">=</span> macro_days_lived<span class="sc">$</span>total.farmed[i]</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>df_macro<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(macro_overall_proportion_days_lived)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>df_macro<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="st">"Macrobrachium"</span>, <span class="dv">100000</span>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_macro)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"value"</span>, <span class="st">"species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>With all three taxa calculated, we now combine this with the weighted average into one data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df_spec<span class="ot">&lt;-</span><span class="fu">rbind</span>(df_vannamei, df_monodon, df_macro, df_all)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>df_spec<span class="sc">$</span>species<span class="ot">&lt;-</span><span class="fu">factor</span>(df_spec<span class="sc">$</span>species, <span class="at">levels=</span><span class="fu">c</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"vannamei"</span>, <span class="st">"monodon"</span>, <span class="st">"Macrobrachium"</span>, <span class="st">"all"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fitting-and-plotting-survival-curves" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="fitting-and-plotting-survival-curves"><span class="header-section-number">1.3</span> Fitting and plotting survival curves</h2>
<p>To fit the survival curves, we use the <code>survfit2</code> function from the <code>ggsurvfit</code> package and the <code>Surv</code> function from the package <code>survival</code>. The survival curves are made using Kaplan-Meier estimation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plot_datatest<span class="ot">&lt;-</span><span class="fu">survfit2</span>(<span class="fu">Surv</span>(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  df_spec<span class="sc">$</span>value, <span class="at">event =</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">length</span>(df_spec<span class="sc">$</span>value))) <span class="sc">~</span> species, <span class="at">data =</span> df_spec) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_survfit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we plot the results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>survival_curves<span class="ot">&lt;-</span><span class="fu">ggplot</span>(<span class="at">data=</span>plot_datatest[<span class="sc">!</span>plot_datatest<span class="sc">$</span>strata<span class="sc">==</span><span class="st">"all"</span>,], </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>estimate<span class="sc">*</span><span class="dv">100</span>, <span class="at">color=</span>strata)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Age (days)"</span>, <span class="at">y=</span><span class="st">"Survival probability (%)"</span>) <span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="co">#limits=c(0,300),</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.spacing =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"mm"</span>),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>), <span class="st">"mm"</span>))  <span class="sc">+</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>), <span class="at">clip=</span><span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a> <span class="co"># theme(plot.margin = unit(c(l=2,r=2,b=.2,t=.2), "lines")) +</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bracket</span>(<span class="at">data=</span><span class="cn">NULL</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">xmin=</span><span class="fu">quantile</span>(vannamei_days_lived<span class="sc">$</span>total.farmed, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>              <span class="at">xmax=</span><span class="fu">quantile</span>(vannamei_days_lived<span class="sc">$</span>total.farmed, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">y.position=</span><span class="dv">62</span>, <span class="at">label=</span><span class="st">"Slaughter"</span>, <span class="at">tip.length=</span><span class="fl">0.03</span>,</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span><span class="st">"#E69F00"</span>, <span class="at">size=</span>.<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bracket</span>(<span class="at">data=</span><span class="cn">NULL</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">xmin=</span><span class="fu">quantile</span>(monodon_days_lived<span class="sc">$</span>total.farmed, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>              <span class="at">xmax=</span><span class="fu">quantile</span>(monodon_days_lived<span class="sc">$</span>total.farmed, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>              <span class="at">y.position=</span><span class="fl">36.5</span>, <span class="at">label=</span><span class="st">"Slaughter"</span>, <span class="at">tip.length=</span><span class="fl">0.03</span>,</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span><span class="st">"#56B4E9"</span>, <span class="at">size=</span>.<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bracket</span>(<span class="at">data=</span><span class="cn">NULL</span>, <span class="at">inherit.aes=</span><span class="cn">FALSE</span>,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">xmin=</span><span class="fu">quantile</span>(macro_days_lived<span class="sc">$</span>total.farmed, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>              <span class="at">xmax=</span><span class="fu">quantile</span>(macro_days_lived<span class="sc">$</span>total.farmed, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>              <span class="at">y.position=</span><span class="dv">25</span>, <span class="at">label=</span><span class="st">"Slaughter"</span>, <span class="at">tip.length=</span><span class="fl">0.03</span>,</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span><span class="st">"#009E73"</span>, <span class="at">size=</span>.<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we plot the weighted average with a separate geom so that it plots over the brackets</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>plot_datatest[plot_datatest<span class="sc">$</span>strata<span class="sc">==</span><span class="st">"all"</span>,], </span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>estimate<span class="sc">*</span><span class="dv">100</span>, <span class="at">color=</span>strata), <span class="at">show.legend=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>,<span class="st">"#009E73"</span>, <span class="st">"#000000"</span>),</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span><span class="fu">c</span>(<span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"P. vannamei"</span>)),</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"P. monodon"</span>)),</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"Macrobrachium"</span>)),</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"All, weighted average"</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>                              ))</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting each species separately as well</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span><span class="fu">ggplot</span>(<span class="at">data=</span>plot_datatest[plot_datatest<span class="sc">$</span>strata<span class="sc">==</span><span class="st">"vannamei"</span>,],</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>estimate<span class="sc">*</span><span class="dv">100</span>, <span class="at">color=</span>strata)) <span class="sc">+</span></span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"#E69F00"</span>) <span class="sc">+</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">350</span>),</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>, <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="at">b=</span><span class="fl">0.5</span>,<span class="at">t=</span><span class="fl">0.5</span>,<span class="at">r=</span><span class="fl">0.5</span>, <span class="at">l=</span><span class="dv">0</span>), <span class="st">"lines"</span>),</span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_color_manual(values=c("#E69F00","#56B4E9","#009E73")) +</span></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">10</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">colour=</span><span class="st">"#E69F00"</span>) <span class="sc">+</span> <span class="co"># cell NX in the Guesstimate model</span></span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">22</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">colour=</span><span class="st">"#E69F00"</span>) <span class="co"># cell DA in the Guesstimate model</span></span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>p2<span class="ot">&lt;-</span><span class="fu">ggplot</span>(<span class="at">data=</span>plot_datatest[plot_datatest<span class="sc">$</span>strata<span class="sc">==</span><span class="st">"monodon"</span>,],</span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>estimate<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"#56B4E9"</span>)<span class="sc">+</span></span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">350</span>),</span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>,</span>
<span id="cb22-67"><a href="#cb22-67" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="at">b=</span><span class="fl">0.5</span>,<span class="at">t=</span><span class="fl">0.5</span>,<span class="at">r=</span><span class="fl">0.5</span>, <span class="at">l=</span><span class="dv">0</span>), <span class="st">"lines"</span>),</span>
<span id="cb22-68"><a href="#cb22-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb22-69"><a href="#cb22-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">10</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">colour=</span><span class="st">"#56B4E9"</span>) <span class="sc">+</span> <span class="co"># cell LQ in the Guesstimate model</span></span>
<span id="cb22-70"><a href="#cb22-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">27</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">colour=</span><span class="st">"#56B4E9"</span>) <span class="co"># cell HJ in the Guesstimate model</span></span>
<span id="cb22-71"><a href="#cb22-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-72"><a href="#cb22-72" aria-hidden="true" tabindex="-1"></a>p3<span class="ot">&lt;-</span><span class="fu">ggplot</span>(<span class="at">data=</span>plot_datatest[plot_datatest<span class="sc">$</span>strata<span class="sc">==</span><span class="st">"Macrobrachium"</span>,],</span>
<span id="cb22-73"><a href="#cb22-73" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>estimate<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb22-74"><a href="#cb22-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"#009E73"</span>)<span class="sc">+</span></span>
<span id="cb22-75"><a href="#cb22-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Age (days)"</span>, <span class="at">y=</span><span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb22-76"><a href="#cb22-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">350</span>),</span>
<span id="cb22-77"><a href="#cb22-77" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-78"><a href="#cb22-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-79"><a href="#cb22-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>,</span>
<span id="cb22-80"><a href="#cb22-80" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="at">b=</span><span class="fl">0.5</span>,<span class="at">t=</span><span class="fl">0.5</span>,<span class="at">r=</span><span class="fl">0.5</span>, <span class="at">l=</span><span class="dv">0</span>), <span class="st">"lines"</span>),</span>
<span id="cb22-81"><a href="#cb22-81" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb22-82"><a href="#cb22-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">29</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">colour=</span><span class="st">"#009E73"</span>) <span class="sc">+</span> <span class="co"># cell OD in the Guesstimate model</span></span>
<span id="cb22-83"><a href="#cb22-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">63</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">colour=</span><span class="st">"#009E73"</span>) <span class="co"># cell TK in the Guesstimate model</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fig-example-multiple-chunks" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-example-multiple-chunks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell quarto-layout-cell" style="flex-basis: 56.5%;justify-content: flex-start;">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survival_curves_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 43.5%;justify-content: flex-start;">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="survival_curves_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-example-multiple-chunks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.1
</figcaption>
</figure>
</div>
<p>We also extract the average probability of making it to slaughter age for each species:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vannamei_stage_probabilities[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5902775</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(monodon_stage_probabilities[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3225594</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(macro_stage_probabilities[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1914582</code></pre>
</div>
</div>
</section>
<section id="comparing-to-slaughter-statistics" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="comparing-to-slaughter-statistics"><span class="header-section-number">1.4</span> Comparing to slaughter statistics</h2>
<p>We next compare the slaughter figures to the number that died on farms (including pre-slaughter mortality) in the same year.</p>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>slaughter<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"../data/guesstimate/slaughtered_samples.csv"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>vannamei_slaught<span class="ot">&lt;-</span>slaughter<span class="sc">$</span>vannamei <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(slaughter<span class="sc">$</span>vannamei, vannamei_slaught) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. vannamei"</span> <span class="ot">=</span> <span class="dv">3</span>))</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>monodon_slaught<span class="ot">&lt;-</span>slaughter<span class="sc">$</span>monodon <span class="sc">%&gt;%</span> </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(slaughter<span class="sc">$</span>monodon, monodon_slaught) <span class="sc">%&gt;%</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"P. monodon"</span> <span class="ot">=</span> <span class="dv">3</span>))</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>macro_slaught<span class="ot">&lt;-</span>slaughter<span class="sc">$</span>macrobrchium <span class="sc">%&gt;%</span> </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kde1d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rkde1d</span>(<span class="dv">100000</span>,.)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="fu">give.summary</span>(slaughter<span class="sc">$</span>macrobrchium, macro_slaught) <span class="sc">%&gt;%</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_header_above</span>(<span class="fu">c</span>(<span class="st">"Macrobrachium"</span> <span class="ot">=</span> <span class="dv">3</span>))</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>allspecies_slaught<span class="ot">&lt;-</span><span class="fu">cbind</span>(vannamei_slaught, monodon_slaught, macro_slaught) <span class="co"># combining the 100,000 samples for each species into a data frame</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>slaught_prop_allspecies<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(allspecies_slaught) <span class="sc">%&gt;%</span> </span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">van_prop=</span>vannamei_slaught<span class="sc">/</span><span class="fu">sum</span>(vannamei_slaught, monodon_slaught, macro_slaught), <span class="co"># calculating each sample as a proportion of the total shrimp, row-wise</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">mon_prop=</span>monodon_slaught<span class="sc">/</span><span class="fu">sum</span>(vannamei_slaught, monodon_slaught, macro_slaught),</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">macro_prop=</span>macro_slaught<span class="sc">/</span><span class="fu">sum</span>(vannamei_slaught, monodon_slaught, macro_slaught))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. vannamei</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 220957800000 </td>
   <td style="text-align:right;"> 222476066766 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 342228500000 </td>
   <td style="text-align:right;"> 343470146341 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 529217650000 </td>
   <td style="text-align:right;"> 532874614636 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 354766329600 </td>
   <td style="text-align:right;"> 356150888840 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 96851040159 </td>
   <td style="text-align:right;"> 96858142911 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 144325000000 </td>
   <td style="text-align:right;"> 104518134351 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 952712000000 </td>
   <td style="text-align:right;"> 987182924790 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">P. monodon</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 11860315356 </td>
   <td style="text-align:right;"> 11923173880 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 20858815142 </td>
   <td style="text-align:right;"> 20984152771 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 36622412461 </td>
   <td style="text-align:right;"> 36434870776 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 22092898841 </td>
   <td style="text-align:right;"> 22176970451 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 7815695540 </td>
   <td style="text-align:right;"> 7784774999 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 5996479921 </td>
   <td style="text-align:right;"> 4618419389 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 71459992373 </td>
   <td style="text-align:right;"> 73715081829 </td>
  </tr>
</tbody>
</table>

</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<table data-quarto-disable-processing="true" class="table" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr><th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Macrobrachium</div></th></tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> original </th>
   <th style="text-align:right;"> new </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 5% </td>
   <td style="text-align:right;"> 20277647900 </td>
   <td style="text-align:right;"> 20563786382 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 31033290274 </td>
   <td style="text-align:right;"> 31051657941 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 95% </td>
   <td style="text-align:right;"> 46842577016 </td>
   <td style="text-align:right;"> 46844762225 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 31986343208 </td>
   <td style="text-align:right;"> 32058892477 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> sd </td>
   <td style="text-align:right;"> 8291128218 </td>
   <td style="text-align:right;"> 8209105772 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 10376290701 </td>
   <td style="text-align:right;"> 10599353581 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 86753502536 </td>
   <td style="text-align:right;"> 87744803041 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now we can compare the proportion of farmed shrimp from each species that are slaughtered annually and that die on farms annually.</p>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make all the data of interest into a data frame</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>comp_slaught_dof<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">Species=</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"vannamei"</span>, <span class="st">"monodon"</span>, <span class="st">"macrobrachium"</span>), <span class="dv">2</span>), </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Type=</span><span class="fu">c</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">rep</span>(<span class="st">"Slaughtered"</span>, <span class="dv">3</span>),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">rep</span>(<span class="st">"Die on farms (including pre-slaughter mortality)"</span>, <span class="dv">3</span>)),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Proportion=</span><span class="fu">c</span>(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">mean</span>(slaught_prop_allspecies<span class="sc">$</span>van_prop),</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">mean</span>(slaught_prop_allspecies<span class="sc">$</span>mon_prop),</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">mean</span>(slaught_prop_allspecies<span class="sc">$</span>macro_prop), </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">mean</span>(prop_allspecies_dof<span class="sc">$</span>van_prop),</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">mean</span>(prop_allspecies_dof<span class="sc">$</span>mon_prop),</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">mean</span>(prop_allspecies_dof<span class="sc">$</span>macro_prop)),</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Lower=</span><span class="fu">c</span>(</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(slaught_prop_allspecies<span class="sc">$</span>van_prop, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(slaught_prop_allspecies<span class="sc">$</span>mon_prop, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(slaught_prop_allspecies<span class="sc">$</span>macro_prop, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(prop_allspecies_dof<span class="sc">$</span>van_prop, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(prop_allspecies_dof<span class="sc">$</span>mon_prop, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(prop_allspecies_dof<span class="sc">$</span>macro_prop, <span class="at">probs=</span><span class="fl">0.025</span>)),</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Upper=</span><span class="fu">c</span>(</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(slaught_prop_allspecies<span class="sc">$</span>van_prop, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(slaught_prop_allspecies<span class="sc">$</span>mon_prop, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(slaught_prop_allspecies<span class="sc">$</span>macro_prop, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(prop_allspecies_dof<span class="sc">$</span>van_prop, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(prop_allspecies_dof<span class="sc">$</span>mon_prop, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">quantile</span>(prop_allspecies_dof<span class="sc">$</span>macro_prop, <span class="at">probs=</span><span class="fl">0.975</span>)))</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the results as individual bars</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(comp_slaught_dof, <span class="fu">aes</span>(<span class="at">y=</span>Type, <span class="at">x=</span>Proportion, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="at">position=</span><span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin=</span>Lower, <span class="at">xmax=</span>Upper), <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span>.<span class="dv">9</span>), <span class="at">width=</span>.<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#009E73"</span>,<span class="st">"#56B4E9"</span>,  <span class="st">"#E69F00"</span>), </span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels=</span><span class="fu">c</span>(</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"Macrobrachium"</span>)),</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"P. monodon"</span>)),</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"P. vannamei"</span>)))) <span class="sc">+</span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Died on farms</span><span class="sc">\n</span><span class="st">(including</span><span class="sc">\n</span><span class="st">pre-slaughter</span><span class="sc">\n</span><span class="st">mortality)"</span>, <span class="st">"Slaughtered"</span>)) <span class="sc">+</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Proportion"</span>) </span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a><span class="co"># plot as stacked bars</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(comp_slaught_dof, <span class="fu">aes</span>(<span class="at">y=</span>Type, <span class="at">x=</span>Proportion, <span class="at">group=</span>Species, <span class="at">fill=</span>Species)) <span class="sc">+</span></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="at">position=</span><span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span><span class="fu">round</span>(Proportion, <span class="dv">2</span>)),<span class="at">stat=</span><span class="st">"identity"</span>,<span class="at">position=</span><span class="fu">position_stack</span>(<span class="at">vjust=</span>.<span class="dv">5</span>), <span class="at">color=</span><span class="st">"black"</span>, <span class="at">size=</span><span class="fl">3.7</span>) <span class="sc">+</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#009E73"</span>,<span class="st">"#56B4E9"</span>,  <span class="st">"#E69F00"</span>), </span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels=</span><span class="fu">c</span>(<span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"Macrobrachium"</span>)), <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"P. monodon"</span>)), <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">"P. vannamei"</span>)))) <span class="sc">+</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Died on farms</span><span class="sc">\n</span><span class="st">(slaughter and</span><span class="sc">\n</span><span class="st">pre-slaughter)"</span>, <span class="st">"Slaughtered"</span>)) <span class="sc">+</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>,</span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>),</span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>),</span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.spacing =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"mm"</span>),</span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">1</span>), <span class="st">"mm"</span>)) <span class="sc">+</span></span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Mean proportion"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="survival_curves_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="survival_curves_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</section>
<section id="stage-specific-rates-and-numbers-of-individuals" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="stage-specific-rates-and-numbers-of-individuals"><span class="header-section-number">1.5</span> Stage specific rates and numbers of individuals</h2>
<p>Finally, we extract the mean and 95% credibility intervals for mortality rate at each life stage (including cumulative mortality rate) and number of individuals who die on farms at each stage (and in total).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate individual deaths for each life stage of each species</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>van_total_larval_deaths<span class="ot">&lt;-</span><span class="fu">mean</span>(vannamei_dof)<span class="sc">*</span><span class="fu">mean</span>(vannamei_stage_prob<span class="sc">$</span>larval)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>van_left_after_larval<span class="ot">&lt;-</span><span class="fu">mean</span>(vannamei_dof)<span class="sc">-</span>van_total_larval_deaths</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>van_total_postlarval_deaths<span class="ot">&lt;-</span>van_left_after_larval<span class="sc">*</span><span class="fu">mean</span>(vannamei_stage_prob<span class="sc">$</span>postlarval)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>van_left_after_postlarval<span class="ot">&lt;-</span>van_left_after_larval<span class="sc">-</span>van_total_postlarval_deaths</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>van_total_juvenile_deaths<span class="ot">&lt;-</span>van_left_after_postlarval<span class="sc">*</span><span class="fu">mean</span>(vannamei_stage_prob<span class="sc">$</span>juvenile.adult)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>van_left_after_juvenile<span class="ot">&lt;-</span>van_left_after_postlarval<span class="sc">-</span>van_total_juvenile_deaths</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>van_total_psm<span class="ot">&lt;-</span><span class="fu">mean</span>(vannamei_dof)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span><span class="fu">mean</span>(vannamei_stage_probabilities[,<span class="dv">4</span>]))</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>mon_total_larval_deaths<span class="ot">&lt;-</span><span class="fu">mean</span>(monodon_dof)<span class="sc">*</span><span class="fu">mean</span>(monodon_stage_prob<span class="sc">$</span>larval)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>mon_left_after_larval<span class="ot">&lt;-</span><span class="fu">mean</span>(monodon_dof)<span class="sc">-</span>mon_total_larval_deaths</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>mon_total_postlarval_deaths<span class="ot">&lt;-</span>mon_left_after_larval<span class="sc">*</span><span class="fu">mean</span>(monodon_stage_prob<span class="sc">$</span>postlarval)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>mon_left_after_postlarval<span class="ot">&lt;-</span>mon_left_after_larval<span class="sc">-</span>mon_total_postlarval_deaths</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>mon_total_juvenile_deaths<span class="ot">&lt;-</span>mon_left_after_postlarval<span class="sc">*</span><span class="fu">mean</span>(monodon_stage_prob<span class="sc">$</span>juvenile.adult)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>mon_left_after_juvenile<span class="ot">&lt;-</span>mon_left_after_postlarval<span class="sc">-</span>mon_total_juvenile_deaths</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>mon_total_psm<span class="ot">&lt;-</span><span class="fu">mean</span>(monodon_dof)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span><span class="fu">mean</span>(monodon_stage_probabilities[,<span class="dv">4</span>]))</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>macro_total_larval_deaths<span class="ot">&lt;-</span><span class="fu">mean</span>(macro_dof)<span class="sc">*</span><span class="fu">mean</span>(macro_stage_prob<span class="sc">$</span>larval)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>macro_left_after_larval<span class="ot">&lt;-</span><span class="fu">mean</span>(macro_dof)<span class="sc">-</span>macro_total_larval_deaths</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>macro_total_postlarval_deaths<span class="ot">&lt;-</span>macro_left_after_larval<span class="sc">*</span><span class="fu">mean</span>(macro_stage_prob<span class="sc">$</span>postlarval)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>macro_left_after_postlarval<span class="ot">&lt;-</span>macro_left_after_larval<span class="sc">-</span>macro_total_postlarval_deaths</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>macro_total_juvenile_deaths<span class="ot">&lt;-</span>macro_left_after_postlarval<span class="sc">*</span><span class="fu">mean</span>(macro_stage_prob<span class="sc">$</span>juvenile.adult)</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>macro_left_after_juvenile<span class="ot">&lt;-</span>macro_left_after_postlarval<span class="sc">-</span>macro_total_juvenile_deaths</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>macro_total_psm<span class="ot">&lt;-</span><span class="fu">mean</span>(macro_dof)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span><span class="fu">mean</span>(macro_stage_probabilities[,<span class="dv">4</span>]))</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="co"># make a data frame of the required data</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>mort_indivs<span class="ot">&lt;-</span><span class="fu">data.frame</span>(</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">species=</span><span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"P. vannamei"</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"P. monodon"</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"Macrobrachium"</span>, <span class="dv">4</span>)),</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">stage=</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Larval"</span>, <span class="st">"Postlarval"</span>, <span class="st">"Juvenile-subadult"</span>, <span class="st">"Cumulative"</span>), <span class="dv">3</span>),</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">mortality_mean=</span><span class="fu">c</span>(</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(vannamei_stage_prob<span class="sc">$</span>larval),</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(vannamei_stage_prob<span class="sc">$</span>postlarval),</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(vannamei_stage_prob<span class="sc">$</span>juvenile.adult),</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">mean</span>(vannamei_stage_probabilities[,<span class="dv">4</span>])),</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(monodon_stage_prob<span class="sc">$</span>larval),</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(monodon_stage_prob<span class="sc">$</span>postlarval),</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(monodon_stage_prob<span class="sc">$</span>juvenile.adult),</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">mean</span>(monodon_stage_probabilities[,<span class="dv">4</span>])),</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(macro_stage_prob<span class="sc">$</span>larval),</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(macro_stage_prob<span class="sc">$</span>postlarval),</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(macro_stage_prob<span class="sc">$</span>juvenile.adult),</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">mean</span>(macro_stage_probabilities[,<span class="dv">4</span>]))</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">mortality_lower=</span><span class="fu">c</span>(</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(vannamei_stage_prob<span class="sc">$</span>larval, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(vannamei_stage_prob<span class="sc">$</span>postlarval, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(vannamei_stage_prob<span class="sc">$</span>juvenile.adult, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">quantile</span>(vannamei_stage_probabilities[,<span class="dv">4</span>], <span class="at">probs=</span><span class="fl">0.975</span>)),</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(monodon_stage_prob<span class="sc">$</span>larval, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(monodon_stage_prob<span class="sc">$</span>postlarval, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(monodon_stage_prob<span class="sc">$</span>juvenile.adult, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">quantile</span>(monodon_stage_probabilities[,<span class="dv">4</span>], <span class="at">probs=</span><span class="fl">0.975</span>)),</span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(macro_stage_prob<span class="sc">$</span>larval, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(macro_stage_prob<span class="sc">$</span>postlarval, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(macro_stage_prob<span class="sc">$</span>juvenile.adult, <span class="at">probs=</span><span class="fl">0.025</span>),</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">quantile</span>(macro_stage_probabilities[,<span class="dv">4</span>], <span class="at">probs=</span><span class="fl">0.975</span>))</span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">mortality_upper=</span><span class="fu">c</span>(</span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(vannamei_stage_prob<span class="sc">$</span>larval, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(vannamei_stage_prob<span class="sc">$</span>postlarval, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(vannamei_stage_prob<span class="sc">$</span>juvenile.adult, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">quantile</span>(vannamei_stage_probabilities[,<span class="dv">4</span>], <span class="at">probs=</span><span class="fl">0.025</span>)),</span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(monodon_stage_prob<span class="sc">$</span>larval, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(monodon_stage_prob<span class="sc">$</span>postlarval, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(monodon_stage_prob<span class="sc">$</span>juvenile.adult, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">quantile</span>(monodon_stage_probabilities[,<span class="dv">4</span>], <span class="at">probs=</span><span class="fl">0.025</span>)),</span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(macro_stage_prob<span class="sc">$</span>larval, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(macro_stage_prob<span class="sc">$</span>postlarval, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">quantile</span>(macro_stage_prob<span class="sc">$</span>juvenile.adult, <span class="at">probs=</span><span class="fl">0.975</span>),</span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="sc">-</span><span class="fu">quantile</span>(macro_stage_probabilities[,<span class="dv">4</span>], <span class="at">probs=</span><span class="fl">0.025</span>))</span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">individuals_mean=</span><span class="fu">c</span>(</span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a>    van_total_larval_deaths,</span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a>    van_total_postlarval_deaths,</span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a>    van_total_juvenile_deaths,</span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a>    van_total_psm,</span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a>    mon_total_larval_deaths,</span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a>    mon_total_postlarval_deaths,</span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a>    mon_total_juvenile_deaths,</span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a>    mon_total_psm,</span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a>    macro_total_larval_deaths,</span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a>    macro_total_postlarval_deaths,</span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a>    macro_total_juvenile_deaths,</span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a>    macro_total_psm</span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a><span class="co"># add brackets to show the 95% credibility intervals</span></span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a>mort_indivs<span class="sc">$</span>Mortality<span class="ot">&lt;-</span><span class="fu">paste0</span>(</span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(mort_indivs<span class="sc">$</span>mortality_mean, <span class="dv">2</span>), <span class="st">" ["</span>, </span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(mort_indivs<span class="sc">$</span>mortality_lower, <span class="dv">2</span>), <span class="st">"; "</span>, </span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(mort_indivs<span class="sc">$</span>mortality_upper, <span class="dv">2</span>), <span class="st">"]"</span>)</span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a>mort_indivis_pivot<span class="ot">&lt;-</span>mort_indivs <span class="sc">%&gt;%</span></span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> species, <span class="at">names_from =</span> stage, <span class="at">values_from =</span> <span class="fu">c</span>(Mortality, individuals_mean))</span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a>transpose_mort_indivis_pivot<span class="ot">&lt;-</span><span class="fu">t</span>(mort_indivis_pivot)</span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a><span class="co"># print the results</span></span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(transpose_mort_indivis_pivot) <span class="sc">%&gt;%</span></span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">full_width=</span>F, <span class="at">position=</span><span class="st">"center"</span>, <span class="at">font_size=</span><span class="dv">9</span>, <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table class="table table-condensed table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">P. vannamei</td>
<td style="text-align: left;">P. monodon</td>
<td style="text-align: left;">Macrobrachium</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mortality_Larval</td>
<td style="text-align: left;">0.16 [0.09; 0.25]</td>
<td style="text-align: left;">0.25 [0.19; 0.31]</td>
<td style="text-align: left;">0.54 [0.38; 0.74]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mortality_Postlarval</td>
<td style="text-align: left;">0.16 [0.09; 0.24]</td>
<td style="text-align: left;">0.25 [0.19; 0.31]</td>
<td style="text-align: left;">0.18 [0.09; 0.34]</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mortality_Juvenile-subadult</td>
<td style="text-align: left;">0.17 [0.04; 0.48]</td>
<td style="text-align: left;">0.43 [0.03; 0.97]</td>
<td style="text-align: left;">0.49 [0.38; 0.62]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mortality_Cumulative</td>
<td style="text-align: left;">0.41 [0.27; 0.65]</td>
<td style="text-align: left;">0.68 [0.44; 0.98]</td>
<td style="text-align: left;">0.81 [0.71; 0.9]</td>
</tr>
<tr class="even">
<td style="text-align: left;">individuals_mean_Larval</td>
<td style="text-align: left;">97014532629</td>
<td style="text-align: left;">13814892071</td>
<td style="text-align: left;">96844873542</td>
</tr>
<tr class="odd">
<td style="text-align: left;">individuals_mean_Postlarval</td>
<td style="text-align: left;">81691380200</td>
<td style="text-align: left;">10489285669</td>
<td style="text-align: left;">15388806842</td>
</tr>
<tr class="even">
<td style="text-align: left;">individuals_mean_Juvenile-subadult</td>
<td style="text-align: left;">76747517895</td>
<td style="text-align: left;">13643028391</td>
<td style="text-align: left;">33677996607</td>
</tr>
<tr class="odd">
<td style="text-align: left;">individuals_mean_Cumulative</td>
<td style="text-align: left;">255431609229</td>
<td style="text-align: left;">37946354695</td>
<td style="text-align: left;">145914976464</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="data-and-method-limitations" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="data-and-method-limitations"><span class="header-section-number">1.6</span> Data and method limitations</h2>
<p>The data underpinning the survival curves does not account for broodstock (shrimp used as breeders). The figures also likely miss some small-scale or illegal farms and may not include “failed crops” with mass mortality due to, for example, diseases. The number of individuals is also sensitive to the inputted individual weight of shrimp, but data is scarce for this metric and slaughter weight likely changes over time and between locations. For a complete description of the limitations of the Monte-Carlo Guesstimate model which underpins our survival curves, see the appendix in <a href="https://doi.org/10.31219/osf.io/b8n3t">Waldhorn and Autric (2023)</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../index.html" class="pagination-link" aria-label="Preface">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preface</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/lit_review.html" class="pagination-link" aria-label="Quantitative literature analysis">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Quantitative literature analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/Hannah-McKay/shrimp-test/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>