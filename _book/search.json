[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Methods for Pre-slaughter mortality of farmed shrimp",
    "section": "",
    "text": "Preface\nThis document is supplemental to our report discussing pre-slaughter mortality in farmed shrimp, which is part of the Rethink Priorities’ Shrimp Welfare Sequence.\nHere, we detail the methods used to estimate the pre-slaughter mortality rate of farmed shrimps—that is, the proportion of shrimps born and/or raised on farms that die prior to intentionally being killed for food. We focus on the three most farmed species, Penaeus vannamei, Penaeus monodon, and Macrobrachium rosenbergii. Often data for the latter included Macrobrachium nipponese, so we group the under them label Macrobrachium. There are three chapters covering:\n\nModeling shrimp pre-slaughter mortality using survival curves\nComparing our estimates to others found in the literature\nComparing our estimates to mortality estimates for other farmed taxa and wild shrimp.\n\nSee the GitHub repository for the data used and the README file for a description of the data.",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html",
    "href": "chapters/survival_curves.html",
    "title": "1  Survival curves model",
    "section": "",
    "text": "1.1 Preparing data\nFor all the .csv files used in this chapter, see the GitHub repository.\nWe downloaded the 5000 samples created by the Guesstimate model for the three taxa for each of:\nNote: the guesstimate model re-samples each time it is opened so the figures you see may differ slightly from those used here.\nTo best sample from the Guesstimate data (especially the tails of the distributions) and to remove errors created by Guesstimate (e.g., negative values), we generated 100,000 synthetic samples for each of these, based off the original 5000 guesstimate samples. To do this, we use the kde1d function, which estimates a kernel density function from the 5000 samples, and the rkde1d function, which generates n (in our case 100,000) samples from the estimated kernel density.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html#preparing-data",
    "href": "chapters/survival_curves.html#preparing-data",
    "title": "1  Survival curves model",
    "section": "",
    "text": "The number of individuals that die on farms annually\nDays lived by life stage, given the shrimp dies in the life stage (e.g., a shrimp that dies in the larval stage lives for an average of two days)\nMortality rates within each life stage, conditional upon having lived to that life stage\n\n\n\n\n1.1.1 Number of shrimp that die on farms annually\nStarting with the number of individuals that die on farms annually, we first load the samples from Guesstimate, then make the 100,000 samples.\n# loading die on farms samples, taken from Guesstimate model\n\nallspecies_dof_samp&lt;-read.csv(\"../data/guesstimate/die_on_farm_samples.csv\", header=TRUE, sep=\",\")\n\nvannamei_dof&lt;-allspecies_dof_samp$vannamei[allspecies_dof_samp$vannamei&gt;0] %&gt;% # Cell GZ in the Guesstimate model\n  # removing negative values created by Guesstimate\n  kde1d(xmin=0) %&gt;% # running kde1d function and ensuring no values below 0 are created\n  rkde1d(100000,.) # creating 100,000 samples from the data\n\n# now we can compare the summary statistics of the old and new data\ngive.summary(allspecies_dof_samp$vannamei, vannamei_dof)%&gt;%\n  add_header_above(c(\"P. vannamei\"=3)) # creating a header that spans the full 3 columns of the table\n# repeat this for other taxa\n\nmonodon_dof&lt;-allspecies_dof_samp$monodon[allspecies_dof_samp$monodon&gt;0] %&gt;% # Cell ES in the Guesstimate model\n  kde1d(xmin=0) %&gt;%\n  rkde1d(100000,.)\ngive.summary(allspecies_dof_samp$monodon, monodon_dof)%&gt;%\n  add_header_above(c(\"P. monodon\"=3))\nmacro_dof&lt;-allspecies_dof_samp$macrobrachium[allspecies_dof_samp$macrobrachium&gt;0] %&gt;% # Cell BZ in the Guesstimate model\n  kde1d(xmin=0) %&gt;%\n  rkde1d(100000,.)\ngive.summary(allspecies_dof_samp$macrobrachium, macro_dof) %&gt;%\n  add_header_above(c(\"Macrobrachium\"=3))\n\n\n\n\n \nP. vannamei\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    3.539500e+11 \n    3.517307e+11 \n  \n  \n    50% \n    5.810000e+11 \n    5.791339e+11 \n  \n  \n    95% \n    9.980500e+11 \n    1.003184e+12 \n  \n  \n    mean \n    6.192688e+11 \n    6.234259e+11 \n  \n  \n    sd \n    4.229737e+11 \n    2.956778e+11 \n  \n  \n    min \n    -1.490000e+13 \n    5.696191e+08 \n  \n  \n    max \n    8.250000e+12 \n    8.060032e+12 \n  \n\n\n\n\n\n\n \nP. monodon\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    29395000000 \n    29124727717 \n  \n  \n    50% \n    52900000000 \n    52723011534 \n  \n  \n    95% \n    93605000000 \n    93893586229 \n  \n  \n    mean \n    56130860000 \n    56014290871 \n  \n  \n    sd \n    20685345595 \n    20640193828 \n  \n  \n    min \n    16000000000 \n    21079491 \n  \n  \n    max \n    216000000000 \n    215982898786 \n  \n\n\n\n\n\n\n \nMacrobrachium\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    9.400000e+10 \n    9.381296e+10 \n  \n  \n    50% \n    1.650000e+11 \n    1.646129e+11 \n  \n  \n    95% \n    3.180000e+11 \n    3.190560e+11 \n  \n  \n    mean \n    1.802238e+11 \n    1.804668e+11 \n  \n  \n    sd \n    8.362092e+10 \n    8.210190e+10 \n  \n  \n    min \n    4.660000e+10 \n    3.012260e+08 \n  \n  \n    max \n    1.620000e+12 \n    1.604432e+12 \n  \n\n\n\n\n\n\nNow we can calculate the proportion of farmed shrimp accounted for by each species for each of our 100,000 samples.\n\nallspecies_dof&lt;-cbind(vannamei_dof, monodon_dof, macro_dof) # combining the 100,000 samples for each species into a data frame\n\nprop_allspecies&lt;-as.data.frame(allspecies_dof) %&gt;% \n  rowwise() %&gt;%\n  mutate(van_prop=vannamei_dof/sum(vannamei_dof, monodon_dof, macro_dof), # calculating each sample as a proportion of the total shrimp, row-wise\n         mon_prop=monodon_dof/sum(vannamei_dof, monodon_dof, macro_dof),\n         macro_prop=macro_dof/sum(vannamei_dof, monodon_dof, macro_dof))\n\nprop_allspecies_dof&lt;-as.data.frame(prop_allspecies[,4:6]) # keeping only the proportions\n\n\n\n1.1.2 Days lived by life stage\nNext we load the data for the number of days lived by a shrimp, given that it dies within a certain life stage. The four life stages are larval, postlarval, juvenile-adult, and (if a shrimp survives all three) the days lived before slaughter, which we call the total farmed days.\n# First load the data\nvannamei_days_samp&lt;-read.csv(\"../data/guesstimate/vannamei_days_lived.csv\", header=TRUE,sep=\",\") # Cells TE, VO, XM, and QV in the Guesstimate model\nmonodon_days_samp&lt;-read.csv(\"../data/guesstimate/monodon_days_lived.csv\", header=TRUE, sep=\",\") # Cells MF, HI, OZ, and LW in the Guesstimate model\nmacrobrachium_days_samp&lt;-read.csv(\"../data/guesstimate/macrobrachium_days_lived.csv\", header=TRUE, sep=\",\") # Cells AS, BJ, EY, and XT in the Guesstimate model\n\n# Next make the 100,000 samples\nvannamei_days_lived&lt;-data.frame(larval=rep(NA, 100000), # create empty data frame\n                                postlarval=rep(NA, 100000),\n                                juvenile.adult=rep(NA, 100000),\n                                total.farmed=rep(NA, 100000))\n\n# fill empty data frame with data simulated from Guesstimate data using kde1d function\nvannamei_days_lived$larval&lt;-vannamei_days_samp$larval %&gt;% \n  kde1d(xmin=0) %&gt;% # shrimp can't live for fewer than 0 days so we limit the distribution\n  rkde1d(100000,.)\nvannamei_days_lived$postlarval&lt;-vannamei_days_samp$postlarval %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\nvannamei_days_lived$juvenile.adult&lt;-vannamei_days_samp$juvenile.adult %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\n\ngive.full.summary(vannamei_days_samp$larval,\n                  vannamei_days_samp$postlarval,\n                  vannamei_days_samp$juvenile.adult,\n                  vannamei_days_lived$larval,\n                  vannamei_days_lived$postlarval,\n                  vannamei_days_lived$juvenile.adult) %&gt;%\n  add_header_above(c(\" \"=1, \"larval\" = 2, \"postlarval\" = 2, \"juvenile-subadult\" = 2)) %&gt;%\n  add_header_above(c(\"P. vannamei\"=7))\n# repeat for other species\nmonodon_days_lived&lt;-data.frame(larval=rep(NA, 100000),\n                               postlarval=rep(NA, 100000),\n                               juvenile.adult=rep(NA, 100000),\n                               total.farmed=rep(NA, 100000))\n\nmonodon_days_lived$larval&lt;-monodon_days_samp$larval %&gt;% \n  kde1d(xmin=0) %&gt;% # shrimp can't live for fewer than 0 days so we limit the distribution\n  rkde1d(100000,.)\nmonodon_days_lived$postlarval&lt;-monodon_days_samp$postlarval %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\nmonodon_days_lived$juvenile.adult&lt;-monodon_days_samp$juvenile.adult %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\n\ngive.full.summary(monodon_days_samp$larval,\n                  monodon_days_samp$postlarval,\n                  monodon_days_samp$juvenile.adult,\n                  monodon_days_lived$larval,\n                  monodon_days_lived$postlarval,\n                  monodon_days_lived$juvenile.adult) %&gt;%\n  add_header_above(c(\" \"=1, \"larval\" = 2, \"postlarval\" = 2, \"juvenile-subadult\" = 2)) %&gt;%\n  add_header_above(c(\"P. monodon\"=7))\nmacro_days_lived&lt;-data.frame(larval=rep(NA, 100000), \n                             postlarval=rep(NA, 100000),\n                             juvenile.adult=rep(NA, 100000),\n                             total.farmed=rep(NA, 100000))\n\nmacro_days_lived$larval&lt;-macrobrachium_days_samp$larval %&gt;% \n  kde1d(xmin=0) %&gt;% # shrimp can't live for fewer than 0 days so we limit the distribution \n  rkde1d(100000,.)\nmacro_days_lived$postlarval&lt;-macrobrachium_days_samp$postlarval %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\nmacro_days_lived$juvenile.adult&lt;-macrobrachium_days_samp$juvenile.adult %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\n\ngive.full.summary(macrobrachium_days_samp$larval,\n                  macrobrachium_days_samp$postlarval,\n                  macrobrachium_days_samp$juvenile.adult,\n                  macro_days_lived$larval,\n                  macro_days_lived$postlarval,\n                  macro_days_lived$juvenile.adult) %&gt;%\n  add_header_above(c(\" \"=1, \"larval\" = 2, \"postlarval\" = 2, \"juvenile-subadult\" = 2)) %&gt;%\n  add_header_above(c(\"Macrobrachium\"=7))\n\n\n\n\n \nP. vannamei\n\n\nlarval\npostlarval\njuvenile-subadult\n\n  \n      \n    original \n    new \n    original \n    new \n    original \n    new \n  \n \n\n  \n    5% \n    0.5023743 \n    0.4902677 \n    11.154996 \n    11.154865 \n    53.13992 \n    54.03571 \n  \n  \n    50% \n    2.1023025 \n    2.1120241 \n    14.918215 \n    14.957922 \n    80.29052 \n    80.32173 \n  \n  \n    95% \n    8.5356682 \n    8.9065270 \n    20.017363 \n    20.061194 \n    106.91953 \n    106.09696 \n  \n  \n    mean \n    3.1018999 \n    3.0744436 \n    15.171321 \n    15.198329 \n    80.38564 \n    80.26579 \n  \n  \n    sd \n    3.2349854 \n    3.1241976 \n    2.734755 \n    2.732966 \n    17.21552 \n    16.85421 \n  \n  \n    min \n    0.1249571 \n    0.0002519 \n    7.741822 \n    7.395876 \n    50.03272 \n    44.74333 \n  \n  \n    max \n    33.8854679 \n    33.7981077 \n    30.754078 \n    31.837442 \n    109.99987 \n    115.53883 \n  \n\n\n\n\n\n\n \nP. monodon\n\n\nlarval\npostlarval\njuvenile-subadult\n\n  \n      \n    original \n    new \n    original \n    new \n    original \n    new \n  \n \n\n  \n    5% \n    0.4963115 \n    0.4996946 \n    11.001184 \n    11.068435 \n    34.93126 \n    35.489895 \n  \n  \n    50% \n    2.2152736 \n    2.1858878 \n    16.571929 \n    16.617385 \n    70.11952 \n    70.076832 \n  \n  \n    95% \n    9.6407133 \n    9.5278613 \n    25.015574 \n    24.962607 \n    136.61865 \n    136.631247 \n  \n  \n    mean \n    3.2634577 \n    3.2441306 \n    17.106562 \n    17.157913 \n    76.12007 \n    76.350636 \n  \n  \n    sd \n    3.6398201 \n    3.4359323 \n    4.356787 \n    4.337294 \n    33.43386 \n    33.148128 \n  \n  \n    min \n    0.0212167 \n    0.0009423 \n    6.723713 \n    5.253515 \n    13.39687 \n    2.849361 \n  \n  \n    max \n    96.7623124 \n    68.5132450 \n    44.915889 \n    46.008715 \n    337.47740 \n    338.425447 \n  \n\n\n\n\n\n\n\n\n \nMacrobrachium\n\n\nlarval\npostlarval\njuvenile-subadult\n\n  \n      \n    original \n    new \n    original \n    new \n    original \n    new \n  \n \n\n  \n    5% \n    1.9786751 \n    1.9602180 \n    29.987507 \n    30.20970 \n    60.63581 \n    61.08796 \n  \n  \n    50% \n    7.6767357 \n    7.6056272 \n    42.342525 \n    42.52669 \n    95.11617 \n    95.69554 \n  \n  \n    95% \n    29.9404670 \n    29.3428149 \n    59.741628 \n    59.89201 \n    149.64495 \n    150.46335 \n  \n  \n    mean \n    10.6956641 \n    10.6289836 \n    43.351758 \n    43.47981 \n    98.96567 \n    99.29394 \n  \n  \n    sd \n    10.5057846 \n    10.1343738 \n    9.262974 \n    9.20008 \n    27.81269 \n    27.65936 \n  \n  \n    min \n    0.4628982 \n    0.0007937 \n    20.471376 \n    17.33767 \n    31.35562 \n    23.32129 \n  \n  \n    max \n    159.2862181 \n    155.5098833 \n    82.711654 \n    85.97558 \n    300.38509 \n    301.48431 \n  \n\n\n\n\n\n\nGuesstimate produced a few large numbers of over one year for the total days farmed, which seems incorrect, so we remove these and restrict to:\n\n215 days for P. vannamei (FAO (2009a) suggests the maximum cycle is 6 months in ongrowing with around a month of development prior to that, 7 months = ~214 days)\n245 days for P. monodon (FAO (2009b) suggests the maximum cycle is &gt;6 months in ongrowing, so we assume ~7 months, with around a month of development prior to that, 8 months = ~244 days)\n335 day for Macrobrachium (New (2010, p.22; p.129) suggests that 11 months is the typical maximum length of a production cycle, 11 months= ~335.5 days)\n\nThe kde1d function will still produce a few samples just above this estimation.\nvannamei_days_lived_total&lt;-vannamei_days_samp$total_farmed_d[vannamei_days_samp$total_farmed_d&lt;215]\nvannamei_days_lived$total.farmed&lt;-vannamei_days_lived_total %&gt;% \n  kde1d() %&gt;% \n  rkde1d(100000,.)\ngive.summary(vannamei_days_lived_total, vannamei_days_lived$total.farmed) %&gt;%\n  add_header_above(c(\"P. vannamei\" = 3))\nmonodon_days_lived_total&lt;-monodon_days_samp$total_farmed_d[monodon_days_samp$total_farmed_d&lt;245]\nmonodon_days_lived$total.farmed&lt;-monodon_days_lived_total %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\ngive.summary(monodon_days_lived_total, monodon_days_lived$total.farmed) %&gt;%\n  add_header_above(c(\"P. monodon\" = 3))\nmacro_days_lived_total&lt;-macrobrachium_days_samp$total_farmed_d[macrobrachium_days_samp$total_farmed_d&lt;335]\nmacro_days_lived$total.farmed&lt;-macro_days_lived_total %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\ngive.summary(macro_days_lived_total, macro_days_lived$total.farmed) %&gt;%\n  add_header_above(c(\"Macrobrachium\" = 3))\n\n\n\n\n \nP. vannamei\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    112.62194 \n    112.85176 \n  \n  \n    50% \n    150.30559 \n    150.24385 \n  \n  \n    95% \n    197.10220 \n    195.97661 \n  \n  \n    mean \n    151.83696 \n    151.71481 \n  \n  \n    sd \n    25.42041 \n    25.13249 \n  \n  \n    min \n    82.55418 \n    70.23521 \n  \n  \n    max \n    214.96775 \n    225.03162 \n  \n\n\n\n\n\n\n \nP. monodon\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    143.34503 \n    143.12522 \n  \n  \n    50% \n    172.88283 \n    173.10137 \n  \n  \n    95% \n    211.21792 \n    210.46603 \n  \n  \n    mean \n    174.34588 \n    174.47863 \n  \n  \n    sd \n    20.53002 \n    20.37596 \n  \n  \n    min \n    112.22230 \n    107.01303 \n  \n  \n    max \n    244.54303 \n    257.60783 \n  \n\n\n\n\n\n\n \nMacrobrachium\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    136.15204 \n    136.34583 \n  \n  \n    50% \n    175.76759 \n    176.33558 \n  \n  \n    95% \n    243.83641 \n    242.91388 \n  \n  \n    mean \n    180.73839 \n    180.95648 \n  \n  \n    sd \n    33.15951 \n    32.80125 \n  \n  \n    min \n    100.31524 \n    94.01438 \n  \n  \n    max \n    334.92005 \n    348.78935 \n  \n\n\n\n\n\n\nWe will need the total farmed days in future chapters so we save them as csv files.\n\nwrite.csv(data.frame(total.farmed=vannamei_days_lived$total.farmed), \n          file=\"../data/survival_curves/vannamei_totalfarmed_days.csv\")\nwrite.csv(data.frame(total.farmed=monodon_days_lived$total.farmed), \n          file=\"../data/survival_curves/monodon_totalfarmed_days.csv\")\nwrite.csv(data.frame(total.farmed=macro_days_lived$total.farmed), \n          file=\"../data/survival_curves/macro_totalfarmed_days.csv\")\n\n\n\n1.1.3 Mortality rates by life stage\nNow we load the data for the mortality rates samples, then make the 100,000 samples.\nvannamei_mort_samp&lt;-read.csv(\"../data/guesstimate/vannamei_mortality_rates.csv\",header=TRUE, sep=\",\") # Cells UY, UJ, and TF in the Guesstimate model\nmonodon_mort_samp&lt;-read.csv(\"../data/guesstimate/monodon_mortality_rates.csv\", header=TRUE, sep=\",\") # Cells ZA, XZ, and YR in the Guesstimate model\nmacrobrachium_mort_samp&lt;-read.csv(\"../data/guesstimate/macrobrachium_mortality_rates.csv\", header=TRUE, sep=\",\") # Cells VG, OX, and QS in the Guesstimate model\n\nvannamei_stage_prob&lt;-data.frame(larval=rep(NA, 100000), # create empty data frame\n                                postlarval=rep(NA, 100000),\n                                juvenile.adult=rep(NA, 100000))\n\n# fill empty data frame with data simulated from Guesstimate data using kde1d function\nvannamei_stage_prob$larval&lt;-vannamei_mort_samp$larval %&gt;% \n  kde1d(xmin = 0,\n        xmax = 1) %&gt;% # Probabilities cannot be less than 0 or more than 1 so we add these as xmin and xmax\n  rkde1d(100000,.)\nvannamei_stage_prob$postlarval&lt;-vannamei_mort_samp$postlarval %&gt;% \n  kde1d(xmin = 0,\n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\nvannamei_stage_prob$juvenile.adult&lt;-vannamei_mort_samp$juvenile.adult[vannamei_mort_samp$juvenile.adult&lt;1] %&gt;% \n  kde1d(xmin = 0, # The juvenile-adult samples from Guesstimate sampled some instances over 1 so we get rid of these first, or else the xmin and xmax functions won't work\n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\ngive.full.summary(vannamei_mort_samp$larval,\n                  vannamei_mort_samp$postlarval,\n                  vannamei_mort_samp$juvenile.adult[vannamei_mort_samp$juvenile.adult&lt;1],\n                  vannamei_stage_prob$larval,\n                  vannamei_stage_prob$postlarval,\n                  vannamei_stage_prob$juvenile.adult) %&gt;%\n  add_header_above(c(\" \"=1, \"larval\" = 2, \"postlarval\" = 2, \"juvenile-subadult\" = 2)) %&gt;%\n  add_header_above(c(\"P. vannamei\"=7))\n# repeat for other taxa\nmonodon_stage_prob&lt;-data.frame(larval=rep(NA, 100000),\n                               postlarval=rep(NA, 100000),\n                               juvenile.adult=rep(NA, 100000))\nmonodon_stage_prob$larval&lt;-monodon_mort_samp$larval %&gt;% \n  kde1d(xmin = 0, \n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\nmonodon_stage_prob$postlarval&lt;-monodon_mort_samp$postlarval %&gt;% \n  kde1d(xmin = 0,\n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\nmonodon_stage_prob$juvenile.adult&lt;-monodon_mort_samp$juvenile.adult %&gt;% \n  kde1d(xmin = 0,\n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\ngive.full.summary(monodon_mort_samp$larval,\n                  monodon_mort_samp$postlarval,\n                  monodon_mort_samp$juvenile.adult,\n                  monodon_stage_prob$larval,\n                  monodon_stage_prob$postlarval,\n                  monodon_stage_prob$juvenile.adult) %&gt;%\n  add_header_above(c(\" \"=1, \"larval\" = 2, \"postlarval\" = 2, \"juvenile-subadult\" = 2)) %&gt;%\n  add_header_above(c(\"P. monodon\"=7))\nmacro_stage_prob&lt;-data.frame(larval=rep(NA, 100000),\n                             postlarval=rep(NA, 100000),\n                             juvenile.adult=rep(NA, 100000))\nmacro_stage_prob$larval&lt;-macrobrachium_mort_samp$larval %&gt;% \n  kde1d( xmin = 0,\n         xmax = 1) %&gt;%\n  rkde1d(100000,.)\nmacro_stage_prob$postlarval&lt;-macrobrachium_mort_samp$postlarval %&gt;% \n  kde1d(xmin = 0,\n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\nmacro_stage_prob$juvenile.adult&lt;-macrobrachium_mort_samp$juvenile.adult %&gt;% \n  kde1d(xmin = 0,\n        xmax = 1) %&gt;%\n  rkde1d(100000,.)\ngive.full.summary(macrobrachium_mort_samp$larval,\n                  macrobrachium_mort_samp$postlarval,\n                  macrobrachium_mort_samp$juvenile.adult,\n                  macro_stage_prob$larval,\n                  macro_stage_prob$postlarval,\n                  macro_stage_prob$juvenile.adult) %&gt;%\n  add_header_above(c(\" \"=1, \"larval\" = 2, \"postlarval\" = 2, \"juvenile-subadult\" = 2)) %&gt;%\n  add_header_above(c(\"Macrobrachium\"=7))\n\n\n\n\n \nP. vannamei\n\n\nlarval\npostlarval\njuvenile-subadult\n\n  \n      \n    original \n    new \n    original \n    new \n    original \n    new \n  \n \n\n  \n    5% \n    0.0996531 \n    0.0972387 \n    0.1001447 \n    0.0999791 \n    0.0508207 \n    0.0506593 \n  \n  \n    50% \n    0.1500220 \n    0.1496121 \n    0.1504374 \n    0.1507727 \n    0.1420997 \n    0.1439536 \n  \n  \n    95% \n    0.2266631 \n    0.2282536 \n    0.2224142 \n    0.2237825 \n    0.3944276 \n    0.3936253 \n  \n  \n    mean \n    0.1547854 \n    0.1556152 \n    0.1545581 \n    0.1551854 \n    0.1719317 \n    0.1725749 \n  \n  \n    sd \n    0.0392371 \n    0.0526141 \n    0.0383756 \n    0.0416042 \n    0.1161365 \n    0.1155133 \n  \n  \n    min \n    0.0696998 \n    0.0000104 \n    0.0578250 \n    0.0012256 \n    0.0179568 \n    0.0000372 \n  \n  \n    max \n    0.3435277 \n    0.9980489 \n    0.3702702 \n    0.9978175 \n    0.9591167 \n    0.9985386 \n  \n\n\n\n\n\n\n \nP. monodon\n\n\nlarval\npostlarval\njuvenile-subadult\n\n  \n      \n    original \n    new \n    original \n    new \n    original \n    new \n  \n \n\n  \n    5% \n    0.2001242 \n    0.1997098 \n    0.1995617 \n    0.1989895 \n    0.2104763 \n    0.0639917 \n  \n  \n    50% \n    0.2449577 \n    0.2449867 \n    0.2447093 \n    0.2453887 \n    0.2991240 \n    0.3483152 \n  \n  \n    95% \n    0.2997172 \n    0.2995932 \n    0.2994525 \n    0.3017630 \n    0.3896331 \n    0.9384648 \n  \n  \n    mean \n    0.2466252 \n    0.2466316 \n    0.2467749 \n    0.2485648 \n    0.2998994 \n    0.4302422 \n  \n  \n    sd \n    0.0301440 \n    0.0351535 \n    0.0306094 \n    0.0465916 \n    0.0573127 \n    0.2615026 \n  \n  \n    min \n    0.1525521 \n    0.0000248 \n    0.1552940 \n    0.0002576 \n    0.2000194 \n    0.0000026 \n  \n  \n    max \n    0.3766730 \n    0.9934958 \n    0.3703696 \n    0.9999699 \n    0.3999908 \n    0.9999854 \n  \n\n\n\n\n\n\n\n\n \nMacrobrachium\n\n\nlarval\npostlarval\njuvenile-subadult\n\n  \n      \n    original \n    new \n    original \n    new \n    original \n    new \n  \n \n\n  \n    5% \n    0.4006129 \n    0.3996983 \n    0.1008623 \n    0.1006506 \n    0.3992222 \n    0.3987035 \n  \n  \n    50% \n    0.5273712 \n    0.5285526 \n    0.1724686 \n    0.1729053 \n    0.4911646 \n    0.4906385 \n  \n  \n    95% \n    0.6972928 \n    0.7002748 \n    0.3006805 \n    0.3030567 \n    0.5980952 \n    0.5996646 \n  \n  \n    mean \n    0.5365256 \n    0.5366353 \n    0.1832576 \n    0.1840283 \n    0.4936169 \n    0.4935724 \n  \n  \n    sd \n    0.0919400 \n    0.0932098 \n    0.0629856 \n    0.0668443 \n    0.0604250 \n    0.0653766 \n  \n  \n    min \n    0.2764604 \n    0.0028506 \n    0.0508418 \n    0.0001643 \n    0.3071373 \n    0.0001255 \n  \n  \n    max \n    0.9617491 \n    0.9555300 \n    0.5317322 \n    0.9961765 \n    0.7339364 \n    0.9953234 \n  \n\n\n\n\n\n\nWe will need these stage probabilities in future chapters, so we save them as .csv files.\n\nvan.stages&lt;-vannamei_stage_prob\nmon.stages&lt;-monodon_stage_prob\nmacro.stages&lt;-macro_stage_prob\n\nvan.stages$species&lt;-rep(\"vannamei\")\nmon.stages$species&lt;-rep(\"monodon\")\nmacro.stages$species&lt;-rep(\"macrobrachium\")\n\nshrimp_prob.stages&lt;-rbind(van.stages, mon.stages, macro.stages)\n\nwrite.csv(shrimp_prob.stages, file=\"../data/survival_curves/bystage_farmed_shrimp_model_probs.csv\")\n\nRight now we have the probability that a shrimp dies in each stage, conditional on the shrimp having survived previous stages. However, we want the cumulative probability of a shrimp dying at each life stage—for example, the probability of dying in the postlarval stage is \\(1-p(dying\\ in\\ larval\\ stage)*p(dying\\ in\\ postlarval\\ stage)\\).\nWe also calculate the probability of a shrimp surviving to slaughter age, which means it has survived all of the larval, postlarval, and juvenile-adult stages.\n\n# create four new columns with the total probability they make it to each stage \nvannamei_stage_prob_total&lt;-vannamei_stage_prob %&gt;% \n  rowwise() %&gt;%\n  mutate(larval.total=larval, postlarval.total=(1-larval)*postlarval,\n         juvenile.adult.total=(1-larval)*(1-postlarval)*juvenile.adult,\n         slaughter.age=(1-larval)*(1-postlarval)*(1-juvenile.adult))\nvannamei_stage_prob_total&lt;-as.data.frame(vannamei_stage_prob_total[,4:7]) # keep only the totals\n\n# repeat for other species\nmonodon_stage_prob_total&lt;-monodon_stage_prob %&gt;% \n  rowwise() %&gt;%\n  mutate(larval.total=larval, postlarval.total=(1-larval)*postlarval,\n         juvenile.adult.total=(1-larval)*(1-postlarval)*juvenile.adult,\n         slaughter.age=(1-larval)*(1-postlarval)*(1-juvenile.adult))\nmonodon_stage_prob_total&lt;-as.data.frame(monodon_stage_prob_total[,4:7]) \n\nmacro_stage_prob_total&lt;-macro_stage_prob %&gt;% \n  rowwise() %&gt;%\n  mutate(larval.total=larval, postlarval.total=(1-larval)*postlarval,\n         juvenile.adult.total=(1-larval)*(1-postlarval)*juvenile.adult,\n         slaughter.age=(1-larval)*(1-postlarval)*(1-juvenile.adult))\nmacro_stage_prob_total&lt;-as.data.frame(macro_stage_prob_total[,4:7]) \n\nWe will need the probability that a shrimp makes it to slaughter age in future chapters, so we save .csv files of that data here.\n\nvan.slaught&lt;-data.frame(slaughter.age=vannamei_stage_prob_total$slaughter.age,\n                       species=rep(\"vannamei\"))\nmon.slaught&lt;-data.frame(slaughter.age=monodon_stage_prob_total$slaughter.age,\n                       species=rep(\"monodon\"))\nmacro.slaught&lt;-data.frame(slaughter.age=macro_stage_prob_total$slaughter.age,\n                       species=rep(\"macrobrachium\"))\n\nwrite.csv(van.slaught, file=\"../data/survival_curves/vannamei_model_slaughter_probs.csv\")\nwrite.csv(mon.slaught, file=\"../data/survival_curves/monodon_model_slaughter_probs.csv\")\nwrite.csv(macro.slaught, file=\"../data/survival_curves/macro_model_slaughter_probs.csv\")",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html#calculating-pre-slaughter-mortality-rates",
    "href": "chapters/survival_curves.html#calculating-pre-slaughter-mortality-rates",
    "title": "1  Survival curves model",
    "section": "1.2 Calculating pre-slaughter mortality rates",
    "text": "1.2 Calculating pre-slaughter mortality rates\nNow we can calculate the pre-slaughter mortality rate across the production cycle. This will form the survival curves model.\nTo get a weighted average mortality rate we need to weight the life stage rates by the probability a shrimp is from a given species. We start by creating vector of species chosen according to probabilities from proportions calculated above (see Section 1.1.1).\n\npsm_species_chosen = vapply(\n  1:100000,\n  function(i) {sample.int(3, size=1, prob=prop_allspecies_dof[i, ])},\n  integer(1))\n\n# Check that the proportions look correct\nprint(data.frame(vannamei.prop=length(psm_species_chosen[psm_species_chosen==1])/length(psm_species_chosen),\n                 monodon.prop=length(psm_species_chosen[psm_species_chosen==2])/length(psm_species_chosen),\n                 macro.prop=length(psm_species_chosen[psm_species_chosen==3])/length(psm_species_chosen)))\n\n  vannamei.prop monodon.prop macro.prop\n1       0.71295      0.07009    0.21696\n\n\nNow, we make a data frame of 100,000 stage probabilities, weighted by the proportion of farmed shrimp that comes from each species.\n\npsm_stage_probabilities = matrix(NA, nrow=100000, ncol=4)\nfor (i in 1:100000){\n  if (psm_species_chosen[i] == 1){\n    psm_stage_probabilities[i, ] = as.matrix(vannamei_stage_prob_total[i,])\n  }\n  if (psm_species_chosen[i] == 2){\n    psm_stage_probabilities[i, ] = as.matrix(monodon_stage_prob_total[i,])\n  }\n  if (psm_species_chosen[i] == 3){\n    psm_stage_probabilities[i, ] = as.matrix(macro_stage_prob_total[i,])\n  }\n}\nhead(psm_stage_probabilities)\n\n          [,1]       [,2]       [,3]      [,4]\n[1,] 0.2397400 0.18531724 0.12371699 0.4512258\n[2,] 0.1203589 0.10773300 0.08474946 0.6871587\n[3,] 0.1533023 0.16083359 0.12652428 0.5593398\n[4,] 0.1441758 0.10392355 0.07251141 0.6793893\n[5,] 0.2165459 0.08968865 0.43641968 0.2573458\n[6,] 0.6248090 0.03477258 0.16410685 0.1763116\n\n\nNow we can calculate the weighted days lived for each life stage of each species.\n\npsm_overall_proportion_days_lived = rep(NA, 100000)\n\nfor (i in 1:100000){\n  psm_stage_chosen &lt;- sample.int(4, size=1, prob=psm_stage_probabilities[i, ])\n  # P. vannamei\n  if (psm_species_chosen[i] == 1){\n    if (psm_stage_chosen == 1){\n      psm_overall_proportion_days_lived[i] = vannamei_days_lived$larval[i] \n    }\n    if (psm_stage_chosen == 2){\n      psm_overall_proportion_days_lived[i] = vannamei_days_lived$postlarval[i] \n    }\n    if (psm_stage_chosen == 3){\n      psm_overall_proportion_days_lived[i] = vannamei_days_lived$juvenile.adult[i] \n    }\n    if (psm_stage_chosen == 4){\n      psm_overall_proportion_days_lived[i] = vannamei_days_lived$total.farmed[i] \n    }\n  }\n  # P. monodon\n  if (psm_species_chosen[i] == 2){\n    if (psm_stage_chosen == 1){\n      psm_overall_proportion_days_lived[i] = monodon_days_lived$larval[i]\n    }\n    if (psm_stage_chosen == 2){\n      psm_overall_proportion_days_lived[i] = monodon_days_lived$postlarval[i]\n    }\n    if (psm_stage_chosen == 3){\n      psm_overall_proportion_days_lived[i] = monodon_days_lived$juvenile.adult[i]\n    }\n    if (psm_stage_chosen == 4){\n      psm_overall_proportion_days_lived[i] = monodon_days_lived$total.farmed[i]\n    }\n  }\n  # Macrobrachium\n  if(psm_species_chosen[i]==3){\n    if (psm_stage_chosen == 1){\n      psm_overall_proportion_days_lived[i] = macro_days_lived$larval[i]\n    }\n    if (psm_stage_chosen == 2){\n      psm_overall_proportion_days_lived[i] = macro_days_lived$postlarval[i]\n    }\n    if (psm_stage_chosen == 3){\n      psm_overall_proportion_days_lived[i] = macro_days_lived$juvenile.adult[i]\n    }\n    if (psm_stage_chosen == 4){\n      psm_overall_proportion_days_lived[i] = macro_days_lived$total.farmed[i]\n    }\n  }\n}\n\n# Clean up the output by making it a data frame and labeling variables\n\ndf_all&lt;-as.data.frame(psm_overall_proportion_days_lived)\ndf_all$species&lt;-rep(\"all\", 100000)\ncolnames(df_all)&lt;-c(\"value\", \"species\")\n\nThe above gives us a vector of 100,000 samples which equate to the days lived by the weighted average farmed shrimp.\nWe now need to repeat the method, without weighting, for each species so that we can compare mortality across species.\n\n\nP. vannamei\nvannamei_stage_probabilities&lt;-as.matrix(vannamei_stage_prob_total)\n\nvannamei_overall_proportion_days_lived = rep(NA, 100000)\nfor (i in 1:100000){\n  vannamei_stage_chosen &lt;- sample.int(4, size=1, prob=vannamei_stage_probabilities[i, ])\n    if (vannamei_stage_chosen == 1){\n      vannamei_overall_proportion_days_lived[i] = vannamei_days_lived$larval[i]\n    }\n    if (vannamei_stage_chosen == 2){\n      vannamei_overall_proportion_days_lived[i] = vannamei_days_lived$postlarval[i]\n    }\n    if (vannamei_stage_chosen == 3){\n      vannamei_overall_proportion_days_lived[i] = vannamei_days_lived$juvenile.adult[i]\n    }\n    if (vannamei_stage_chosen == 4){\n      vannamei_overall_proportion_days_lived[i] = vannamei_days_lived$total.farmed[i] \n    }\n  }\n\n# Cleaning the output\ndf_vannamei&lt;-as.data.frame(vannamei_overall_proportion_days_lived)\ndf_vannamei$species&lt;-rep(\"vannamei\", 100000)\ncolnames(df_vannamei)&lt;-c(\"value\", \"species\")\n\n\n\n\nP. monodon\nmonodon_stage_probabilities&lt;-as.matrix(monodon_stage_prob_total)\n\nmonodon_overall_proportion_days_lived = rep(NA, 100000)\nfor (i in 1:100000){\n  monodon_stage_chosen &lt;- sample.int(4, size=1, prob=monodon_stage_probabilities[i, ])\n  if (monodon_stage_chosen == 1){\n    monodon_overall_proportion_days_lived[i] = monodon_days_lived$larval[i]\n  }\n  if (monodon_stage_chosen == 2){\n    monodon_overall_proportion_days_lived[i] = monodon_days_lived$postlarval[i]\n  }\n  if (monodon_stage_chosen == 3){\n    monodon_overall_proportion_days_lived[i] = monodon_days_lived$juvenile.adult[i]\n  }\n  if (monodon_stage_chosen == 4){\n    monodon_overall_proportion_days_lived[i] = monodon_days_lived$total.farmed[i]\n  }\n}\n\ndf_monodon&lt;-as.data.frame(monodon_overall_proportion_days_lived)\ndf_monodon$species&lt;-rep(\"monodon\", 100000)\ncolnames(df_monodon)&lt;-c(\"value\", \"species\")\n\n\n\n\nMacrobrachium\nmacro_stage_probabilities&lt;-macro_stage_prob_total\n\nmacro_overall_proportion_days_lived = rep(NA, 100000)\nfor (i in 1:100000){\n  macro_stage_chosen &lt;- sample.int(4, size=1, prob=macro_stage_probabilities[i, ])\n  if (macro_stage_chosen == 1){\n    macro_overall_proportion_days_lived[i] = macro_days_lived$larval[i]\n  }\n  if (macro_stage_chosen == 2){\n    macro_overall_proportion_days_lived[i] = macro_days_lived$postlarval[i]\n  }\n  if (macro_stage_chosen == 3){\n    macro_overall_proportion_days_lived[i] = macro_days_lived$juvenile.adult[i]\n  }\n  if (macro_stage_chosen == 4){\n    macro_overall_proportion_days_lived[i] = macro_days_lived$total.farmed[i]\n  }\n}\n\ndf_macro&lt;-as.data.frame(macro_overall_proportion_days_lived)\ndf_macro$species&lt;-rep(\"Macrobrachium\", 100000)\ncolnames(df_macro)&lt;-c(\"value\", \"species\")\n\n\nWith all three taxa calculated, we now combine this with the weighted average into one data frame.\n\ndf_spec&lt;-rbind(df_vannamei, df_monodon, df_macro, df_all)\ndf_spec$species&lt;-factor(df_spec$species, levels=c(\n  \"vannamei\", \"monodon\", \"Macrobrachium\", \"all\"))",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html#fitting-and-plotting-survival-curves",
    "href": "chapters/survival_curves.html#fitting-and-plotting-survival-curves",
    "title": "1  Survival curves model",
    "section": "1.3 Fitting and plotting survival curves",
    "text": "1.3 Fitting and plotting survival curves\nTo fit the survival curves, we use the survfit2 function from the ggsurvfit package and the Surv function from the package survival. The survival curves are made using Kaplan-Meier estimation.\n\nplot_datatest&lt;-survfit2(Surv(\n  df_spec$value, event = rep(1, length(df_spec$value))) ~ species, data = df_spec) %&gt;%\n  tidy_survfit()\n\nFinally, we plot the results.\n\nsurvival_curves&lt;-ggplot(data=plot_datatest[!plot_datatest$strata==\"all\",], \n                         aes(x=time, y=estimate*100, color=strata)) +\n  geom_line()+\n  labs(x=\"Age (days)\", y=\"Survival probability (%)\") +\n  scale_x_continuous(#limits=c(0,300),\n                     expand = c(0, 0)) + \n  scale_y_continuous(expand = c(0, 0)) +\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(5, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        axis.text=element_text(size=10),\n        axis.title.y=element_text(size=10, face=\"bold\"),\n        axis.title.x=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,1,1,1), \"mm\"))  +\n  coord_cartesian(ylim=c(0,100), clip=\"off\") +\n # theme(plot.margin = unit(c(l=2,r=2,b=.2,t=.2), \"lines\")) +\n  geom_bracket(data=NULL, inherit.aes=FALSE,\n               xmin=quantile(vannamei_days_lived$total.farmed, probs=0.025),\n              xmax=quantile(vannamei_days_lived$total.farmed, probs=0.975),\n              y.position=62, label=\"Slaughter\", tip.length=0.03,\n              color=\"#E69F00\", size=.7) +\n  geom_bracket(data=NULL, inherit.aes=FALSE,\n               xmin=quantile(monodon_days_lived$total.farmed, probs=0.025),\n              xmax=quantile(monodon_days_lived$total.farmed, probs=0.975),\n              y.position=36.5, label=\"Slaughter\", tip.length=0.03,\n              color=\"#56B4E9\", size=.7) +\n  geom_bracket(data=NULL, inherit.aes=FALSE,\n               xmin=quantile(macro_days_lived$total.farmed, probs=0.025),\n              xmax=quantile(macro_days_lived$total.farmed, probs=0.975),\n              y.position=25, label=\"Slaughter\", tip.length=0.03,\n              color=\"#009E73\", size=.7) +\n  # we plot the weighted average with a separate geom so that it plots over the brackets\n  geom_line(data=plot_datatest[plot_datatest$strata==\"all\",], \n            aes(x=time, y=estimate*100, color=strata), show.legend=TRUE) +\n  scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\",\"#009E73\", \"#000000\"),\n                     labels=c(expression(italic(\"P. vannamei\")),\n                              expression(italic(\"P. monodon\")),\n                              expression(italic(\"Macrobrachium\")),\n                              \"All, weighted average\"\n                              ))\n\n# plotting each species separately as well\np1&lt;-ggplot(data=plot_datatest[plot_datatest$strata==\"vannamei\",],\n                         aes(x=time, y=estimate*100, color=strata)) +\n  geom_line(color=\"#E69F00\") +\n  labs(y=\"\") +\n  scale_x_continuous(limits=c(0,350),\n                     expand = c(0, 0)) +\n  scale_y_continuous(expand = c(0, 0)) +\n  theme(legend.position=\"none\", plot.margin=unit(c(b=0.5,t=0.5,r=0.5, l=0), \"lines\"),\n        axis.title.x=element_blank()) +\n  #scale_color_manual(values=c(\"#E69F00\",\"#56B4E9\",\"#009E73\")) +\n  geom_vline(xintercept=10, linetype=\"dashed\", colour=\"#E69F00\") + # cell NX in the Guesstimate model\n  geom_vline(xintercept=22, linetype=\"dashed\", colour=\"#E69F00\") # cell DA in the Guesstimate model\n\np2&lt;-ggplot(data=plot_datatest[plot_datatest$strata==\"monodon\",],\n                         aes(x=time, y=estimate*100)) +\n  geom_line(color=\"#56B4E9\")+\n  labs(y=\"\")+\n  scale_x_continuous(limits=c(0,350),\n                     expand = c(0, 0)) +\n  scale_y_continuous(expand = c(0, 0)) +\n  theme(legend.position=\"none\",\n        plot.margin=unit(c(b=0.5,t=0.5,r=0.5, l=0), \"lines\"),\n        axis.title.x=element_blank()) +\n  geom_vline(xintercept=10, linetype=\"dashed\", colour=\"#56B4E9\") + # cell LQ in the Guesstimate model\n  geom_vline(xintercept=27, linetype=\"dashed\", colour=\"#56B4E9\") # cell HJ in the Guesstimate model\n\np3&lt;-ggplot(data=plot_datatest[plot_datatest$strata==\"Macrobrachium\",],\n                         aes(x=time, y=estimate*100)) +\n  geom_line(color=\"#009E73\")+\n  labs(x=\"Age (days)\", y=\"\") +\n  scale_x_continuous(limits=c(0,350),\n                     expand = c(0, 0)) +\n  scale_y_continuous(expand = c(0, 0)) +\n  theme(legend.position=\"none\",\n        plot.margin=unit(c(b=0.5,t=0.5,r=0.5, l=0), \"lines\"),\n        axis.title.y=element_blank()) +\n  geom_vline(xintercept=29, linetype=\"dashed\", colour=\"#009E73\") + # cell OD in the Guesstimate model\n  geom_vline(xintercept=63, linetype=\"dashed\", colour=\"#009E73\") # cell TK in the Guesstimate model\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFigure 1.1\n\n\n\nWe also extract the average probability of making it to slaughter age for each species:\n\nmean(vannamei_stage_probabilities[,4])\n\n[1] 0.5902775\n\nmean(monodon_stage_probabilities[,4])\n\n[1] 0.3225594\n\nmean(macro_stage_probabilities[,4])\n\n[1] 0.1914582",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html#comparing-to-slaughter-statistics",
    "href": "chapters/survival_curves.html#comparing-to-slaughter-statistics",
    "title": "1  Survival curves model",
    "section": "1.4 Comparing to slaughter statistics",
    "text": "1.4 Comparing to slaughter statistics\nWe next compare the slaughter figures to the number that died on farms (including pre-slaughter mortality) in the same year.\nslaughter&lt;-read.csv(\"../data/guesstimate/slaughtered_samples.csv\")\n\nvannamei_slaught&lt;-slaughter$vannamei %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\ngive.summary(slaughter$vannamei, vannamei_slaught) %&gt;%\n  add_header_above(c(\"P. vannamei\" = 3))\nmonodon_slaught&lt;-slaughter$monodon %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\ngive.summary(slaughter$monodon, monodon_slaught) %&gt;%\n  add_header_above(c(\"P. monodon\" = 3))\nmacro_slaught&lt;-slaughter$macrobrchium %&gt;% \n  kde1d() %&gt;%\n  rkde1d(100000,.)\ngive.summary(slaughter$macrobrchium, macro_slaught) %&gt;%\n  add_header_above(c(\"Macrobrachium\" = 3))\nallspecies_slaught&lt;-cbind(vannamei_slaught, monodon_slaught, macro_slaught) # combining the 100,000 samples for each species into a data frame\n\nslaught_prop_allspecies&lt;-as.data.frame(allspecies_slaught) %&gt;% \n  rowwise() %&gt;%\n  mutate(van_prop=vannamei_slaught/sum(vannamei_slaught, monodon_slaught, macro_slaught), # calculating each sample as a proportion of the total shrimp, row-wise\n         mon_prop=monodon_slaught/sum(vannamei_slaught, monodon_slaught, macro_slaught),\n         macro_prop=macro_slaught/sum(vannamei_slaught, monodon_slaught, macro_slaught))\n\n\n\n\n \nP. vannamei\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    220957800000 \n    222476066766 \n  \n  \n    50% \n    342228500000 \n    343470146341 \n  \n  \n    95% \n    529217650000 \n    532874614636 \n  \n  \n    mean \n    354766329600 \n    356150888840 \n  \n  \n    sd \n    96851040159 \n    96858142911 \n  \n  \n    min \n    144325000000 \n    104518134351 \n  \n  \n    max \n    952712000000 \n    987182924790 \n  \n\n\n\n\n\n\n \nP. monodon\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    11860315356 \n    11923173880 \n  \n  \n    50% \n    20858815142 \n    20984152771 \n  \n  \n    95% \n    36622412461 \n    36434870776 \n  \n  \n    mean \n    22092898841 \n    22176970451 \n  \n  \n    sd \n    7815695540 \n    7784774999 \n  \n  \n    min \n    5996479921 \n    4618419389 \n  \n  \n    max \n    71459992373 \n    73715081829 \n  \n\n\n\n\n\n\n \nMacrobrachium\n  \n      \n    original \n    new \n  \n \n\n  \n    5% \n    20277647900 \n    20563786382 \n  \n  \n    50% \n    31033290274 \n    31051657941 \n  \n  \n    95% \n    46842577016 \n    46844762225 \n  \n  \n    mean \n    31986343208 \n    32058892477 \n  \n  \n    sd \n    8291128218 \n    8209105772 \n  \n  \n    min \n    10376290701 \n    10599353581 \n  \n  \n    max \n    86753502536 \n    87744803041 \n  \n\n\n\n\n\n\nNow we can compare the proportion of farmed shrimp from each species that are slaughtered annually and that die on farms annually.\n# make all the data of interest into a data frame\ncomp_slaught_dof&lt;-data.frame(Species=rep(c(\"vannamei\", \"monodon\", \"macrobrachium\"), 2), \n                             Type=c(\n                               rep(\"Slaughtered\", 3),\n                               rep(\"Die on farms (including pre-slaughter mortality)\", 3)),\n                             Proportion=c(\n                               mean(slaught_prop_allspecies$van_prop),\n                               mean(slaught_prop_allspecies$mon_prop),\n                               mean(slaught_prop_allspecies$macro_prop), \n                               mean(prop_allspecies_dof$van_prop),\n                               mean(prop_allspecies_dof$mon_prop),\n                               mean(prop_allspecies_dof$macro_prop)),\n                             Lower=c(\n                               quantile(slaught_prop_allspecies$van_prop, probs=0.025),\n                               quantile(slaught_prop_allspecies$mon_prop, probs=0.025),\n                               quantile(slaught_prop_allspecies$macro_prop, probs=0.025),\n                               quantile(prop_allspecies_dof$van_prop, probs=0.025),\n                               quantile(prop_allspecies_dof$mon_prop, probs=0.025),\n                               quantile(prop_allspecies_dof$macro_prop, probs=0.025)),\n                             Upper=c(\n                               quantile(slaught_prop_allspecies$van_prop, probs=0.975),\n                               quantile(slaught_prop_allspecies$mon_prop, probs=0.975),\n                               quantile(slaught_prop_allspecies$macro_prop, probs=0.975),\n                               quantile(prop_allspecies_dof$van_prop, probs=0.975),\n                               quantile(prop_allspecies_dof$mon_prop, probs=0.975),\n                               quantile(prop_allspecies_dof$macro_prop, probs=0.975)))\n\n# plot the results as individual bars\nggplot(comp_slaught_dof, aes(y=Type, x=Proportion, fill=Species)) +\n  geom_bar(stat=\"identity\", position=\"dodge\") +\n  geom_errorbar(aes(xmin=Lower, xmax=Upper), position=position_dodge(width=.9), width=.7) +\n  scale_fill_manual(values=c(\"#009E73\",\"#56B4E9\",  \"#E69F00\"), \n                    labels=c(\n                      expression(italic(\"Macrobrachium\")),\n                      expression(italic(\"P. monodon\")),\n                      expression(italic(\"P. vannamei\")))) +\n  scale_x_continuous(expand=c(0,0), limits=c(0,1)) +\n  scale_y_discrete(labels=c(\"Died on farms\\n(including\\npre-slaughter\\nmortality)\", \"Slaughtered\")) +\n  theme(legend.text = element_text(hjust=0)) +\n  ylab(\"\") +\n  xlab(\"Proportion\") \n# plot as stacked bars\nggplot(comp_slaught_dof, aes(y=Type, x=Proportion, group=Species, fill=Species)) +\n  geom_bar(stat=\"identity\", position=\"stack\") +\n  geom_text(aes(label=round(Proportion, 2)),stat=\"identity\",position=position_stack(vjust=.5), color=\"black\", size=3.7) +\n  scale_fill_manual(values=c(\"#009E73\",\"#56B4E9\",  \"#E69F00\"), \n                    labels=c(expression(italic(\"Macrobrachium\")), expression(italic(\"P. monodon\")), expression(italic(\"P. vannamei\")))) +\n  scale_x_continuous(expand=c(0,0), limits=c(0,1)) +\n  scale_y_discrete(labels=c(\"Died on farms\\n(slaughter and\\npre-slaughter)\", \"Slaughtered\")) +\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(5, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        axis.text=element_text(size=10),\n        axis.title.y=element_text(size=10, face=\"bold\"),\n        axis.title.x=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,4,1,1), \"mm\")) +\n  ylab(\"\") +\n  xlab(\"Mean proportion\")",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html#stage-specific-rates-and-numbers-of-individuals",
    "href": "chapters/survival_curves.html#stage-specific-rates-and-numbers-of-individuals",
    "title": "1  Survival curves model",
    "section": "1.5 Stage specific rates and numbers of individuals",
    "text": "1.5 Stage specific rates and numbers of individuals\nFinally, we extract the mean and 95% credibility intervals for mortality rate at each life stage (including cumulative mortality rate) and number of individuals who die on farms at each stage (and in total).\n\n# calculate individual deaths for each life stage of each species\nvan_total_larval_deaths&lt;-mean(vannamei_dof)*mean(vannamei_stage_prob$larval)\nvan_left_after_larval&lt;-mean(vannamei_dof)-van_total_larval_deaths\nvan_total_postlarval_deaths&lt;-van_left_after_larval*mean(vannamei_stage_prob$postlarval)\nvan_left_after_postlarval&lt;-van_left_after_larval-van_total_postlarval_deaths\nvan_total_juvenile_deaths&lt;-van_left_after_postlarval*mean(vannamei_stage_prob$juvenile.adult)\nvan_left_after_juvenile&lt;-van_left_after_postlarval-van_total_juvenile_deaths\nvan_total_psm&lt;-mean(vannamei_dof)*(1-mean(vannamei_stage_probabilities[,4]))\n\nmon_total_larval_deaths&lt;-mean(monodon_dof)*mean(monodon_stage_prob$larval)\nmon_left_after_larval&lt;-mean(monodon_dof)-mon_total_larval_deaths\nmon_total_postlarval_deaths&lt;-mon_left_after_larval*mean(monodon_stage_prob$postlarval)\nmon_left_after_postlarval&lt;-mon_left_after_larval-mon_total_postlarval_deaths\nmon_total_juvenile_deaths&lt;-mon_left_after_postlarval*mean(monodon_stage_prob$juvenile.adult)\nmon_left_after_juvenile&lt;-mon_left_after_postlarval-mon_total_juvenile_deaths\nmon_total_psm&lt;-mean(monodon_dof)*(1-mean(monodon_stage_probabilities[,4]))\n\nmacro_total_larval_deaths&lt;-mean(macro_dof)*mean(macro_stage_prob$larval)\nmacro_left_after_larval&lt;-mean(macro_dof)-macro_total_larval_deaths\nmacro_total_postlarval_deaths&lt;-macro_left_after_larval*mean(macro_stage_prob$postlarval)\nmacro_left_after_postlarval&lt;-macro_left_after_larval-macro_total_postlarval_deaths\nmacro_total_juvenile_deaths&lt;-macro_left_after_postlarval*mean(macro_stage_prob$juvenile.adult)\nmacro_left_after_juvenile&lt;-macro_left_after_postlarval-macro_total_juvenile_deaths\nmacro_total_psm&lt;-mean(macro_dof)*(1-mean(macro_stage_probabilities[,4]))\n\n# make a data frame of the required data\nmort_indivs&lt;-data.frame(\n  species=c(rep(\"P. vannamei\", 4), rep(\"P. monodon\", 4), rep(\"Macrobrachium\", 4)),\n  stage=rep(c(\"Larval\", \"Postlarval\", \"Juvenile-subadult\", \"Cumulative\"), 3),\n  mortality_mean=c(\n    mean(vannamei_stage_prob$larval),\n    mean(vannamei_stage_prob$postlarval),\n    mean(vannamei_stage_prob$juvenile.adult),\n    (1-mean(vannamei_stage_probabilities[,4])),\n    mean(monodon_stage_prob$larval),\n    mean(monodon_stage_prob$postlarval),\n    mean(monodon_stage_prob$juvenile.adult),\n    (1-mean(monodon_stage_probabilities[,4])),\n    mean(macro_stage_prob$larval),\n    mean(macro_stage_prob$postlarval),\n    mean(macro_stage_prob$juvenile.adult),\n    (1-mean(macro_stage_probabilities[,4]))\n  ),\n  mortality_lower=c(\n    quantile(vannamei_stage_prob$larval, probs=0.025),\n    quantile(vannamei_stage_prob$postlarval, probs=0.025),\n    quantile(vannamei_stage_prob$juvenile.adult, probs=0.025),\n    (1-quantile(vannamei_stage_probabilities[,4], probs=0.975)),\n    quantile(monodon_stage_prob$larval, probs=0.025),\n    quantile(monodon_stage_prob$postlarval, probs=0.025),\n    quantile(monodon_stage_prob$juvenile.adult, probs=0.025),\n    (1-quantile(monodon_stage_probabilities[,4], probs=0.975)),\n    quantile(macro_stage_prob$larval, probs=0.025),\n    quantile(macro_stage_prob$postlarval, probs=0.025),\n    quantile(macro_stage_prob$juvenile.adult, probs=0.025),\n    (1-quantile(macro_stage_probabilities[,4], probs=0.975))\n  ),\n  mortality_upper=c(\n    quantile(vannamei_stage_prob$larval, probs=0.975),\n    quantile(vannamei_stage_prob$postlarval, probs=0.975),\n    quantile(vannamei_stage_prob$juvenile.adult, probs=0.975),\n    (1-quantile(vannamei_stage_probabilities[,4], probs=0.025)),\n    quantile(monodon_stage_prob$larval, probs=0.975),\n    quantile(monodon_stage_prob$postlarval, probs=0.975),\n    quantile(monodon_stage_prob$juvenile.adult, probs=0.975),\n    (1-quantile(monodon_stage_probabilities[,4], probs=0.025)),\n    quantile(macro_stage_prob$larval, probs=0.975),\n    quantile(macro_stage_prob$postlarval, probs=0.975),\n    quantile(macro_stage_prob$juvenile.adult, probs=0.975),\n    (1-quantile(macro_stage_probabilities[,4], probs=0.025))\n  ),\n  individuals_mean=c(\n    van_total_larval_deaths,\n    van_total_postlarval_deaths,\n    van_total_juvenile_deaths,\n    van_total_psm,\n    mon_total_larval_deaths,\n    mon_total_postlarval_deaths,\n    mon_total_juvenile_deaths,\n    mon_total_psm,\n    macro_total_larval_deaths,\n    macro_total_postlarval_deaths,\n    macro_total_juvenile_deaths,\n    macro_total_psm\n    )\n)\n\n# add brackets to show the 95% credibility intervals\nmort_indivs$Mortality&lt;-paste0(\n  round(mort_indivs$mortality_mean, 2), \" [\", \n  round(mort_indivs$mortality_lower, 2), \"; \", \n  round(mort_indivs$mortality_upper, 2), \"]\")\n\nmort_indivis_pivot&lt;-mort_indivs %&gt;%\n  pivot_wider(id_cols = species, names_from = stage, values_from = c(Mortality, individuals_mean))\n\ntranspose_mort_indivis_pivot&lt;-t(mort_indivis_pivot)\n\n# print the results\nkbl(transpose_mort_indivis_pivot) %&gt;%\n  kable_styling(full_width=F, position=\"center\", font_size=9, bootstrap_options = c(\"condensed\"))\n\n\n\n\n\nspecies\nP. vannamei\nP. monodon\nMacrobrachium\n\n\nMortality_Larval\n0.16 [0.09; 0.25]\n0.25 [0.19; 0.31]\n0.54 [0.38; 0.74]\n\n\nMortality_Postlarval\n0.16 [0.09; 0.24]\n0.25 [0.19; 0.31]\n0.18 [0.09; 0.34]\n\n\nMortality_Juvenile-subadult\n0.17 [0.04; 0.48]\n0.43 [0.03; 0.97]\n0.49 [0.38; 0.62]\n\n\nMortality_Cumulative\n0.41 [0.27; 0.65]\n0.68 [0.44; 0.98]\n0.81 [0.71; 0.9]\n\n\nindividuals_mean_Larval\n97014532629\n13814892071\n96844873542\n\n\nindividuals_mean_Postlarval\n81691380200\n10489285669\n15388806842\n\n\nindividuals_mean_Juvenile-subadult\n76747517895\n13643028391\n33677996607\n\n\nindividuals_mean_Cumulative\n255431609229\n37946354695\n145914976464",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/survival_curves.html#data-and-method-limitations",
    "href": "chapters/survival_curves.html#data-and-method-limitations",
    "title": "1  Survival curves model",
    "section": "1.6 Data and method limitations",
    "text": "1.6 Data and method limitations\nThe data underpinning the survival curves does not account for broodstock (shrimp used as breeders). The figures also likely miss some small-scale or illegal farms and may not include “failed crops” with mass mortality due to, for example, diseases. The number of individuals is also sensitive to the inputted individual weight of shrimp, but data is scarce for this metric and slaughter weight likely changes over time and between locations. For a complete description of the limitations of the Monte-Carlo Guesstimate model which underpins our survival curves, see the appendix in Waldhorn and Autric (2023).",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Survival curves model</span>"
    ]
  },
  {
    "objectID": "chapters/lit_review.html",
    "href": "chapters/lit_review.html",
    "title": "2  Quantitative literature analysis",
    "section": "",
    "text": "2.1 Studies\nMost sources provide ranges, but do not indicate how much of the total variability the ranges are intended to capture. In such cases, we assume that the ranges intend to capture what is typical, rather than true ranges. Consequently, we interpret the mid-point of the range as the mean and the half-length as one standard deviation. The exception was when the authors made it clear that they included atypical outcomes, in which case we treat the range as covering two standard deviations.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Quantitative literature analysis</span>"
    ]
  },
  {
    "objectID": "chapters/lit_review.html#studies",
    "href": "chapters/lit_review.html#studies",
    "title": "2  Quantitative literature analysis",
    "section": "",
    "text": "2.1.1 FAO, 2009\nOn super-intensive systems, FAO (2009) reports that ongrowing ponds have a survival rate of 55-91 percent.\nWe treated the survival rate range as two standard deviations given how large it is.\n\nFAO_mortality_mean&lt;-mean(c(1-.55, 1-.91)) # midpoint mortality rate\nFAO_mortality_sd&lt;- ((1-.55)- FAO_mortality_mean)/2 # length between midpoint and either end is *two* sds \n\nFAO&lt;-data.frame(\nReference = c(\"FAO, 2009\"),\nMean_Mortality = c(FAO_mortality_mean),\nSD_Mortality = c(FAO_mortality_sd),\nStage = c(\"Juvenile-subadult\"),\nProduction_Type = c(\"Super-Intensive\"),\nSpecies = c(\"P. vannamei\"),\nCountry = c(\"Not Specified\"))\n\nshow.table(FAO)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    FAO, 2009 \n    0.27 \n    0.09 \n    Juvenile-subadult \n    Super-Intensive \n    P. vannamei \n    Not Specified \n  \n\n\n\n\n\n\n\n2.1.2 Gonzalez, 2019\nGonzalez (2019) reports:\n“In Texas, the 2017 survival rates of stocked shrimps ranged from 4 to 68 percent. On average, farmers see survival rates of 56 percent, data from TPWD show.”\nThis presumably covers all species farmed in Texas, though it is unclear. Because the mean is so much closer than the high end of the range the low end, we assume 4 percent survival is an outlier. We assume that the upper end of the range is three standard deviations above the mean.\n\nGonzalez_sd&lt;- (.68-.56)/3\n\nGonzalez&lt;-data.frame(\nReference = c(\"Gonzalez, 2019\"),\nMean_Mortality = c(1-.56),\nSD_Mortality = c(Gonzalez_sd),\nStage = c(\"Juvenile-subadult\"),\nProduction_Type = c(\"All\"),\nSpecies = c(\"All\"),\nCountry = c(\"Not Specified\"))\n\nshow.table(Gonzalez)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Gonzalez, 2019 \n    0.44 \n    0.04 \n    Juvenile-subadult \n    All \n    All \n    Not Specified \n  \n\n\n\n\n\n\n\n2.1.3 Fast, 1992\nOn page 346, Fast (1992) reports that the survival rate on ongrowing farms differs by production style. Survival on extensive farms is “&lt;60”%, “60 to 80” on semi-intensive farms, “80-90” on intensive farms, and “80-90”on super-intensive farms. In the absence of better information, we treated “&lt;60%” as a mean of 40%, with a standard deviation of 10%.\n\nFast_semiintensive_mean&lt;- mean(c(1-.60, 1-.80))\nFast_semiintensive_sd&lt;- (1-.60) - Fast_semiintensive_mean\nFast_intensive_mean&lt;- mean(c(1-.80, 1-.90))\nFast_intensive_sd&lt;- (1-.80) - Fast_intensive_mean\nFast_superintensive_mean&lt;- mean(c(1-.80, 1-.90))\nFast_superintensive_sd&lt;- (1-.80) - Fast_superintensive_mean\n\nFast&lt;-data.frame(\nReference = c(\"Fast, 1992\",\"Fast, 1992\",\"Fast, 1992\",\"Fast, 1992\"),\nMean_Mortality = c((1-.40),Fast_semiintensive_mean, Fast_intensive_mean, Fast_superintensive_mean),\nSD_Mortality = c(.10, Fast_semiintensive_sd, Fast_intensive_sd, Fast_superintensive_sd),\nStage = c(\"Juvenile-subadult\", \"Juvenile-subadult\",\"Juvenile-subadult\",\"Juvenile-subadult\"),\nProduction_Type = c(\"Extensive\", \"Semi-Intensive\", \"Intensive\", \"Super-Intensive\"),\nSpecies = c(\"Penaeids\", \"Penaeids\",\"Penaeids\",\"Penaeids\"),\nCountry = c(\"Not Specified\",\"Not Specified\",\"Not Specified\",\"Not Specified\"))\n\nshow.table(Fast)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Fast, 1992 \n    0.60 \n    0.10 \n    Juvenile-subadult \n    Extensive \n    Penaeids \n    Not Specified \n  \n  \n    Fast, 1992 \n    0.30 \n    0.10 \n    Juvenile-subadult \n    Semi-Intensive \n    Penaeids \n    Not Specified \n  \n  \n    Fast, 1992 \n    0.15 \n    0.05 \n    Juvenile-subadult \n    Intensive \n    Penaeids \n    Not Specified \n  \n  \n    Fast, 1992 \n    0.15 \n    0.05 \n    Juvenile-subadult \n    Super-Intensive \n    Penaeids \n    Not Specified \n  \n\n\n\n\n\n\n\n2.1.4 Kongkeo, 2005\nIn an overview of P. monodon aquaculture, Kongkeo (2005) writes:\n“Nauplii are usually stocked at 100 000/tonne and cultured up to late mysis or early PL with approximately 70-80 percent survival rate. They are then transferred to a new tank and cultured up to PL 12-15; a further 70-80 percent survival rate is achieved in this stage.”\n\nKongkeo_larval_mean&lt;- mean(c(1-.70, 1-.80))\nKongkeo_larval_sd&lt;- (1.-.70) - Kongkeo_larval_mean\nKongkeo_postlarval_mean&lt;- mean(c(1-.70, 1-.80))\nKongkeo_postlarval_sd&lt;- (1.-.70) - Kongkeo_larval_mean\n\nKongkeo&lt;-data.frame(\nReference = c(\"Kongkeo, 2005\",\"Kongkeo,2005\"),\nMean_Mortality = c(Kongkeo_larval_mean,Kongkeo_postlarval_mean),\nSD_Mortality = c(.05,.05),\nStage = c(\"Larval\", \"Postlarval\"),\nProduction_Type = c(\"All\", \"All\"),\nSpecies = c(\"P. monodon\", \"P. monodon\"),\nCountry = c(\"Not Specified\", \"Not specified\"))\n\nshow.table(Kongkeo)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Kongkeo, 2005 \n    0.25 \n    0.05 \n    Larval \n    All \n    P. monodon \n    Not Specified \n  \n  \n    Kongkeo,2005 \n    0.25 \n    0.05 \n    Postlarval \n    All \n    P. monodon \n    Not specified \n  \n\n\n\n\n\n\n\n2.1.5 Kona Bay\nTo our knowledge, Kona Bay only produces P. vannamei broodstock. They have three breeds, one focused on growth, another on survival, and another one that is balanced between the two. Here, we take performance data from the “balance” production line, which claims a 70% survival rate to the postlarval stage and a 75%-85% survival rate from the postlarval stage to slaughter. We apply the standard deviation of the latter to the former, as zero variability in larval mortality is implausible.\n\nKona_pl_mean&lt;- mean(c(1-.75,1-.85))\nKona_pl_sd&lt;- (1-.75)- Kona_pl_mean\n\nKona&lt;-data.frame(\nReference = c(\"Kona Bay\",\"Kona Bay\"),\nMean_Mortality = c((1-.70),Kona_pl_mean),\nSD_Mortality = c(Kona_pl_sd,Kona_pl_sd),\nStage = c(\"Larval\", \"Postlarval, Juvenile-subadult\"),\nProduction_Type = c(\"All\", \"All\"),\nSpecies = c(\"P. vannamei\", \"P. vannamei\"),\nCountry = c(\"Not Specified\",\"Not specified\"))\n\noverall_mortality_kona&lt;- 1-((1-sample_beta(Kona[1,\"Mean_Mortality\"],Kona[1,\"SD_Mortality\"]))*                        (1-sample_beta(Kona[2,\"Mean_Mortality\"],Kona[2,\"SD_Mortality\"])))\n\noverall_kona&lt;-data.frame(\nReference = c(\"Kona Bay\"),\nMean_Mortality = c(mean(overall_mortality_kona)),\nSD_Mortality = c(sd(overall_mortality_kona)),\nStage = c(\"All\"),\nProduction_Type = c(\"All\"),\nSpecies = c(\"P. vannamei\"),\nCountry = c(\"Not Specified\"))\n\nKona&lt;-rbind(Kona, overall_kona)\nshow.table(Kona)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Kona Bay \n    0.3000000 \n    0.0500000 \n    Larval \n    All \n    P. vannamei \n    Not Specified \n  \n  \n    Kona Bay \n    0.2000000 \n    0.0500000 \n    Postlarval, Juvenile-subadult \n    All \n    P. vannamei \n    Not specified \n  \n  \n    Kona Bay \n    0.4400035 \n    0.0534816 \n    All \n    All \n    P. vannamei \n    Not Specified \n  \n\n\n\n\n\n\n\n2.1.6 American Penaeid\nAmerican Penaeid uses P. vannamei broodstock only. Its stated survival rate is 75-80%, which we confirmed via a phone call represents the postlarval stage onwards (i.e., it doesn’t include the larval stage). The operator we spoke with couldn’t confirm what exactly the range reported represented, but we interpret it as what is typical given that she said it was based on 10 years of experience.\n\nAP_mean&lt;- mean(c(1-.75, 1-.80))\nAP_sd&lt;- (1.-.75) - AP_mean\n\nAP&lt;-data.frame(\nReference = c(\"American Penaeid\"),\nMean_Mortality = c(AP_mean),\nSD_Mortality = c(AP_sd),\nStage = c(\"Postlarval, Juvenile-subadult\"),\nProduction_Type = c(\"Intensive and Super-Intensive\"),\nSpecies = c(\"P. vannamei\"),\nCountry = c(\"Not Specified\"))\n\nshow.table(AP)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    American Penaeid \n    0.225 \n    0.025 \n    Postlarval, Juvenile-subadult \n    Intensive and Super-Intensive \n    P. vannamei \n    Not Specified \n  \n\n\n\n\n\n\n\n2.1.7 Boyd et al., 2017\nBoyd et al. (2017) conducted a survey that “included 34 farms for whiteleg shrimp, Litopenaeus vannamei, and five farms for black tiger shrimp, Penaeus monodon, in Thailand and 28 farms for whiteleg shrimp and 24 farms for black tiger shrimp in Vietnam” (p. 203). All production types were sampled (except super-intensive facilities, which are thought to be rare in Vietnam and Thailand): “The interview teams…selected possible farms in proportion to the percentage of extensive, semi-intensive, and intensive shrimp culture thought to occur in each country” (p. 203).\nThe survival rates are reported below (note that they quantify variability using standard errors rather than standard deviations):\nP. vannamei: “Farmers reported average survival of shrimp from stocking to harvest of 73.9% (1.7%) in Thailand and 70.8% (4.4%) in Vietnam” (p. 209).\nPage 214 (on P. monodon): “The survival of shrimp from stocking to harvest varied from less than 10% to nearly 100% with an average of 58.4% (6.1%)”\nThe authors discuss postlarvae, so we interpret the mortality rates to apply from the PL stage onwards, and to exclude larvae.\n\n#convert SEs to SDs using the sample sizes\nvannamei_thailand_sd&lt;- .017*sqrt(34)\nvannamei_vietnam_sd&lt;- .044*sqrt(28)\nmonodon_sd&lt;- .061*sqrt((24)) \n\nBoyd&lt;-data.frame(\nReference = c(\"Boyd et al., 2017\",\"Boyd et al., 2017\",\"Boyd et al., 2017\"),\nMean_Mortality = c((1-.739),(1-.708),(1-.584)),\nSD_Mortality = c((vannamei_thailand_sd),(vannamei_vietnam_sd),(monodon_sd)),\nStage = c(\"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult\"),\nProduction_Type = c(\"Extensive, Semi-Intensive, and Intensive\",\"Extensive, Semi-Intensive, and Intensive\",\"Semi-Intensive and Intensive\"),\nSpecies = c(\"P. vannamei\", \"P. vannamei\", \"P. monodon\"),\nCountry = c(\"Thailand\", \"Vietnam\", \"Vietnam\"))\n\nshow.table(Boyd)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Boyd et al., 2017 \n    0.261 \n    0.0991262 \n    Postlarval, Juvenile-subadult \n    Extensive, Semi-Intensive, and Intensive \n    P. vannamei \n    Thailand \n  \n  \n    Boyd et al., 2017 \n    0.292 \n    0.2328261 \n    Postlarval, Juvenile-subadult \n    Extensive, Semi-Intensive, and Intensive \n    P. vannamei \n    Vietnam \n  \n  \n    Boyd et al., 2017 \n    0.416 \n    0.2988377 \n    Postlarval, Juvenile-subadult \n    Semi-Intensive and Intensive \n    P. monodon \n    Vietnam \n  \n\n\n\n\n\n\n\n2.1.8 Boyd et al., 2018\nBoyd et al. (2018) surveyed 89 P. vannamei and 11 P. monodon farms in India.\nThey report that “in this study, values ranged from nil at two farms to 100% at another L. vannamei farm—the average was 75.8 ± 1.57%. Survival of P. monodon ranged from 10 to 80% (\\(\\bar{X}\\) = 41.4 ± 5.9%)” (p. 558).\nAs this report is an extension of Boyd et al. (2017), we assume the reported figures are means and standard errors.\n\nvannamei_india_sd&lt;- .0157*sqrt(89)\nmonodon_india_sd&lt;- .059*sqrt((11)) \n\nBoyd2018&lt;-data.frame(\nReference = c(\"Boyd et al., 2018\",\"Boyd et al., 2018\"),\nMean_Mortality = c((1-.758),(1-.414)),\nSD_Mortality = c((vannamei_india_sd),(monodon_india_sd)),\nStage = c(\"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult\"),\nProduction_Type = c(\"Extensive, Semi-Intensive, and Intensive\",\"Extensive, Semi-Intensive, and Intensive\"),\nSpecies = c(\"P. vannamei\",  \"P. monodon\"),\nCountry = c(\"India\", \"India\"))\n\nshow.table(Boyd2018)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Boyd et al., 2018 \n    0.242 \n    0.1481135 \n    Postlarval, Juvenile-subadult \n    Extensive, Semi-Intensive, and Intensive \n    P. vannamei \n    India \n  \n  \n    Boyd et al., 2018 \n    0.586 \n    0.1956809 \n    Postlarval, Juvenile-subadult \n    Extensive, Semi-Intensive, and Intensive \n    P. monodon \n    India \n  \n\n\n\n\n\n\n\n2.1.9 Thakur et al., 2018\nIn Table 2 of Thakur et al. (2018), the authors report that from stocking to harvest survival rates at intensive P. vannamei farms in Vietnam average 73.83% with a standard deviation of 19.29%.\n\nThakur&lt;-data.frame(\nReference = c(\"Thakur et al., 2018\"),\nMean_Mortality = 1-.7383,\nSD_Mortality = .1929,\nStage = c(\"Postlarval, Juvenile-subadult\"),\nProduction_Type = c(\"Intensive\"),\nSpecies = c(\"P. vannamei\"),\nCountry = c(\"Vietnam\"))\n\nshow.table(Thakur)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Thakur et al., 2018 \n    0.2617 \n    0.1929 \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Vietnam \n  \n\n\n\n\n\n\n\n2.1.10 Mandro et al., 2021\nIn their Package of Aquaculture Practices, the department of fisheries of the government of Kerala (Mandro et al., 2021) details expected survival of P. monodon and M. rosenbergii at different life stages.\nFo P. monodon they report:\n\n“In general, the survival rate during the larval rearing is 40-50%” (p. 195)\n“The survival rate from larva to PL is 65-75%” (p. 196)\n“Total production of 1.4-1.9 t/ha can be expected per crop with a survival rate of about 80%.” (p. 205)\n\nFor the latter we assume the same standard deviation as that of the larva–postlarva period. We infer the overall survival rate by sampling from the rates at each stage.\nFor M. rosenbergii they report:\n\nPostlarva “attains 16-21 mm size by next 15 days with a survival rate of 70-80%” (p. 223)\n\nThey did not report a survival rate for after the postlarval stage for M. rosenbergii.\n\nMandro_larval_monodon_mean&lt;-mean(c(1-.40, 1-.50)) #midpoint mortality rate\nMandro_larval_monodon_sd&lt;- (1-.40) - Mandro_larval_monodon_mean # length between midpoint and either end is *one* sd \n\nMandro_postlarval_monodon_mean&lt;-mean(c(1-.65, 1-.75))\nMandro_postlarval_monodon_sd&lt;- (1-.65) - Mandro_postlarval_monodon_mean\n\nMandro_postlarval_macrobrachium_mean&lt;-mean(c(1-.70, 1-.80))\nMandro_postlarval_macrobrachium_sd&lt;- (1-.70) - Mandro_postlarval_macrobrachium_mean\n  \nMandro_adult_monodon_mean&lt;- .80\nMandro_adult_monodon_sd&lt;- Mandro_postlarval_monodon_sd\n  \nMandro&lt;-data.frame(\nReference = c(\"Mandro et al., 2021\", \"Mandro et al., 2021\", \"Mandro et al., 2021\", \"Mandro et al., 2021\"),\nMean_Mortality = c(Mandro_larval_monodon_mean, Mandro_postlarval_monodon_mean, Mandro_postlarval_macrobrachium_mean, Mandro_adult_monodon_mean),\nSD_Mortality = c(Mandro_larval_monodon_sd, Mandro_postlarval_monodon_sd, Mandro_postlarval_macrobrachium_sd, Mandro_adult_monodon_sd),\nStage = c(\"Larval\",\"Postlarval\",\"Postlarval\",\n          \"Juvenile-subadult\"),\nProduction_Type = c(\"All\", \"All\", \"All\", \"All\"),\nSpecies = c(\"P. monodon\", \"P. monodon\",  \"M. rosenbergii\",\n            \"P. monodon\"),\nCountry = c(\"Not Specified\",\"Not Specified\",\"Not Specified\", \"Not Specified\"))\n\noverall_mortality_monodon&lt;- 1-((1-sample_beta(Mandro[1,\"Mean_Mortality\"],Mandro[1,\"SD_Mortality\"]))*                        (1-sample_beta(Mandro[2,\"Mean_Mortality\"],Mandro[2,\"SD_Mortality\"]))* \n(1-sample_beta(Mandro[4,\"Mean_Mortality\"],Mandro[4,\"SD_Mortality\"]))) \n\noverall_mon&lt;-data.frame(\nReference = c(\"Mandro et al., 2021\"),\nMean_Mortality = c(mean(overall_mortality_monodon)),\nSD_Mortality = c(sd(overall_mortality_monodon)),\nStage = c(\"All\"),\nProduction_Type = c(\"All\"),\nSpecies = c(\"P. monodon\"),\nCountry = c(\"Not Specified\"))\n\n\nMandro&lt;-rbind(Mandro, overall_mon)\nshow.table(Mandro)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Mandro et al., 2021 \n    0.5500000 \n    0.0500000 \n    Larval \n    All \n    P. monodon \n    Not Specified \n  \n  \n    Mandro et al., 2021 \n    0.3000000 \n    0.0500000 \n    Postlarval \n    All \n    P. monodon \n    Not Specified \n  \n  \n    Mandro et al., 2021 \n    0.2500000 \n    0.0500000 \n    Postlarval \n    All \n    M. rosenbergii \n    Not Specified \n  \n  \n    Mandro et al., 2021 \n    0.8000000 \n    0.0500000 \n    Juvenile-subadult \n    All \n    P. monodon \n    Not Specified \n  \n  \n    Mandro et al., 2021 \n    0.9369562 \n    0.0181689 \n    All \n    All \n    P. monodon \n    Not Specified \n  \n\n\n\n\n\n\n\n2.1.11 New, 2002\nIn a manual for farming M. rosenbergii, New (2002, p.70) reports for survival from larva to postlarva that “40-60% is more normal in practice”.\n\nNew_larval_mean&lt;-mean(c(1-.40, 1-.60)) \nNew_larval_sd&lt;- (1-.40) - New_larval_mean\n\nNew&lt;-data.frame(\nReference = c(\"New, 2002\"),\nMean_Mortality = c(New_larval_mean),\nSD_Mortality = c(New_larval_sd),\nStage = c(\"Larval\"),\nProduction_Type = c(\"All\"),\nSpecies = c(\"M. rosenbergii\"),\nCountry = c(\"Not specified\"))\n\nshow.table(New)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    New, 2002 \n    0.5 \n    0.1 \n    Larval \n    All \n    M. rosenbergii \n    Not specified \n  \n\n\n\n\n\n\n\n2.1.12 KSU, 2002\nThe Kentucky State University Aquaculture Program report that survival of M. rosenbergii in Kentucky varies between 60% and 80% (p. 28). Earlier in the manual (p. 5) they report “The hatchery and nursery procedures required to grow 30- to 60-day-old freshwater shrimp juveniles for pond stocking are complex”, so we assume they are referring to the juvenile stage and categorize this as “Juvenile-subadult.”\n\nKSU_mean&lt;- mean(c(1-.60, 1-.80))\nKSU_sd&lt;- (1.-.60) - KSU_mean\n\nKSU&lt;-data.frame(\nReference = c(\"KSU, 2002\"),\nMean_Mortality = c(KSU_mean),\nSD_Mortality = c(KSU_sd),\nStage = c(\"Juvenile-subadult\"),\nProduction_Type = c(\"All\"),\nSpecies = c(\"M. rosenbergii\"),\nCountry = c(\"USA\"))\n\nshow.table(KSU)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    KSU, 2002 \n    0.3 \n    0.1 \n    Juvenile-subadult \n    All \n    M. rosenbergii \n    USA \n  \n\n\n\n\n\n\n\n2.1.13 GK Aqua, 2023\nIn an interview in the magazine Aquaculture Asia Pacific, the founder of an M. rosenbergii hatchery, GK Aqua, said “Overall, our average survival rates gradually reached 30% which is an industry standard”. In the prior sentence the author writes “The breakthrough was in 2020 [when it achieved mass production, stocking 150 larvae/L and […] consistently obtaining 50-60% survival rates”. We therefore assume survival rates are between 30% and 60%. As they are a hatchery, we assume these rates apply to the larval stage.\n\nGKAqua_mean&lt;- mean(c(1-.30, 1-.60))\nGKAqua_sd&lt;- (1.-.30) - GKAqua_mean\n\nGKAqua&lt;-data.frame(\nReference = c(\"GK Aqua, 2023\"),\nMean_Mortality = c(GKAqua_mean),\nSD_Mortality = c(GKAqua_sd),\nStage = c(\"Larval\"),\nProduction_Type = c(\"All\"),\nSpecies = c(\"M. rosenbergii\"),\nCountry = c(\"Malaysia\"))\n\nshow.table(GKAqua)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    GK Aqua, 2023 \n    0.55 \n    0.15 \n    Larval \n    All \n    M. rosenbergii \n    Malaysia \n  \n\n\n\n\n\n\n\n2.1.14 Shrimp Welfare Project, 2022\nShrimp Welfare Project conducted field visits in Vietnam. They report survival rates from different production styles in Vietnam, based on “obtained through interviews with farmers, researchers and other stakeholders” (p. 21). A personal correspondence confirms that the rates are from the ongrowing stage, and thus covers onwards from the postlarval stage. Table 3 (p.21) reports average survival rates of 5% (extensive), 60% (semi-intensive), 80% (intensive), and 85% (super-intensive). On page 28, the authors add ranges:\n“Among the farms that we visited, including those whose water quality data were and were not collected, the reported survival rates varied among different farming models:\nIntensive & super-intensive: between 75% and 90% Semi-intensive: between 60% and 70% Extensive: between 0.5% and 5%” These could be interpreted as true ranges, although some of them imply distributions that are at odds with the averages reported on page 21. Our interpretation of the discrepancy is that the averages also included the estimates of researchers and “other stakeholders,” whereas the ranges come from farmers only. As a compromise solution, we rely on the ranges provided by farmers only, but treat them as covering two standard deviations around the mean only.\n\nSWP_extensive_mean&lt;- mean(c(1-.005,1-.05))\nSWP_extensive_sd&lt;- (1-.005) - SWP_extensive_mean\n\nSWP_semiintensive_mean&lt;- mean(c(1-.60,1-.70))\nSWP_semiintensive_sd&lt;-(1-.60) - SWP_semiintensive_mean\n\nSWP_intensive_mean&lt;- mean(c(1-.75,1-.90))\nSWP_intensive_sd&lt;-  (1-.75) -  SWP_intensive_mean\n  \nSWP_superintensive_mean&lt;- mean(c(1-.75,1-.90))\nSWP_superintensive_sd&lt;-  (1-.75) -  SWP_superintensive_mean\n  \nSWP&lt;-data.frame(\nReference = c(\"SWP, 2022\",\"SWP, 2022\",\"SWP, 2022\", \"SWP, 2022\"),\nMean_Mortality = c(SWP_extensive_mean,SWP_semiintensive_mean,SWP_intensive_mean,SWP_superintensive_mean),\nSD_Mortality = c(SWP_extensive_sd,SWP_semiintensive_sd,SWP_intensive_sd,SWP_superintensive_sd),\nStage = c(\"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult\",\"Postlarval, Juvenile-subadult\"),\nProduction_Type = c(\"Extensive\",\"Semi-Intensive\",\"Intensive\", \"Super-Intensive\"),\nSpecies = c(\"P. monodon\", \"P. monodon\", \"P. vannamei\", \"P. vannamei\"), #The table says \"mostly monodon\" and \"mostly vannamei\", so these designations are simplifications.\nCountry = c(\"Vietnam\", \"Vietnam\", \"Vietnam\", \"Vietnam\"))\n\nshow.table(SWP)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    SWP, 2022 \n    0.9725 \n    0.0225 \n    Postlarval, Juvenile-subadult \n    Extensive \n    P. monodon \n    Vietnam \n  \n  \n    SWP, 2022 \n    0.3500 \n    0.0500 \n    Postlarval, Juvenile-subadult \n    Semi-Intensive \n    P. monodon \n    Vietnam \n  \n  \n    SWP, 2022 \n    0.1750 \n    0.0750 \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Vietnam \n  \n  \n    SWP, 2022 \n    0.1750 \n    0.0750 \n    Postlarval, Juvenile-subadult \n    Super-Intensive \n    P. vannamei \n    Vietnam \n  \n\n\n\n\n\n\n\n2.1.15 Point estimates\nWe also found several sources that only reported an average or point estimate. These include:\n\nTable 3 in Engle et al. (2017), production intensities were estimated from stocking densities, compared to those reported in Table 1 of our previous report\nBoyd et al. (2021, p.780)\nJuárez et al. (2022, p. 7, p.9), production intensities were estimated in the same way as for Engle et al. (2017)\nNew (2002), who reports that in postlarval indoor nurseries “survival rates of about 90% can be obtained up to 20 days” (p. 82), and in outdoor nurseries “survival from stocking (or re-stocking) until removal from the nursery ponds should be at least 75%” (p. 83). The latter applies to “newly metamorphosed postlarvae (PL) from hatcheries, or with juveniles from primary nurseries”, though we categorize this estimate as ‘postlarval’, for simplicity.\n\n\npoint.est&lt;-data.frame(\nReference = c(rep(\"Engle et al., 2017\", 13), \"Boyd et al., 2021\", \"Juárez et al., 2022\", \"Juárez et al., 2022\", \"New, 2002\", \"New, 2002\"),\nMean_Mortality = c(1-.49,1-.74,1-.83,1-.7, 1-.23,1-.75,1-.81,1-.81, 1-.2,1-.75,1-.67,1-.73,1-.8, 1-.573, 1-.145, 1-.725, 1-0.9, 1-0.75),\nSD_Mortality = c(rep(NA, 18)),\nStage = c(rep(\"Postlarval, Juvenile-subadult \", 16), \"Postlarval \", \"Postlarval \"),\nProduction_Type = c(\"Semi-intensive\", \"Semi-intensive\", \"Intensive\", \"Intensive\", \"Semi-intensive\", \"Semi-intensive\", \"Intensive\", \"Intensive\", \"Extensive\", \"Intensive\", \"Intensive\", \"Intensive\", \"Intensive\", \"Mixed/All\", \"Extensive\", \"Intensive\", \"Mixed/All\", \"Mixed/All\"),\nSpecies = c(\"P. monodon\", \"P. monodon\",\"P. monodon\",\"P. monodon\", \"P. vannamei\", \"P. vannamei\", \"P. vannamei\", \"P. vannamei\", \"P. monodon\", \"P. vannamei\", \"P. vannamei\", \"P. vannamei\", \"P. vannamei\", \"P. vannamei\", \"P. monodon\", \"P. vannamei\", \"M. rosenbergii\", \"M. rosenbergii\"),\nCountry = c(\"Vietnam\", \"Vietnam\",\"Vietnam\",\"Vietnam\",\"Vietnam\",\"Vietnam\",\"Vietnam\",\"Vietnam\", \"Thailand\", \"Thailand\", \"Thailand\", \"Thailand\", \"Thailand\", \"Ecuador\", \"Indonesia\", \"Indonesia\", \"Not specified\", \"Not specified\"))\n\nshow.table(point.est)\n\n\n \n  \n    Reference \n    Mean_Mortality \n    SD_Mortality \n    Stage \n    Production_Type \n    Species \n    Country \n  \n \n\n  \n    Engle et al., 2017 \n    0.510 \n    NA \n    Postlarval, Juvenile-subadult \n    Semi-intensive \n    P. monodon \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.260 \n    NA \n    Postlarval, Juvenile-subadult \n    Semi-intensive \n    P. monodon \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.170 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. monodon \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.300 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. monodon \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.770 \n    NA \n    Postlarval, Juvenile-subadult \n    Semi-intensive \n    P. vannamei \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.250 \n    NA \n    Postlarval, Juvenile-subadult \n    Semi-intensive \n    P. vannamei \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.190 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.190 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Vietnam \n  \n  \n    Engle et al., 2017 \n    0.800 \n    NA \n    Postlarval, Juvenile-subadult \n    Extensive \n    P. monodon \n    Thailand \n  \n  \n    Engle et al., 2017 \n    0.250 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Thailand \n  \n  \n    Engle et al., 2017 \n    0.330 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Thailand \n  \n  \n    Engle et al., 2017 \n    0.270 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Thailand \n  \n  \n    Engle et al., 2017 \n    0.200 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Thailand \n  \n  \n    Boyd et al., 2021 \n    0.427 \n    NA \n    Postlarval, Juvenile-subadult \n    Mixed/All \n    P. vannamei \n    Ecuador \n  \n  \n    Juárez et al., 2022 \n    0.855 \n    NA \n    Postlarval, Juvenile-subadult \n    Extensive \n    P. monodon \n    Indonesia \n  \n  \n    Juárez et al., 2022 \n    0.275 \n    NA \n    Postlarval, Juvenile-subadult \n    Intensive \n    P. vannamei \n    Indonesia \n  \n  \n    New, 2002 \n    0.100 \n    NA \n    Postlarval \n    Mixed/All \n    M. rosenbergii \n    Not specified \n  \n  \n    New, 2002 \n    0.250 \n    NA \n    Postlarval \n    Mixed/All \n    M. rosenbergii \n    Not specified",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Quantitative literature analysis</span>"
    ]
  },
  {
    "objectID": "chapters/lit_review.html#summary",
    "href": "chapters/lit_review.html#summary",
    "title": "2  Quantitative literature analysis",
    "section": "2.2 Summary",
    "text": "2.2 Summary\nThe data is largely not based on any specific dataset, but instead on testimony and perceptions of general consensus. There is no guarantee that the different estimates are fully independent of one another. Thus, we do not conduct a meta-analysis. Instead, we present the mean and 95% credibility intervals in a forest plot by sampling from the beta distribution using each study’s mean and standard deviation. Since we do not have access to event counts and totals, the sampling approach ensures that the distributions are bounded between 0 and 1. We combine the datasets made above and clean the data ready for plotting.\n\n#combine datasets\npreslaughtermortality&lt;-data.frame(rbind(\n  FAO, Fast, Gonzalez, Kongkeo,Kona,AP,Boyd, Boyd2018,\n  Thakur, Mandro, New, KSU, GKAqua, SWP))\n\n# sample distributions based on means and standard deviations\npreslaughtersamples_list &lt;- mapply(sample_beta, preslaughtermortality$Mean_Mortality, preslaughtermortality$SD_Mortality)\n\n#extract the central 95% of the data and attach it \npreslaughtersamples&lt;-t(data.frame(apply(preslaughtersamples_list, 2, function(x) c(mean = mean(x), quantile(x, probs = c(0.025, 0.975))))))\npreslaughtermortality&lt;-cbind(preslaughtermortality, preslaughtersamples)\n# add row number as a variable for the summary figure\npreslaughtermortality &lt;- preslaughtermortality %&gt;% mutate(ID = row_number())\n\n# Sort from lowest to highest production density for figure \npreslaughtermortality$Production_Type&lt;- ifelse((preslaughtermortality$Production_Type == \"Semi-Intensive and Intensive\"|preslaughtermortality$Production_Type == \"Intensive and Super-Intensive\"|preslaughtermortality$Production_Type == \"Extensive, Semi-Intensive, and Intensive\"|preslaughtermortality$Production_Type == \"All\"), \"Mixed/All\", preslaughtermortality$Production_Type)\n\npreslaughtermortality$Production_Type&lt;- ifelse((preslaughtermortality$Production_Type == \"Semi-Intensive\"), \"Semi-intensive\", preslaughtermortality$Production_Type)\n\ncustom_order &lt;- c(\"Extensive\", \"Semi-intensive\", \"Intensive\", \"Super-Intensive\",\"Mixed/All\")\n\npreslaughtermortality$Production_Type &lt;- factor(preslaughtermortality$Production_Type, levels = custom_order)\npreslaughtermortality &lt;- preslaughtermortality[order(preslaughtermortality$Production_Type), ]\n\n\n\n# Sort from earliest to latest life stage for summary figure facet wrap\ncustom_order &lt;- c(\"All\", \"Larval\", \"Postlarval\", \n                  \"Juvenile-subadult\", \"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult \")\npreslaughtermortality$Stage &lt;- factor(preslaughtermortality$Stage, levels = custom_order)\npreslaughtermortality &lt;- preslaughtermortality[order(preslaughtermortality$Stage), ]\n\npreslaughtermortality$Species&lt;-factor(preslaughtermortality$Species,\n                                      levels=c(\"P. vannamei\", \"P. monodon\", \n                                               \"M. rosenbergii\", \"Penaeids\", \"All\"))\n\nFinally, we want to get our estimates form the survival curves model to compare to the literature review.\n\n# load the data\n\n## cumulative rates\nvannamei.cumulative&lt;-read.csv(\"../data/survival_curves/vannamei_model_slaughter_probs.csv\", header=TRUE, sep=\",\")\nmonodon.cumulative&lt;-read.csv(\"../data/survival_curves/monodon_model_slaughter_probs.csv\", header=TRUE, sep=\",\")\nmacro.cumulative&lt;-read.csv(\"../data/survival_curves/macro_model_slaughter_probs.csv\", header=TRUE, sep=\",\") \n\n## stage-specific rates\nbystage.farm.shrimp&lt;-read.csv(\"../data/survival_curves/bystage_farmed_shrimp_model_probs.csv\", header=TRUE, sep=\",\")\n\nbystage.df&lt;- split(bystage.farm.shrimp, bystage.farm.shrimp$species) # split up the farmed shrimp by species so we can calculate averages by species\nbystage.vannamei&lt;-bystage.df$vannamei\nbystage.monodon&lt;-bystage.df$monodon\nbystage.macro&lt;-bystage.df$macrobrachium # these are stage specific rates\n\n#### adding our results to the lit review graph\nshrimp.mort&lt;-data.frame(Reference=rep(\"Survival curves model\", 12),\n                        Stage=c(rep(\"All\", 3), rep(\"Larval\", 3), \n                                     rep(\"Postlarval\", 3), \n                                     rep(\"Juvenile-subadult\", 3)),\n                        Species=rep(c(\"P. vannamei\",\"P. monodon\", \"Macrobrachium\"), 4),\n                        mean=c((1-mean(vannamei.cumulative$slaughter.age)), # calculate mean survival for each species, minus this from 1 to get mortality instead of survival\n                              (1-mean(monodon.cumulative$slaughter.age)),\n                              (1-mean(macro.cumulative$slaughter.age)),\n                              mean(bystage.vannamei$larval),\n                              mean(bystage.monodon$larval),\n                              mean(bystage.macro$larval),\n                              mean(bystage.vannamei$postlarval),\n                              mean(bystage.monodon$postlarval),\n                              mean(bystage.macro$postlarval),\n                              mean(bystage.vannamei$juvenile.adult),\n                              mean(bystage.monodon$juvenile.adult),\n                              mean(bystage.macro$juvenile.adult)),\n                      '2.5%'=c((1-quantile(vannamei.cumulative$slaughter.age, probs=0.975)),\n                              (1-quantile(monodon.cumulative$slaughter.age, probs=0.975)),\n                              (1-quantile(macro.cumulative$slaughter.age, probs=0.975)),\n                              quantile(bystage.vannamei$larval, probs=0.025),\n                              quantile(bystage.monodon$larval, probs=0.025),\n                              quantile(bystage.macro$larval, probs=0.025),\n                              quantile(bystage.vannamei$postlarval, probs=0.025),\n                              quantile(bystage.monodon$postlarval, probs=0.025),\n                              quantile(bystage.macro$postlarval, probs=0.025),\n                              quantile(bystage.vannamei$juvenile.adult, probs=0.025),\n                              quantile(bystage.monodon$juvenile.adult, probs=0.025),\n                              quantile(bystage.macro$juvenile.adult, probs=0.025)),\n                      '97.5%'=c((1-quantile(vannamei.cumulative$slaughter.age, probs=0.025)),\n                                (1-quantile(monodon.cumulative$slaughter.age, probs=0.025)),\n                                (1-quantile(macro.cumulative$slaughter.age, probs=0.025)),\n                                quantile(bystage.vannamei$larval, probs=0.975),\n                                quantile(bystage.monodon$larval, probs=0.975),\n                                quantile(bystage.macro$larval, probs=0.975),\n                                quantile(bystage.vannamei$postlarval, probs=0.975),\n                                quantile(bystage.monodon$postlarval, probs=0.975),\n                                quantile(bystage.macro$postlarval, probs=0.975),\n                                quantile(bystage.vannamei$juvenile.adult, probs=0.975),\n                                quantile(bystage.monodon$juvenile.adult, probs=0.975),\n                                quantile(bystage.macro$juvenile.adult, probs=0.975)),\n                      ID=rep(NA, 12),\n                      check.names=FALSE)\n\nall.dat&lt;-plyr::rbind.fill(shrimp.mort, preslaughtermortality)\n\nall.dat$Stage&lt;-factor(all.dat$Stage, levels=c( \"All\", \"Larval\", \"Postlarval\", \"Juvenile-subadult\", \"Postlarval, Juvenile-subadult\"))\n\npoint.est$Stage&lt;-ifelse((point.est$Stage == \"Postlarval \"), yes=\"Post- larval\", no=point.est$Stage)\npoint.est$Stage&lt;-ifelse((point.est$Stage == \"Postlarval, Juvenile-subadult \"), yes=\"Postlarval, Juvenile- subadult \", no=point.est$Stage)\n\npoint.est$Stage&lt;-factor(point.est$Stage, levels=c(\"Post- larval\", \"Postlarval, Juvenile- subadult \"))\n\n\n\nlit.review.w.model&lt;-ggplot(all.dat) +\n  geom_pointrange(aes(y = Reference,  x = mean*100,\n                      xmin = `2.5%`*100, xmax = `97.5%`*100,\n                      color = Species), size=.45, linewidth=.85,\n                  position = position_dodge2(width = 1, padding = 2))+\n geom_point(data=point.est, \n             aes(x=Mean_Mortality*100, y=Reference, color=Species),\n             shape=4, stroke=1.2, show.legend=FALSE) +\n facet_grid(Stage~.,\n            scales = \"free\", space = \"free_y\", labeller = label_wrap_gen(width=2)) +\n  scale_colour_manual(values=c(\"#000000\", \"#CC79A7\",  \"#009E73\", \"#56B4E9\",\"#E69F00\", \"#0072B2\"),\n       labels=c(\"Unspecified\", expression(italic(\"M. rosenbergii\")),\n                               expression(italic(\"Macrobrachium\")),\n                               expression(italic(\"P. monodon\")), \n                               expression(italic(\"P. vannamei\")),\n                               \"Penaeids\")) +\n  labs(caption = \"Circles are means and error bars are 95% credibility intervals. Crosses are point estimates.\",x=\"Died before end of stage (%)\") +\n  guides(color=guide_legend(nrow=1,byrow=TRUE)) +\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(6, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        strip.text = element_text(size = 9, face=\"bold\"),\n        plot.caption = element_text(hjust = .5, size=9),\n        axis.text=element_text(size=10),\n        axis.title.x=element_text(size=10, face=\"bold\"),\n        axis.title.y=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,1,1,1), \"mm\"),\n        panel.spacing = unit(1.5, \"mm\"))\nlit.review.w.model\n\n\n\n\n\n\n\n#ggsave(lit.review.w.model, file=\"lit.review2.png\", width=7.5, height=10.5, unit=\"in\")\n\n\n2.2.1 Farm intensity\nNow we can see how mortality varies by production intensity. We restrict this analysis to the estimates from specific farm intensities. We provide errors bars of 95% credibility intervals for estimates that had ranges.\n\npreslaughtermortality2&lt;-preslaughtermortality\n\npoint.est2&lt;-point.est\npoint.est2$mean&lt;-point.est2$Mean_Mortality\npoint.est2$`2.5%`&lt;-NA\npoint.est2$`97.5%`&lt;-NA\npoint.est2$ID&lt;-NA\n\nintensity.data&lt;-rbind(preslaughtermortality2, point.est2)\n\n# remove data from farms not of a specific intensity\nintensity.data&lt;-intensity.data %&gt;%\n  filter(!Production_Type==\"Mixed/All\")\n\nintensity.data &lt;- intensity.data[order(intensity.data$Production_Type), ]\n\nintensity.data$Species&lt;-factor(\n  intensity.data$Species, levels=c(\"P. vannamei\", \"P. monodon\",\n                                           \"M. rosenbergii\", \"Penaeids\", \"All\"))\n\nintensity.data$Prod.Type&lt;-factor(intensity.data$Production_Type,\n       levels = c( \"Super-Intensive\", \"Intensive\",  \"Semi-intensive\", \"Extensive\"), labels=c(\"Super-\\nintensive\", \"Intensive\", \"Semi-\\nintensive\", \"Extensive\"))\n\n# plot the results\nggplot(intensity.data, aes(x=Prod.Type, y=mean*100, fill=Species)) +\n  geom_bar(position = position_dodge2(preserve = \"single\", padding=0.1, width=2),  stat=\"identity\") +\n  geom_errorbar(aes(ymin=`2.5%`*100, ymax=`97.5%`*100), \n                position=position_dodge2(preserve = \"single\", padding=0.1), linewidth=.3) +\n  scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\", \"#cc79a7\"),\n                    labels=c(expression(italic(\"P. vannamei\")), \n                               expression(italic(\"P. monodon\")),\n                               \"Penaeids\")) +\n  xlab(\"\") +\n  ylab(\"Mortality (%)\") +\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(5, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        axis.text=element_text(size=10),\n        axis.title.y=element_text(size=10, face=\"bold\"),\n        axis.title.x=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,1,1,1), \"mm\")) +\n  coord_flip()",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Quantitative literature analysis</span>"
    ]
  },
  {
    "objectID": "chapters/lit_review.html#data-and-method-limitations",
    "href": "chapters/lit_review.html#data-and-method-limitations",
    "title": "2  Quantitative literature analysis",
    "section": "2.3 Data and method limitations",
    "text": "2.3 Data and method limitations\nThere are reasons to doubt the veracity of both industry sources and non-industry sources.\nOn the one hand, broodstock suppliers have an incentive to underestimate preslaughter mortality of breeders’ offspring so that hatcheries will want to buy their broodstock. For instance, they might run highly controlled studies where water quality is better than what most shrimp farms will provide in practice. However, broodstock suppliers may also be using the most cutting-edge techniques for improving survival (e.g., artificial selection of broodstock), so their estimates might be more accurate than older or more neutral sources when projecting into the future.\nOn the other hand, academic or otherwise neutral sources still contain methodological limitations. Many academics estimate mortality rates by surveying shrimp farmers. These surveys contain several sources of random and non-random error. For example, Boyd et al., 2017 notes several in their study of shrimp farms in Vietnam and Thailand:\nRecall bias: “The variable with which we have the least confidence is percentage survival…farmers almost invariably gave this statistic from memory, and in many cases, the farmer seemed uncertain” (pp. 216-217). This error could be random, but may also be systematic if, for instance, farmers are motivated to provided to optimistic estimates to appear competent.\nPractical measurement difficulty: “Use of survival as an indicator in shrimp culture also would be problematic. Postlarvae are tiny and cannot be counted with a high degree of accuracy. Hatcheries typically provide extra postlarvae…in counted batches sold to farms to compensate for errors in counting or weak postlarvae liable to die during acclimation or soon after stocking. Farmers in Asia acclimate postlarvae before stocking them in ponds, but they usually do not recount the postlarvae before stocking. Stocking density usually will be higher than the reported density if the postlarvae survive well or lower in case of poor survival. Once placed in ponds, it is not possible to accurately estimate the number of postlarvae that have survived. Although the producer is able to accurately estimate the number of shrimp harvested by determining the average individual weight of shrimp in samples and using this estimate to determine the total number of shrimp harvested from the total weight of shrimp taken from a pond, accurate estimates of survival are impeded by the lack of reliable information on numbers of postlarvae stocked” (pp. 222-223). Because shrimps are simply harder to count during and before the postlarvae stage, these estimates should contain wide confidence intervals. Mortality rates are probably also underestimated, because farmers had more postlarvae than they thought they did.\nNon-random sampling: “Heterotrophic, biofloc, culture systems were not included in the survey as this method does not constitute a large share of shrimp production in either country.” Even if certain types of production are rare, excluding them entirely from surveys could bias results if their pre-slaughter mortality rates are considerably different.\nNon-random response: “It was intended initially to select farms randomly from satellite imagery, but many farmers,especially in Thailand, refused to participate in interviews… We believe that the reluctance of farmers to participate involved two factors. The interviews and farm inspections were time consuming, requiring nearly an entire day at most farms,and up to 2 d at larger farms. Moreover, an international, environmental nongovernmental organization was conducting the survey, and the farmers were suspicious of the project motives”(p. 203). If unwillingness to participate correlated with preslaughter mortality rates, the results would be biased.\nExclusion of outliers: “Failed crops reported by some farms in both countries were not included in the survival estimates. Hence, the actual survival of postlarvae to harvest at some farms is more or less than reported earlier for successful crops” (p. 209). We suspect that mass die-off events are frequently omitted in calculations, which would explain why FAO’s range of 55-91% survival seems so anomalously wide.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Quantitative literature analysis</span>"
    ]
  },
  {
    "objectID": "chapters/cross-species_mortality.html",
    "href": "chapters/cross-species_mortality.html",
    "title": "3  Cross-species comparison",
    "section": "",
    "text": "3.1 Loading and preparing data\nWe now load in the cross-species data. We also load and then build a data frame from the survival curves model so that we can compare our estimates of farmed shrimp mortality to the other species. Welfare footprint’s data represents 90% credibility intervals so we make the data frame of farmed shrimp estimates with the same intervals. We will also look at the slaughter age of all these species, so we load the slaughter age estimates from the survival curves model, too.\nSee the GitHub repository for the .csv files used here.\n# cross-species data\nspecies.mort&lt;-read.csv(\"../data/comparison/cross-species_data.csv\", header=TRUE, sep=\",\") \n\n# survival curves data\nvannamei.cumulative&lt;-read.csv(\"../data/survival_curves/vannamei_model_slaughter_probs.csv\", header=TRUE, sep=\",\")\nmonodon.cumulative&lt;-read.csv(\"../data/survival_curves/monodon_model_slaughter_probs.csv\", header=TRUE, sep=\",\")\nmacro.cumulative&lt;-read.csv(\"../data/survival_curves/macro_model_slaughter_probs.csv\", header=TRUE, sep=\",\") # these are cumulative rates at each stage\n\nbystage.farm.shrimp&lt;-read.csv(\"../data/survival_curves/bystage_farmed_shrimp_model_probs.csv\", header=TRUE, sep=\",\")\n\nbystage.df&lt;- split(bystage.farm.shrimp, bystage.farm.shrimp$species) # split up the farmed shrimp by species so we can calculate averages by species\nbystage.vannamei&lt;-bystage.df$vannamei\nbystage.monodon&lt;-bystage.df$monodon\nbystage.macro&lt;-bystage.df$macrobrachium # these are stage specific rates\n\nvannamei_days&lt;-read.csv(\"../data/survival_curves/vannamei_totalfarmed_days.csv\", header=TRUE, sep=\",\")\nmonodon_days&lt;-read.csv(\"../data/survival_curves/monodon_totalfarmed_days.csv\", header=TRUE, sep=\",\")\nmacro_days&lt;-read.csv(\"../data/survival_curves/macro_totalfarmed_days.csv\", header=TRUE, sep=\",\") # these are the slaughter age estimates\n\n# make a data frame of the mortality rates from the survival curves model, this time with 90% credibility intervals, to match the other species data from Welfare Footprint\n\nshrimp.mort&lt;-data.frame(\n  Group=rep(\"Farmed shrimp\", 12),\n  Species=rep(c(\"P. vannamei\",\"P. monodon\", \"Macrobrachium\"), 4),\n  Stage=c(rep(\"Cumulative\", 3), rep(\"Larval\", 3),\n          rep(\"Postlarval\", 3), rep(\"Juvenile-subadult\", 3)),\n  Stage.growout=c(rep(\"Cumulative\", 3), rep(\"Pre-growout\", 3),\n                  rep(\"Growout\", 6)),\n  Vertebrate=rep(\"Invertebrate\", 12),\n  Aquatic=rep(\"Aquatic\", 12),\n  Average=c(\n    (1-median(c(\n       quantile(vannamei.cumulative$slaughter.age, probs=0.05), # this time we need 90% credibility intervals to match Welfare Footprint's method\n       quantile(vannamei.cumulative$slaughter.age, probs=0.95))))*100,\n    (1-median(c(\n      quantile(monodon.cumulative$slaughter.age, probs=0.05),\n      quantile(monodon.cumulative$slaughter.age, probs=0.95))))*100,\n    (1-median(c(\n      quantile(macro.cumulative$slaughter.age, probs=0.05),\n      quantile(macro.cumulative$slaughter.age, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.vannamei$larval, probs=0.05), \n      quantile(bystage.vannamei$larval, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.monodon$larval, probs=0.05),\n      quantile(bystage.monodon$larval, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.macro$larval, probs=0.05),\n      quantile(bystage.macro$larval, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.vannamei$postlarval, probs=0.05),\n      quantile(bystage.vannamei$postlarval, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.monodon$postlarval, probs=0.05),\n      quantile(bystage.monodon$postlarval, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.macro$postlarval, probs=0.05),\n      quantile(bystage.macro$postlarval, probs=0.95))))*100,\n    (median(c(\n     quantile(bystage.vannamei$juvenile.adult, probs=0.05),\n     quantile(bystage.vannamei$juvenile.adult, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.monodon$juvenile.adult, probs=0.05),\n      quantile(bystage.monodon$juvenile.adult, probs=0.95))))*100,\n    (median(c(\n      quantile(bystage.macro$juvenile.adult, probs=0.05),\n      quantile(bystage.macro$juvenile.adult, probs=0.95))))*100),\n  Lower=c(\n        (1-quantile(vannamei.cumulative$slaughter.age, probs=0.95))*100,\n        (1-quantile(monodon.cumulative$slaughter.age, probs=0.95))*100,\n        (1-quantile(macro.cumulative$slaughter.age, probs=0.95))*100,\n        quantile(bystage.vannamei$larval, probs=0.05)*100,\n        quantile(bystage.monodon$larval, probs=0.05)*100,\n        quantile(bystage.macro$larval, probs=0.05)*100,\n        quantile(bystage.vannamei$postlarval, probs=0.05)*100,\n        quantile(bystage.monodon$postlarval, probs=0.05)*100,\n        quantile(bystage.macro$postlarval, probs=0.05)*100,\n        quantile(bystage.vannamei$juvenile.adult, probs=0.05)*100,\n        quantile(bystage.monodon$juvenile.adult, probs=0.05)*100,\n        quantile(bystage.macro$juvenile.adult, probs=0.05)*100),\n  Upper=c(\n        (1-quantile(vannamei.cumulative$slaughter.age, probs=0.05))*100,\n        (1-quantile(monodon.cumulative$slaughter.age, probs=0.05))*100,\n        (1-quantile(macro.cumulative$slaughter.age, probs=0.05))*100,\n        quantile(bystage.vannamei$larval, probs=0.95)*100,\n        quantile(bystage.monodon$larval, probs=0.95)*100,\n        quantile(bystage.macro$larval, probs=0.95)*100,\n        quantile(bystage.vannamei$postlarval, probs=0.95)*100,\n        quantile(bystage.monodon$postlarval, probs=0.95)*100,\n        quantile(bystage.macro$postlarval, probs=0.95)*100,\n        quantile(bystage.vannamei$juvenile.adult, probs=0.95)*100,\n        quantile(bystage.monodon$juvenile.adult, probs=0.95)*100,\n        quantile(bystage.macro$juvenile.adult, probs=0.95)*100), \n  Slaught_midpoint=c(median(vannamei_days$total.farmed),\n                   median(monodon_days$total.farmed),\n                   median(macro_days$total.farmed),\n                   rep(NA, 9)),\n  Unit=rep(\"Days\", 12),\n  Slaught_midpoint_months=c(rep(c(median(vannamei_days$total.farmed)/30.5,\n                   median(monodon_days$total.farmed)/30.5,\n                   median(macro_days$total.farmed)/30.5), 4)),\n  Weight=(rep(c(median(c(11, 26)), median(c(20,60)), median(c(10,30))),4)),\n  Source=rep(\"Survival curves model\", 12)\n)\n\n# join the survival curves data with the data for other species\nmort&lt;-plyr::rbind.fill(species.mort, shrimp.mort)\n\nmortality.cumulative&lt;-mort[mort$Stage==\"Cumulative\",] # while we collected stage-specific data, here we only need cumulative mortality rates \n\nstr(mortality.cumulative)\n\n'data.frame':   46 obs. of  18 variables:\n $ Group                  : chr  \"Chicken\" \"Carnivorous fish\" \"Carnivorous fish\" \"Carnivorous fish\" ...\n $ Species                : chr  \"Broilers\" \"Yellow catfish\" \"Cobia\" \"Striped bass\" ...\n $ Stage                  : chr  \"Cumulative\" \"Cumulative\" \"Cumulative\" \"Cumulative\" ...\n $ Stage.growout          : chr  \"Cumulative\" \"Cumulative\" \"Cumulative\" \"Cumulative\" ...\n $ Vertebrate             : chr  \"Vertebrate\" \"Vertebrate\" \"Vertebrate\" \"Vertebrate\" ...\n $ Aquatic                : chr  \"Non-aquatic\" \"Aquatic\" \"Aquatic\" \"Aquatic\" ...\n $ Average                : num  5.12 51.5 46.75 35 18.75 ...\n $ Lower                  : num  2.74 19 14.5 19 9.75 14.5 52.5 19 19 19 ...\n $ Upper                  : num  7.5 84 79 51 27.8 ...\n $ Slaught_midpoint       : num  40 20 10 20 23 27 33.5 26 30 16.5 ...\n $ Slaught_lower          : num  NA 15 8 16 18 18 17 24 24 9 ...\n $ Slaught_upper          : num  NA 25 12 24 28 36 50 28 36 24 ...\n $ Unit                   : chr  \"Days\" \"Months\" \"Months\" \"Months\" ...\n $ Slaught_midpoint_months: num  1.31 20 10 20 23 ...\n $ Slaught_lower_months   : num  NA 15 8 16 18 18 17 24 24 9 ...\n $ Slaught_upper_months   : num  NA 25 12 24 28 36 50 28 36 24 ...\n $ Weight                 : num  2170 125 8000 750 2950 ...\n $ Source                 : chr  \"Lower: Junghans et al., 2022; Upper: FAO, 2023; Other sources: National Chicken Council and Leinonen and Kyriazakis, 2013\" \"Welfare footprint\" \"Welfare footprint\" \"Welfare footprint\" ...",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Cross-species comparison</span>"
    ]
  },
  {
    "objectID": "chapters/cross-species_mortality.html#farmed-taxa",
    "href": "chapters/cross-species_mortality.html#farmed-taxa",
    "title": "3  Cross-species comparison",
    "section": "3.2 Farmed taxa",
    "text": "3.2 Farmed taxa\nNow we can plot the results, comparing mortality across species.\n\nmortality.ordered&lt;-mortality.cumulative[!mortality.cumulative$Group==\"Wild shrimp\",] %&gt;% \n  arrange(Average) # remove wild shrimp and order by average mortality\n\nmortality.ordered$Slaught_midpoint_months&lt;-round(mortality.ordered$Slaught_midpoint_months, 1) # round slaughter ages to one decimal place (these will be shown next to the graph)\n\nmortality.ordered$Species&lt;-factor(mortality.ordered$Species, levels=unique(mortality.ordered$Species)) # make sure the species names is a factor variable\n\n# to make the label formats correct we need to italicize some species names\nspec_labs&lt;-c(\n  \"Broilers\", \"Turbot\",\n expression(paste(\"Clawed lobster (\",italic(\"Homarus americanus\"),\")\")),  \n expression(paste(\"Clawed lobster (\",italic(\"Homarus gammarus\"),\")\")),\n  \"Mangrove red snapper\",\"Coho Salmon\",                          \n expression(paste(\"Spiny lobster (\",italic(\"Panulirus, Jasus spp.\"),\")\")), \n  \"Crickets\", \"Black soldier flies\", \"Atlantic Salmon\", \"Gilthead seabream\", \n  \"Mealworms\", \"John's Snapper\",\n expression(paste(\"Crayfish (\",italic(\"Cherax quadricarinatus\"),\")\")),\n expression(paste(\"Crayfish (\",italic(\"Procambarus clarkii\"),\")\")),      \n  \"Other insects\", \"Striped bass\", \"Atlantic cod\",                         \n expression(paste(\"Crayfish (\",italic(\"Paranephrops zealandicus\"),\")\")),\n  \"Meagre\",\n expression(paste(\"Crayfish (\",italic(\"Astacus leptodactylus\"),\")\")),     \n expression(paste(\"Crayfish (\",italic(\"Cherax tenuimanus\"),\")\")),\n  expression(paste(italic(\"P. vannamei\"))),\n  \"African sharptooth catfish\",           \n expression(paste(\"Crab (\",italic(\"Scylla spp.\"),\")\")),\n  \"Barramundi\", \"Cobia\",                                \n  \"Crayfish (tropical)\",\n expression(paste(\"Crab (\",italic(\"Eriocheir sinensis\"),\")\")),             \n  \"Pangas catfish\", \"Rainbow trout\", \"Yellow catfish\", \"European seabass\",                     \n  \"Pikeperch\", \"Crayfish (temperate)\",                 \n expression(paste(\"Crayfish (\",italic(\"Pacifastacus leniusculus\"),\")\")),  \n expression(paste(\"Crab (\",italic(\"Portunus trituberculatus\"),\")\")),\n  expression(paste(italic(\"P. monodon\"))),\n expression(paste(\"Crayfish (\",italic(\"Cherax destructor/albidus\"),\")\")), \n  \"Clawed lobster\", \n  expression(paste(italic(\"Macrobrachium\"))),\n \"European perch\", \"Crabs\", \"Spiny lobster\")                 \n\n\n# now we can plot the results\ncross_species&lt;-ggplot(mortality.ordered, aes(y = Species, x=Average)) +\n  geom_pointrange(aes(color=Group, xmin=Lower, xmax=Upper), shape=\"square\", \n                  size=.6, linewidth=.85) +\n  scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\", \"#009E73\", \"#0072B2\", \"#CC79A7\", \"#000000\")) +\n  coord_cartesian(xlim=c(0,100), ylim=c(0,44.5), clip = 'off') +\n  geom_text(aes(y=Species, x=107, \n                 label=formatC(Slaught_midpoint_months, format=\"fg\"), hjust=0),\n             na.rm=TRUE, fontface=\"plain\") +\n  annotate(geom=\"text\", y=44/2, x=119, angle=270, fontface=\"bold\", \n           label=\"Slaughter age (months)\") +\n  scale_x_continuous(expand=c(0,5)) +\n  scale_y_discrete(expand=c(0,0), labels=spec_labs) +\n  labs(caption=\"Squares are medians and error bars are 90% credibility intervals\",\n       x=\"Cumulative mortality (%)\", y=\"\") +\n  theme(plot.margin=margin(r=55, l=0, t=5, b=5),\n        legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(5, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        plot.caption = element_text(hjust = .5, size=9),\n        axis.text=element_text(size=10),\n        axis.title.x=element_text(size=10, face=\"bold\"),\n        axis.title.y=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        panel.spacing = unit(1.5, \"mm\"))\ncross_species\n\n\n\n\n\n\n\n#ggsave(cross_species, file=\"cross-species.png\", width=8, height=9.5, unit=\"in\")\n\n\n3.2.1 Analysing other characteristics\nNext, we analyse whether other characteristics of these farmed species are related to their mortality rates.\n\n3.2.1.1 Slaughter age\nIs the length of a production cycle related to cumulative mortality rate across species?\n\nmortality.unordered&lt;-mortality.cumulative # to test if there are correlations we need the data set to be unordered\n\nmortality.unordered&lt;-mortality.unordered[!mortality.unordered$Group==\"Wild shrimp\",]\n\nggplot(mortality.unordered, aes(x=Slaught_midpoint_months, y=Average)) +\n   geom_point(aes(x=Slaught_midpoint_months, y=Average, color=Group)) +\n  geom_smooth(aes(x=Slaught_midpoint_months, y=Average), method = \"lm\", se = FALSE,\n              linetype=\"solid\", color=\"#000000\", linewidth=.6) +\n  stat_cor(label.x=27, label.y=44, size = 3)+\n  labs(y=\"Cumulative mortality midpoint (%)\", x=\"Slaughter age midpoint (months)\")+\n  scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\", \"#009E73\", \"#0072B2\", \"#cc79a7\", \"#000000\"))+\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank())\n\n\n\n\n\n\n\ncor.test(mortality.unordered$Slaught_midpoint_months, mortality.unordered$Average, alternative=\"two.sided\", method=\"spearman\")\n\n\n    Spearman's rank correlation rho\n\ndata:  mortality.unordered$Slaught_midpoint_months and mortality.unordered$Average\nS = 12885, p-value = 0.5528\nalternative hypothesis: true rho is not equal to 0\nsample estimates:\n      rho \n0.0919443 \n\n\n\n\n3.2.1.2 Weight\nWe look at the correlation between weight at slaughter and pre-slaughter mortality. We also examine this pattern after removing outliers above 2500g and 500g.\nw1&lt;-ggplot(mortality.unordered, aes(x=Weight, y=Average)) +\n   geom_point(aes(x=Weight, y=Average, color=Group)) +\n  geom_smooth(aes(x=Weight, y=Average), method = \"lm\", se = FALSE,\n              linetype=\"solid\", color=\"#000000\", linewidth=.6) +\n  stat_cor(label.x=7000, label.y=20, size = 3)+\n  labs(y=\"Cumulative mortality midpoint (%)\", x=\"Weight (g)\", subtitle=\"All samples\")+\n  scale_color_manual(values=c(\"#E69F00\", \"#cc79a7\", \"#0072B2\", \"#009E73\", \"#56B4E9\"),\n                     limits=unique(mortality.unordered$Group)) +\n  theme(legend.title=element_blank())\nw1\n# plot the results removing outliers above 2500g\nw2&lt;-ggplot(mortality.unordered[mortality.unordered$Weight&lt;2500,], aes(x=Weight, y=Average)) +\n   geom_point(aes(x=Weight, y=Average, color=Group)) +\n  geom_smooth(aes(x=Weight, y=Average), method = \"lm\", se = FALSE,\n              linetype=\"solid\", color=\"#000000\", linewidth=.6) +\n  stat_cor(label.x=1500, label.y=23, size = 3)+\n  labs(y=\"Cumulative mortality midpoint (%)\", x=\"Weight (g)\", subtitle=\"Samples with weight less than 2500g\")+\n  scale_color_manual(values=c(\"#E69F00\", \"#cc79a7\", \"#0072B2\", \"#009E73\", \"#56B4E9\"),\n                     limits=unique(mortality.unordered$Group))+\n  theme(legend.title=element_blank(),\n        legend.position=\"none\")\nw2\n# plot the results removing outliers above 500g\nw3&lt;-ggplot(mortality.unordered[mortality.unordered$Weight&lt;500,], aes(x=Weight, y=Average)) +\n   geom_point(aes(x=Weight, y=Average, color=Group)) +\n  geom_smooth(aes(x=Weight, y=Average), method = \"lm\", se = FALSE,\n              linetype=\"solid\", color=\"#000000\", linewidth=.6) +\n  stat_cor(label.x=340, label.y=47, size = 3)+\n  labs(y=\"\", x=\"Weight (g)\", subtitle=\"Samples with weight less than 500g\")+\n  scale_color_manual(values=c(\"#E69F00\", \"#cc79a7\", \"#0072B2\", \"#009E73\", \"#56B4E9\"),\n                     limits=unique(mortality.unordered$Group))+\n  theme(legend.title=element_blank(),\n        legend.position=\"none\")\nw3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWe also calculate Spearman’s rho for these three analyses.\n# calculate correlations between weight and mortality\ncor.test(mortality.unordered$Weight, mortality.unordered$Average, alternative=\"two.sided\", method=\"spearman\")\n\nWarning in cor.test.default(mortality.unordered$Weight,\nmortality.unordered$Average, : Cannot compute exact p-value with ties\n\n# calculate correlations after removing outliers in the data\nweight.restricted&lt;-mortality.unordered[mortality.unordered$Weight&lt;2500,]\ncor.test(weight.restricted$Weight, weight.restricted$Average, alternative=\"two.sided\", method=\"spearman\")\n\nWarning in cor.test.default(weight.restricted$Weight,\nweight.restricted$Average, : Cannot compute exact p-value with ties\n\nweight.small&lt;-mortality.unordered[mortality.unordered$Weight&lt;500,]\ncor.test(weight.small$Weight, weight.small$Average, alternative=\"two.sided\", method=\"spearman\")\n\nWarning in cor.test.default(weight.small$Weight, weight.small$Average,\nalternative = \"two.sided\", : Cannot compute exact p-value with ties\n\n\n\n\n\n    Spearman's rank correlation rho\n\ndata:  mortality.unordered$Weight and mortality.unordered$Average\nS = 14947, p-value = 0.4111\nalternative hypothesis: true rho is not equal to 0\nsample estimates:\n      rho \n-0.128607 \n\n\n\n    Spearman's rank correlation rho\n\ndata:  weight.restricted$Weight and weight.restricted$Average\nS = 9923.9, p-value = 0.6082\nalternative hypothesis: true rho is not equal to 0\nsample estimates:\n        rho \n-0.08588319 \n\n\n\n\n\n    Spearman's rank correlation rho\n\ndata:  weight.small$Weight and weight.small$Average\nS = 3225, p-value = 0.5519\nalternative hypothesis: true rho is not equal to 0\nsample estimates:\n      rho \n0.1173973",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Cross-species comparison</span>"
    ]
  },
  {
    "objectID": "chapters/cross-species_mortality.html#wild-shrimp",
    "href": "chapters/cross-species_mortality.html#wild-shrimp",
    "title": "3  Cross-species comparison",
    "section": "3.3 Wild shrimp",
    "text": "3.3 Wild shrimp\nFinally, we compare farmed shrimp mortality to wild shrimp mortality.\n\n# wild shrimp v farmed shrimp\n\nwildshrimp.mort&lt;-species.mort[species.mort$Group==\"Wild shrimp\",] # keep only wild shrimp from the full data set\n\nfarm.wild.mort&lt;-plyr::rbind.fill(shrimp.mort, wildshrimp.mort) # combine farmed and wild shrimp data\n\nfarm.wild.mort$Stage&lt;-factor(farm.wild.mort$Stage, levels=c(\"Larval\", \"Postlarval\", \"Juvenile-subadult\", \"Cumulative\")) # make the life stages a factor and order them correctly\n\nfarm.wild.mort$Species&lt;-factor(farm.wild.mort$Species, levels=unique(farm.wild.mort$Species)) # make the species name a factor\n\n# plot the results\nggplot(farm.wild.mort, aes(x=Average, y=Species, color=Group)) +\n  geom_pointrange(aes(xmin=Lower, xmax=Upper), shape=\"square\",\n                  size=.7, linewidth=1, position=position_dodge2(width=1, padding=2)) +\n   labs(caption=\"For farmed shrimp, squares are medians and error bars are 90% credibility intervals.\\nFor wild shrimp, squares are medians and error bars are ranges reported by Dall et al. (1991).\", x=\"Mortality (%)\", y=\"\") +\n  scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\")) +\n facet_grid(Stage~., scales=\"free_y\", space=\"free_y\")+\n  scale_y_discrete(labels=c(\n    expression(italic(\"P. vannamei\")),   \n    expression(italic(\"P. monodon\")),\n    expression(italic(\"Macrobrachium\")),\n    \"Penaeids\", expression(italic(\"M. rosenbergii\")), expression(italic(\"P. setiferus\"))\n    ))+\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(5, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        strip.text = element_text(size = 9, face=\"bold\"),\n        plot.caption = element_text(hjust = .5, size=9),\n        axis.text=element_text(size=10),\n        axis.title.y=element_text(size=10, face=\"bold\"),\n        axis.title.x=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,1,1,1), \"mm\"),\n        panel.spacing = unit(1.5, \"mm\"))",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Cross-species comparison</span>"
    ]
  },
  {
    "objectID": "chapters/cross-species_mortality.html#data-and-method-limitations",
    "href": "chapters/cross-species_mortality.html#data-and-method-limitations",
    "title": "3  Cross-species comparison",
    "section": "3.4 Data and method limitations",
    "text": "3.4 Data and method limitations\nAmong the sources used to compare shrimp mortality to other taxa, there is no standardized measurement of mortality—for example, there were no standard procedures for whether ranges are standard errors, standard deviations, confidence intervals, or something else.\nSome sources were missing life stages. For example, we found no reliable data on insect mortality broken down by life stage. Additionally, the carnivorous fish data did not cover larval mortality (Welfare Footprint), so fish mortality is likely higher than we reported. It is also possible that mass-mortality events where entire populations die are not included in the figures or included in some sources and not others.\nFor wild shrimp data, we relied almost entirely on estimations of penaeids generally. Finally, where we had to rely on industry sources, as opposed to academic ones, numbers may be biased and may be based more on ‘gut feeling’ estimations rather than empirical insights.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Cross-species comparison</span>"
    ]
  },
  {
    "objectID": "chapters/lit_review.html#results",
    "href": "chapters/lit_review.html#results",
    "title": "2  Quantitative literature analysis",
    "section": "2.2 Results",
    "text": "2.2 Results\nThe data is largely not based on any specific dataset, but instead on testimony and perceptions of general consensus. There is no guarantee that the different estimates are fully independent of one another. Thus, we do not conduct a meta-analysis. Instead, we present the mean and 95% credibility intervals in a forest plot by sampling from the beta distribution using each study’s mean and standard deviation. Since we do not have access to event counts and totals, the sampling approach ensures that the distributions are bounded between 0 and 1. We combine the datasets made above and clean the data ready for plotting.\n\n#combine datasets\npreslaughtermortality&lt;-data.frame(rbind(\n  FAO, Fast, Gonzalez, Kongkeo,Kona,AP,Boyd, Boyd2018,\n  Thakur, Mandro, New, KSU, GKAqua, SWP))\n\n# sample distributions based on means and standard deviations\npreslaughtersamples_list &lt;- mapply(sample_beta, preslaughtermortality$Mean_Mortality, preslaughtermortality$SD_Mortality)\n\n#extract the central 95% of the data and attach it \npreslaughtersamples&lt;-t(data.frame(apply(preslaughtersamples_list, 2, function(x) c(mean = mean(x), quantile(x, probs = c(0.025, 0.975))))))\npreslaughtermortality&lt;-cbind(preslaughtermortality, preslaughtersamples)\n# add row number as a variable for the summary figure\npreslaughtermortality &lt;- preslaughtermortality %&gt;% mutate(ID = row_number())\n\n# Sort from lowest to highest production density for figure \npreslaughtermortality$Production_Type&lt;- ifelse((preslaughtermortality$Production_Type == \"Semi-Intensive and Intensive\"|preslaughtermortality$Production_Type == \"Intensive and Super-Intensive\"|preslaughtermortality$Production_Type == \"Extensive, Semi-Intensive, and Intensive\"|preslaughtermortality$Production_Type == \"All\"), \"Mixed/All\", preslaughtermortality$Production_Type)\n\npreslaughtermortality$Production_Type&lt;- ifelse((preslaughtermortality$Production_Type == \"Semi-Intensive\"), \"Semi-intensive\", preslaughtermortality$Production_Type)\n\ncustom_order &lt;- c(\"Extensive\", \"Semi-intensive\", \"Intensive\", \"Super-Intensive\",\"Mixed/All\")\n\npreslaughtermortality$Production_Type &lt;- factor(preslaughtermortality$Production_Type, levels = custom_order)\npreslaughtermortality &lt;- preslaughtermortality[order(preslaughtermortality$Production_Type), ]\n\n\n\n# Sort from earliest to latest life stage for summary figure facet wrap\ncustom_order &lt;- c(\"All\", \"Larval\", \"Postlarval\", \n                  \"Juvenile-subadult\", \"Postlarval, Juvenile-subadult\", \"Postlarval, Juvenile-subadult \")\npreslaughtermortality$Stage &lt;- factor(preslaughtermortality$Stage, levels = custom_order)\npreslaughtermortality &lt;- preslaughtermortality[order(preslaughtermortality$Stage), ]\n\npreslaughtermortality$Species&lt;-factor(preslaughtermortality$Species,\n                                      levels=c(\"P. vannamei\", \"P. monodon\", \n                                               \"M. rosenbergii\", \"Penaeids\", \"All\"))\n\nFinally, we want to get our estimates form the survival curves model to compare to the literature review.\n\n# load the data\n\n## cumulative rates\nvannamei.cumulative&lt;-read.csv(\"../data/survival_curves/vannamei_model_slaughter_probs.csv\", header=TRUE, sep=\",\")\nmonodon.cumulative&lt;-read.csv(\"../data/survival_curves/monodon_model_slaughter_probs.csv\", header=TRUE, sep=\",\")\nmacro.cumulative&lt;-read.csv(\"../data/survival_curves/macro_model_slaughter_probs.csv\", header=TRUE, sep=\",\") \n\n## stage-specific rates\nbystage.farm.shrimp&lt;-read.csv(\"../data/survival_curves/bystage_farmed_shrimp_model_probs.csv\", header=TRUE, sep=\",\")\n\nbystage.df&lt;- split(bystage.farm.shrimp, bystage.farm.shrimp$species) # split up the farmed shrimp by species so we can calculate averages by species\nbystage.vannamei&lt;-bystage.df$vannamei\nbystage.monodon&lt;-bystage.df$monodon\nbystage.macro&lt;-bystage.df$macrobrachium # these are stage specific rates\n\n## adding our results from the survival curves model to the dataset\nshrimp.mort&lt;-data.frame(Reference=rep(\"Survival curves model\", 12),\n                        Stage=c(rep(\"All\", 3), rep(\"Larval\", 3), \n                                     rep(\"Postlarval\", 3), \n                                     rep(\"Juvenile-subadult\", 3)),\n                        Species=rep(c(\"P. vannamei\",\"P. monodon\", \"Macrobrachium\"), 4),\n                        mean=c((1-mean(vannamei.cumulative$slaughter.age)), # calculate mean survival for each species, minus this from 1 to get mortality instead of survival\n                              (1-mean(monodon.cumulative$slaughter.age)),\n                              (1-mean(macro.cumulative$slaughter.age)),\n                              mean(bystage.vannamei$larval),\n                              mean(bystage.monodon$larval),\n                              mean(bystage.macro$larval),\n                              mean(bystage.vannamei$postlarval),\n                              mean(bystage.monodon$postlarval),\n                              mean(bystage.macro$postlarval),\n                              mean(bystage.vannamei$juvenile.adult),\n                              mean(bystage.monodon$juvenile.adult),\n                              mean(bystage.macro$juvenile.adult)),\n                      '2.5%'=c((1-quantile(vannamei.cumulative$slaughter.age, probs=0.975)), # get the lower bound of our 95% credibility intervals\n                              (1-quantile(monodon.cumulative$slaughter.age, probs=0.975)),\n                              (1-quantile(macro.cumulative$slaughter.age, probs=0.975)),\n                              quantile(bystage.vannamei$larval, probs=0.025),\n                              quantile(bystage.monodon$larval, probs=0.025),\n                              quantile(bystage.macro$larval, probs=0.025),\n                              quantile(bystage.vannamei$postlarval, probs=0.025),\n                              quantile(bystage.monodon$postlarval, probs=0.025),\n                              quantile(bystage.macro$postlarval, probs=0.025),\n                              quantile(bystage.vannamei$juvenile.adult, probs=0.025),\n                              quantile(bystage.monodon$juvenile.adult, probs=0.025),\n                              quantile(bystage.macro$juvenile.adult, probs=0.025)),\n                      '97.5%'=c((1-quantile(vannamei.cumulative$slaughter.age, probs=0.025)), # get the upper bound of our 95% credibility intervals\n                                (1-quantile(monodon.cumulative$slaughter.age, probs=0.025)),\n                                (1-quantile(macro.cumulative$slaughter.age, probs=0.025)),\n                                quantile(bystage.vannamei$larval, probs=0.975),\n                                quantile(bystage.monodon$larval, probs=0.975),\n                                quantile(bystage.macro$larval, probs=0.975),\n                                quantile(bystage.vannamei$postlarval, probs=0.975),\n                                quantile(bystage.monodon$postlarval, probs=0.975),\n                                quantile(bystage.macro$postlarval, probs=0.975),\n                                quantile(bystage.vannamei$juvenile.adult, probs=0.975),\n                                quantile(bystage.monodon$juvenile.adult, probs=0.975),\n                                quantile(bystage.macro$juvenile.adult, probs=0.975)),\n                      ID=rep(NA, 12),\n                      check.names=FALSE)\n\n# join the survival curves estimates to the literature review data\nall.dat&lt;-plyr::rbind.fill(shrimp.mort, preslaughtermortality) \n\n# organize the lide stage categories in order\nall.dat$Stage&lt;-factor(all.dat$Stage, levels=c( \"All\", \"Larval\", \"Postlarval\", \"Juvenile-subadult\", \"Postlarval, Juvenile-subadult\"))\n\n# make sure the text can wrap by putting a space in the word, to ensure a clean graph\npoint.est$Stage&lt;-ifelse((point.est$Stage == \"Postlarval \"), yes=\"Post- larval\", no=point.est$Stage)\npoint.est$Stage&lt;-ifelse((point.est$Stage == \"Postlarval, Juvenile-subadult \"), yes=\"Postlarval, Juvenile- subadult \", no=point.est$Stage)\n\npoint.est$Stage&lt;-factor(point.est$Stage, levels=c(\"Post- larval\", \"Postlarval, Juvenile- subadult \"))\n\nNow we can plot the results.\n\nlit.review.w.model&lt;-ggplot(all.dat) +\n  geom_pointrange(aes(y = Reference,  x = mean*100,\n                      xmin = `2.5%`*100, xmax = `97.5%`*100,\n                      color = Species), size=.45, linewidth=.85,\n                  position = position_dodge2(width = 1, padding = 2))+\n geom_point(data=point.est, \n             aes(x=Mean_Mortality*100, y=Reference, color=Species),\n             shape=4, stroke=1.2, show.legend=FALSE) +\n facet_grid(Stage~.,\n            scales = \"free\", space = \"free_y\", labeller = label_wrap_gen(width=2)) +\n  scale_colour_manual(values=c(\"#000000\", \"#CC79A7\",  \"#009E73\", \"#56B4E9\",\"#E69F00\", \"#0072B2\"),\n       labels=c(\"Unspecified\", expression(italic(\"M. rosenbergii\")),\n                               expression(italic(\"Macrobrachium\")),\n                               expression(italic(\"P. monodon\")), \n                               expression(italic(\"P. vannamei\")),\n                               \"Penaeids\")) +\n  labs(caption = \"Circles are means and error bars are 95% credibility intervals. Crosses are point estimates.\",x=\"Died before end of stage (%)\") +\n  guides(color=guide_legend(nrow=1,byrow=TRUE)) +\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(6, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        strip.text = element_text(size = 9, face=\"bold\"),\n        plot.caption = element_text(hjust = .5, size=9),\n        axis.text=element_text(size=10),\n        axis.title.x=element_text(size=10, face=\"bold\"),\n        axis.title.y=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,1,1,1), \"mm\"),\n        panel.spacing = unit(1.5, \"mm\"))\nlit.review.w.model\n\n\n\n\n\n\n\n#ggsave(lit.review.w.model, file=\"lit.review2.png\", width=7.5, height=10.5, unit=\"in\")\n\n\n2.2.1 Farm intensity\nNow we can see how mortality varies by production intensity. We restrict this analysis to the estimates from specific farm intensities. We provide errors bars of 95% credibility intervals for estimates that had ranges.\n\n# duplicate the data so that we preserve it\npreslaughtermortality2&lt;-preslaughtermortality\n\n# get the point estimate data and label it the same as the data with ranges\npoint.est2&lt;-point.est\npoint.est2$mean&lt;-point.est2$Mean_Mortality\npoint.est2$`2.5%`&lt;-NA\npoint.est2$`97.5%`&lt;-NA\npoint.est2$ID&lt;-NA\n\n# join them\nintensity.data&lt;-rbind(preslaughtermortality2, point.est2)\n\n# remove data from farms not of a specific intensity\nintensity.data&lt;-intensity.data %&gt;%\n  filter(!Production_Type==\"Mixed/All\")\n\n# order the whole data frame from extensive to super intensive farms\nintensity.data &lt;- intensity.data[order(intensity.data$Production_Type), ]\n\n# put species in the order we want them to appear\nintensity.data$Species&lt;-factor(\n  intensity.data$Species, levels=c(\"P. vannamei\", \"P. monodon\",\n                                           \"M. rosenbergii\", \"Penaeids\", \"All\"))\n\n# wrap some of the longer labels\nintensity.data$Prod.Type&lt;-factor(intensity.data$Production_Type,\n       levels = c( \"Super-Intensive\", \"Intensive\",  \"Semi-intensive\", \"Extensive\"), labels=c(\"Super-\\nintensive\", \"Intensive\", \"Semi-\\nintensive\", \"Extensive\"))\n\n# plot the results\nggplot(intensity.data, aes(x=Prod.Type, y=mean*100, fill=Species)) +\n  geom_bar(position = position_dodge2(preserve = \"single\", padding=0.1, width=2),  stat=\"identity\") +\n  geom_errorbar(aes(ymin=`2.5%`*100, ymax=`97.5%`*100), \n                position=position_dodge2(preserve = \"single\", padding=0.1), linewidth=.3) +\n  scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\", \"#cc79a7\"),\n                    labels=c(expression(italic(\"P. vannamei\")), \n                               expression(italic(\"P. monodon\")),\n                               \"Penaeids\")) +\n  xlab(\"\") +\n  ylab(\"Mortality (%)\") +\n  theme(legend.position=\"bottom\",\n        legend.title=element_blank(),\n        legend.key.size = unit(5, \"mm\"),\n        legend.text=element_text(size=10, hjust=0),\n        legend.spacing.x = unit(2, \"mm\"),\n        axis.text=element_text(size=10),\n        axis.title.y=element_text(size=10, face=\"bold\"),\n        axis.title.x=element_blank(),\n        legend.box.spacing = unit(1, \"mm\"),\n        plot.margin = unit(c(1,1,1,1), \"mm\")) +\n  coord_flip()",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Quantitative literature analysis</span>"
    ]
  }
]